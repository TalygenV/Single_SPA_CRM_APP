(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CRMStage","CRM Invoice~CRMCampaign~CRMPurchaseOrder~CRMSalesOrderListing~CRMVendor~InwardList"],{"0d3b":function(e,t,a){var i=a("d039"),s=a("b622"),l=a("c430"),o=s("iterator");e.exports=!i((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,a="";return e.pathname="c%20d",t.forEach((function(e,i){t["delete"]("b"),a+=i+e})),l&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==a||"x"!==new URL("http://x",void 0).host}))},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},5352:function(e,t,a){"use strict";a("e260");var i=a("23e7"),s=a("da84"),l=a("c65b"),o=a("e330"),r=a("83ab"),n=a("0d3b"),c=a("cb2d"),d=a("6964"),u=a("d44e"),m=a("9ed3"),p=a("69f3"),f=a("19aa"),h=a("1626"),v=a("1a2d"),g=a("0366"),b=a("f5df"),C=a("825a"),S=a("861d"),y=a("577e"),_=a("7c73"),w=a("5c6c"),D=a("9a1f"),k=a("35a1"),$=a("d6d6"),A=a("b622"),E=a("addb"),R=A("iterator"),x="URLSearchParams",M=x+"Iterator",F=p.set,T=p.getterFor(x),P=p.getterFor(M),I=Object.getOwnPropertyDescriptor,V=function(e){if(!r)return s[e];var t=I(s,e);return t&&t.value},N=V("fetch"),L=V("Request"),O=V("Headers"),U=L&&L.prototype,j=O&&O.prototype,q=s.RegExp,B=s.TypeError,G=s.decodeURIComponent,H=s.encodeURIComponent,z=o("".charAt),Y=o([].join),J=o([].push),Q=o("".replace),W=o([].shift),K=o([].splice),X=o("".split),Z=o("".slice),ee=/\+/g,te=Array(4),ae=function(e){return te[e-1]||(te[e-1]=q("((?:%[\\da-f]{2}){"+e+"})","gi"))},ie=function(e){try{return G(e)}catch(t){return e}},se=function(e){var t=Q(e,ee," "),a=4;try{return G(t)}catch(i){while(a)t=Q(t,ae(a--),ie);return t}},le=/[!'()~]|%20/g,oe={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},re=function(e){return oe[e]},ne=function(e){return Q(H(e),le,re)},ce=m((function(e,t){F(this,{type:M,iterator:D(T(e).entries),kind:t})}),"Iterator",(function(){var e=P(this),t=e.kind,a=e.iterator.next(),i=a.value;return a.done||(a.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),a}),!0),de=function(e){this.entries=[],this.url=null,void 0!==e&&(S(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===z(e,0)?Z(e,1):e:y(e)))};de.prototype={type:x,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,a,i,s,o,r,n,c=k(e);if(c){t=D(e,c),a=t.next;while(!(i=l(a,t)).done){if(s=D(C(i.value)),o=s.next,(r=l(o,s)).done||(n=l(o,s)).done||!l(o,s).done)throw B("Expected sequence with length 2");J(this.entries,{key:y(r.value),value:y(n.value)})}}else for(var d in e)v(e,d)&&J(this.entries,{key:d,value:y(e[d])})},parseQuery:function(e){if(e){var t,a,i=X(e,"&"),s=0;while(s<i.length)t=i[s++],t.length&&(a=X(t,"="),J(this.entries,{key:se(W(a)),value:se(Y(a,"="))}))}},serialize:function(){var e,t=this.entries,a=[],i=0;while(i<t.length)e=t[i++],J(a,ne(e.key)+"="+ne(e.value));return Y(a,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ue=function(){f(this,me);var e=arguments.length>0?arguments[0]:void 0;F(this,new de(e))},me=ue.prototype;if(d(me,{append:function(e,t){$(arguments.length,2);var a=T(this);J(a.entries,{key:y(e),value:y(t)}),a.updateURL()},delete:function(e){$(arguments.length,1);var t=T(this),a=t.entries,i=y(e),s=0;while(s<a.length)a[s].key===i?K(a,s,1):s++;t.updateURL()},get:function(e){$(arguments.length,1);for(var t=T(this).entries,a=y(e),i=0;i<t.length;i++)if(t[i].key===a)return t[i].value;return null},getAll:function(e){$(arguments.length,1);for(var t=T(this).entries,a=y(e),i=[],s=0;s<t.length;s++)t[s].key===a&&J(i,t[s].value);return i},has:function(e){$(arguments.length,1);var t=T(this).entries,a=y(e),i=0;while(i<t.length)if(t[i++].key===a)return!0;return!1},set:function(e,t){$(arguments.length,1);for(var a,i=T(this),s=i.entries,l=!1,o=y(e),r=y(t),n=0;n<s.length;n++)a=s[n],a.key===o&&(l?K(s,n--,1):(l=!0,a.value=r));l||J(s,{key:o,value:r}),i.updateURL()},sort:function(){var e=T(this);E(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){var t,a=T(this).entries,i=g(e,arguments.length>1?arguments[1]:void 0),s=0;while(s<a.length)t=a[s++],i(t.value,t.key,this)},keys:function(){return new ce(this,"keys")},values:function(){return new ce(this,"values")},entries:function(){return new ce(this,"entries")}},{enumerable:!0}),c(me,R,me.entries,{name:"entries"}),c(me,"toString",(function(){return T(this).serialize()}),{enumerable:!0}),u(ue,x),i({global:!0,constructor:!0,forced:!n},{URLSearchParams:ue}),!n&&h(O)){var pe=o(j.has),fe=o(j.set),he=function(e){if(S(e)){var t,a=e.body;if(b(a)===x)return t=e.headers?new O(e.headers):new O,pe(t,"content-type")||fe(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),_(e,{body:w(0,y(a)),headers:w(0,t)})}return e};if(h(N)&&i({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return N(e,arguments.length>1?he(arguments[1]):{})}}),h(L)){var ve=function(e){return f(this,U),new L(e,arguments.length>1?he(arguments[1]):{})};U.constructor=ve,ve.prototype=U,i({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:ve})}}e.exports={URLSearchParams:ue,getState:T}},5530:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a("b64b"),a("a4d3"),a("4de4"),a("d3b7"),a("e439"),a("159b"),a("dbb4");var i=a("ade3");function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},6964:function(e,t,a){var i=a("cb2d");e.exports=function(e,t,a){for(var s in t)i(e,s,t[s],a);return e}},"6c06":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v(e._s(e.header))]),a("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("Form",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var i=t.valid,s=t.errors;return[a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("Subject"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Subject",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.Subject,expression:"Subject"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{id:"Subject",name:"Subject",maxlength:"200",type:"text"},domProps:{value:e.Subject},on:{input:function(t){t.target.composing||(e.Subject=t.target.value)}}}),i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Subject"}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("FollowUp"))+" "+e._s(e.$t("ScheduleDate"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("div",{staticClass:"input-group"},[a("Field",{attrs:{name:"due date",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("v-date-picker",{staticClass:"input-group",attrs:{mode:"dateTime","min-date":new Date,"minute-increment":5},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.inputValue,l=t.inputEvents,o=t.togglePopover;return[a("input",e._g({class:{"form-control":!0,"is-invalid":i[0]},domProps:{value:s}},l)),a("div",{staticClass:"input-group-append",on:{click:function(e){return o()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:e.duedate,callback:function(t){e.duedate=t},expression:"duedate"}}),i[0]?a("span",{staticClass:"invalid-feedback d-block"},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1)])]),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("Priority"))+":")]),a("Field",{attrs:{name:"priority",rules:{required:!1}}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.priorityValue,expression:"priorityValue"}],staticClass:"form-control",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.priorityValue=t.target.multiple?a:a[0]},e.getSelectedValue]}},[a("option",{attrs:{value:""}},[e._v(e._s(e.$t("SelectPriorityLevel"))+" ")]),e._l(e.priority,(function(t,i){return a("option",{key:i,domProps:{value:t.value}},[e._v(" "+e._s(t.name)+" ")])}))],2)])],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left",class:{"d-none":e.enableReminder}},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Default"))+e._s(e.$t("Reminder"))+":")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.DefaultReminder,expression:"DefaultReminder"}],staticClass:"form-control disabled",attrs:{id:"DefaultReminder",name:"DefaultReminder",value:"",maxlength:"200",type:"text"},domProps:{value:e.DefaultReminder},on:{input:function(t){t.target.composing||(e.DefaultReminder=t.target.value)}}})])]),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("OverrideDefault"))+" "+e._s(e.$t("Reminder"))+":")]),a("div",{staticClass:"Col-4"},[a("label",{staticClass:"switch"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.enableReminder,expression:"enableReminder"}],staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{type:"checkbox"},domProps:{value:e.enableReminder,checked:Array.isArray(e.enableReminder)?e._i(e.enableReminder,e.enableReminder)>-1:e.enableReminder},on:{change:function(t){var a=e.enableReminder,i=t.target,s=!!i.checked;if(Array.isArray(a)){var l=e.enableReminder,o=e._i(a,l);i.checked?o<0&&(e.enableReminder=a.concat([l])):o>-1&&(e.enableReminder=a.slice(0,o).concat(a.slice(o+1)))}else e.enableReminder=s}}}),a("span",{staticClass:"slider round"},[a("span",{staticClass:"slider-yes"},[e._v("Yes")]),a("span",{staticClass:"slider-no"},[e._v("NO")])])])])])]),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",{class:{"d-none":!e.enableReminder}},[e._v(e._s(e.$t("Duration"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedDurationValue,expression:"selectedDurationValue"}],staticClass:"form-control",class:{"d-none":!e.enableReminder},staticStyle:{"max-width":"100%"},attrs:{id:"duration"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedDurationValue=t.target.multiple?a:a[0]},e.getValidate]}},[a("option",{attrs:{value:""}},[e._v("Select")]),e._l(e.reminderDurationValues,(function(t,i){return a("option",{key:i,domProps:{value:t,innerHTML:e._s(t)}})}))],2),a("span",{staticClass:"text-danger DurationReq small",class:{"d-none":!e.enableReminder},attrs:{id:"DurationReq"}})])]),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",{class:{"d-none":!e.enableReminder}},[e._v(e._s(e.$t("SelectType"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedDurationType,expression:"selectedDurationType"}],staticClass:"form-control",class:{"d-none":!e.enableReminder},staticStyle:{"max-width":"100%"},attrs:{id:"durationType"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedDurationType=t.target.multiple?a:a[0]},e.getValidate]}},[a("option",{attrs:{value:""}},[e._v("Select")]),e._l(e.reminderDurationTypes,(function(t,i){return a("option",{key:i,domProps:{value:t,innerHTML:e._s(t)}})}))],2),a("span",{staticClass:"text-danger DurationTypeReq small",class:{"d-none":!e.enableReminder}})])]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("FollowUpCRM"))+" "+e._s(e.$t("Message"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Message",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.Message,expression:"Message"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{id:"Message",name:"Message",maxlength:1e3,rows:"5"},domProps:{value:e.Message},on:{input:function(t){t.target.composing||(e.Message=t.target.value)}}}),i[0]?a("span",{staticClass:"invalid-feedback",attrs:{name:"Message"}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1)])]),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("button",{staticClass:"btn btn-success save-btn mr-1",attrs:{type:"button"},on:{click:function(t){return e.saveTask(i,s)}}},[a("em",{staticClass:"fa fa-save pr-2",attrs:{"aria-hidden":"true"}}),e._v(e._s(e.$t("Save"))+" ")]),a("button",{staticClass:"btn btn-danger delete-btn",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-close pr-2",attrs:{"aria-hidden":"true"}}),e._v(e._s(e.$t("Cancel"))+" ")])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("span",{staticClass:"mandatory"},[e._v(" "+e._s(e.$t("MandatoryString"))+" ")])])])])])])]}}])})],1)])])])],1)},s=[],l=(a("ac1f"),a("5319"),a("d3b7"),a("3ca3"),a("ddb0"),a("9861"),a("841c"),a("e9c4"),a("9769")),o={props:{modulename:{type:String,required:!0},modalFollowUpItem:null,submodulecode:{type:String,required:!0},sourceid:{Type:String,required:!0}},data:function(){return{isLoading:!1,currentDate:new Date,duedate:new Date,Subject:"",priority:[],Message:"",priorityValue:"",activitySourceID:0,modal:null,isView:!1,popover:{visibility:"click"},optionsMindate:{format:"MMM dd yyyy",useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:new Date(Date.now())},FollowUpIdForEdit:0,reminderDurationValues:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60"],reminderDurationTypes:["Minutes","Hours","Days"],enableReminder:!1,selectedDurationType:"",selectedDurationValue:"",DefaultReminder:$("#hdnReminderDuration").val(),header:this.$t("Add")+" "+this.$t("FollowUp")}},created:function(){this.activitySourceID=this.sourceid,this.GetPriority(),this.FollowUpIdForEdit=0,this.modalFollowUpItem&&this.FetchEventViewData(this.modalFollowUpItem.followup_notification_id),this.optionsMindate.minDate=new Date(Date.now());var e=this;parseInt(e.DefaultReminder)>60&&parseInt(e.DefaultReminder)<=1440?e.DefaultReminder=parseInt(e.DefaultReminder/60)+" Hours":parseInt(e.DefaultReminder)>1440?e.DefaultReminder=parseInt(e.DefaultReminder/1440)+" Days":e.DefaultReminder=e.DefaultReminder+" Minutes"},methods:{FetchEventViewData:function(e){var t=this;t.FollowUpIdForEdit=0,t.optionsMindate.minDate=!1;var a="id="+e+"&refId="+t.sourceid+"&subModuleCode="+t.modulename+"&moduleCode="+t.submodulecode;l["a"].updateActivityData(a).then((function(a){if(t.FollowUpIdForEdit=e,t.header=t.$t("Edit")+" "+t.$t("FollowUp"),null!=a.data){var i=a.data.data;t.duedate=t.$options.filters.formatDate(i[0].followUpDate),t.Message=i[0].followup_notification_message,t.Subject=i[0].followup_notification_subject,t.priorityValue=null!=i[0].priority_lavel&&0!=i[0].priority_lavel?i[0].priority_lavel:"",t.optionsMindate.minDate=new Date(Date.now());var s=i[0].reminder_duration;0!=s&&s<60?($(".rdoticketfor").trigger("click"),t.selectedDurationType="Minutes",t.selectedDurationValue=s):0!=s&&(60==s||s<1440)?($(".rdoticketfor").trigger("click"),t.selectedDurationType="Hours",t.selectedDurationValue=parseInt(s/60)):0!=s&&s>=1440&&($(".rdoticketfor").trigger("click"),t.selectedDurationType="Days",t.selectedDurationValue=parseInt(s/1440))}}))},GetPriority:function(){var e=this,t="id=&moduleName="+this.submodulecode+"&type=PRIORITY";l["a"].getLeaOwnerBySearch(t).then((function(t){var a=t.data;if(null!=a)return e.priority=a.DATA,e.priority}))},getSelectedValue:function(e){this.priorityValue=e.target.value},formatDate:function(e){if(e)try{var t=Globalize.culture().calendar.patterns.t;t=String(t).replace("t","A").replace("t","");var a=new Date(moment(String(e)).year(),moment(String(e)).month(),moment(String(e)).date(),moment(String(e)).hours(),moment(String(e)).minutes());return moment(a,"YYYY-MM-DD HH:mm:ss").format("MM-dd-yyyy")}catch(i){}},getValidate:function(){var e=$(".rdoticketfor").is(":checked")?"yes":"no",t=$("#duration").val(),a=$("#durationType").val();"yes"!=e||"0"!=t&&""!=t?$(".DurationReq").html(""):$(".DurationReq").html("Duration Is Required."),"yes"==e&&""==a?$(".DurationTypeReq").html("Duration Type Is Required."):$(".DurationTypeReq").html("")},saveTask:function(e,t){var a=this;this.$refs.form.validate().then((function(e){var t=new URLSearchParams(window.location.search),i=t.get("reqfrom");null==i&&(i=window.location.pathname.indexOf("Listing")>-1||window.location.pathname.indexOf("Index")>-1?1:0);var s=parseInt(i)||0,o=$(".rdoticketfor").is(":checked")?"yes":"no",r=$("#duration").val(),n=$("#durationType").val(),c=0,d="";"yes"!=o||"0"!=r&&""!=r?$(".DurationReq").html(""):(d="no",$(".DurationReq").html("Duration Is Required.")),"yes"==o&&""==n?(d="no",$(".DurationTypeReq").html("Duration Type Is Required.")):$(".DurationTypeReq").html("");var u=new Date(a.duedate),m=new Date,p=u-m,f=Math.floor(p/1e3/60);if("yes"==o){if("Minutes"==n?c=r:"Hours"==n?c=60*r:"Days"==n&&(c=24*r*60),f<=c||f<=0)return a.ShowAlert(a.$t("InvalidReminderDuration"),"failure",!0,a.$t("Alert")),!1}else if(c=$("#hdnReminderDuration").val(),f<=c||f<=0)return a.ShowAlert(a.$t("InvalidReminderDate"),"failure",!0,a.$t("Alert")),!1;if(o&&0==d.length){var h={sourceId:a.activitySourceID,moduleName:a.modulename,subModuleCode:a.submodulecode,subjecttext:a.Subject,dueDate:a.duedate,priorityLavel:a.priorityValue,messagetext:a.Message,reminderduration:c,activityType:"FollowUp",activityId:a.FollowUpIdForEdit},v=JSON.stringify(h);e&&(a.isLoading=!0,l["a"].Addtask(v).then((function(e){a.isLoading=!1,"Success"==e.data[0].Status?(h.activityId>0?a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("FollowUp")]),"success",!0,a.$t("Alert")):a.ShowAlert(a.$t("AddedSuccess",[a.$t("FollowUp")]),"success",!0,a.$t("Alert")),a.duedate="",a.Subject="",a.priority="",a.Message="",a.showAddTaskModal=!1,a.$emit("close"),s>0?a.$parent.loadFollowUpData(null,a.sourceid):a.$parent.loadData("activities")):"Exist"==e.data[0].Status&&a.ShowAlert(a.$t("AlreadyExist",[a.$t("FollowUp")]),"warning",!0,a.$t("Alert"))}))),a.isLoading=!1}}))}}},r=o,n=a("2877"),c=Object(n["a"])(r,i,s,!1,null,null,null);t["a"]=c.exports},"841c":function(e,t,a){"use strict";var i=a("c65b"),s=a("d784"),l=a("825a"),o=a("1d80"),r=a("129f"),n=a("577e"),c=a("dc4a"),d=a("14c3");s("search",(function(e,t,a){return[function(t){var a=o(this),s=void 0==t?void 0:c(t,e);return s?i(s,t,a):new RegExp(t)[e](n(a))},function(e){var i=l(this),s=n(e),o=a(t,i,s);if(o.done)return o.value;var c=i.lastIndex;r(c,0)||(i.lastIndex=0);var u=d(i,s);return r(i.lastIndex,c)||(i.lastIndex=c),null===u?-1:u.index}]}))},9861:function(e,t,a){a("5352")},addb:function(e,t,a){var i=a("4dae"),s=Math.floor,l=function(e,t){var a=e.length,n=s(a/2);return a<8?o(e,t):r(e,l(i(e,0,n),t),l(i(e,n),t),t)},o=function(e,t){var a,i,s=e.length,l=1;while(l<s){i=l,a=e[l];while(i&&t(e[i-1],a)>0)e[i]=e[--i];i!==l++&&(e[i]=a)}return e},r=function(e,t,a,i){var s=t.length,l=a.length,o=0,r=0;while(o<s||r<l)e[o+r]=o<s&&r<l?i(t[o],a[r])<=0?t[o++]:a[r++]:o<s?t[o++]:a[r++];return e};e.exports=l},b32d:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal d-block my-popups dialog"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[e._t("header",(function(){return[a("h5",[e._v(e._s(e.$t("SendEmail")))])]})),a("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),a("div",{staticClass:"modal-body"},[a("Form",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var i=t.valid,s=t.errors;return[a("div",{},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("Subject"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Email Subject",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.emailSubject,expression:"emailSubject"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{type:"text",maxlength:50,name:"emailSubject",disabled:e.isView},domProps:{value:e.emailSubject},on:{input:function(t){t.target.composing||(e.emailSubject=t.target.value)}}}),a("span",{staticClass:"invalid-feedback",attrs:{name:"Email Subject"}},[e._v(e._s(i[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("EmailTemplate"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Email TemplateValue",rules:{required:!0},label:"Email"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("select",{class:{"form-control":!0,"is-invalid":i[0]},attrs:{id:"",name:"emailtemplateValue"},domProps:{value:e.emailtemplateValue},on:{change:e.getSelectedValue}},[a("option",{attrs:{value:""}},[e._v(" "+e._s(e.$t("Select"))+" "+e._s(e.$t("EmailTemplate"))+" ")]),e._l(e.emailtemplate,(function(t,i){return a("option",{key:i,domProps:{value:t.value}},[e._v(e._s(t.name))])}))],2),a("span",{staticClass:"invalid-feedback",attrs:{name:"Email TemplateValue"}},[e._v(e._s(i[0]))])]}}],null,!0),model:{value:e.emailtemplateValue,callback:function(t){e.emailtemplateValue=t},expression:"emailtemplateValue"}})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("Priority"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Email PriorityValue",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:e.emailPriorityValue,expression:"emailPriorityValue"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{id:"emailPriorityValue",name:"emailPriorityValue"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.emailPriorityValue=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v(" "+e._s(e.$t("Select"))+" "+e._s(e.$t("Priority"))+" ")]),a("option",{attrs:{value:"normal"}},[e._v(e._s(e.$t("Normal"))+" ")]),a("option",{attrs:{value:"low"}},[e._v(" "+e._s(e.$t("Low"))+" ")]),a("option",{attrs:{value:"high"}},[e._v(" "+e._s(e.$t("High"))+" ")])]),i[0]?a("span",{staticClass:"invalid-feedback",attrs:{name:"Email PriorityValue"}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1)]),"CampaignDetails"!=e.callFrom?a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("Description"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Description",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("ckeditor",{staticStyle:{height:"400px"},attrs:{editor:e.editor},model:{value:e.Description,callback:function(t){e.Description=t},expression:"Description"}}),i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1)]):e._e()]),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("div",{staticClass:"py-2"},[a("a",{staticClass:"btn btn-success formbtn text-white mr-2",attrs:{href:"javascript:;"},on:{click:function(t){return e.saveEmail(i,s)}}},[a("em",{staticClass:"fa fa-send pr-2"}),e._v(e._s(e.$t("Send"))+" ")]),a("a",{staticClass:"btn btn-danger formbtn widthhalf text-white",on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-close pr-2"}),e._v(e._s(e.$t("Cancel"))+" ")])])]),a("div",{staticClass:"col-lg-6 pt-2"},[a("small",{staticClass:"text-danger"},[e._v(" "+e._s(e.$t("MandatoryString"))+" ")])])])])]}}])})],1)])])])])},s=[],l=(a("a9e3"),a("e9c4"),a("fb3d")),o=a.n(l),r=a("9769"),n={props:{selectedids:null,userid:{type:Number,required:!0},companyid:{type:Number,required:!0},templatename:{type:String,required:!0},selecteditems:{type:Array,required:!0},emailSubject:{type:String,required:!0},submodulecode:{type:String,required:!0},callFrom:{type:String}},data:function(){return{emailSubject:"",emailPriorityValue:"",duedate:"",Subject:"",txtemailDescription:"",emailtemplate:[],Message:"",emailtemplateValue:"",modal:[],isView:!1,editor:o.a,options:{useCurrent:!1,showClear:!0,showClose:!0}}},created:function(){this.modal=this.modalItem,this.GetEmailTemplate()},methods:{onReady:function(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},GetEmailTemplate:function(){var e=this,t="id=&type=EMAILTEMPLATE";"CRM_STAGES"==e.submodulecode&&(t="",t="id=&type=CRM_STAGE_EMAILTEMPLATE"),r["a"].getLeaOwnerBySearch(t).then((function(t){var a=t.data;if(null!=a)return e.emailtemplate=a.DATA,e.emailtemplate}))},loadEmailTemplate:function(e){if(""!=e){var t=this,a=e,i="id="+a;r["a"].GetEmailData(i).then((function(e){var a=e.data;null!=a&&(t.Description=a.data[0].template_content)}))}else t.txtemailDescription=""},getSelectedValue:function(e){this.emailtemplateValue=e.target.value,this.loadEmailTemplate(this.emailtemplateValue)},saveEmail:function(e,t){var a=this;a.$refs.form.validate().then((function(e){if(e){var t={templatename:a.emailtemplateValue,selecteditems:a.selectedids,emailSubject:a.emailSubject,emailPriorityValue:a.emailPriorityValue,submodulecode:a.submodulecode,mailStatus:0,emailCc:null,emailBcc:null,body:"CampaignDetails"==a.callFrom?null:a.Description,to:null};if("CampaignDetails"==a.callFrom){t.campaignId=a.$route.params.id;var i=JSON.stringify(t);r["a"].AddGroupEmailTemplate(i).then((function(e){"Success"==e.data[0].Status?(a.ShowAlert(a.$t("Email Sent Successfully"),"success",!0,a.$t("Alert")),a.duedate="",a.Subject="",a.priority="",a.Message="",a.$emit("close"),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked")):a.ShowAlert(a.$t("UnknownErrorOccur"),"warning",!0,a.$t("Alert"))}))}else{i=JSON.stringify(t);r["a"].AddEmailTemplate(i).then((function(e){200==e.status?(a.ShowAlert(a.$t("Email Sent Successfully"),"success",!0,a.$t("Alert")),a.duedate="",a.Subject="",a.priority="",a.Message="",a.$emit("close"),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#Sendbulkmail").addClass("disabled"),$("#ChangeOwnerId").addClass("disabled"),$("#AdditionalOwnerId").addClass("disabled"),$("#CloseLeadId").addClass("disabled"),$("[id^=Delete]").addClass("disabled")):a.ShowAlert(a.$t("UnknownErrorOccur"),"warning",!0,a.$t("Alert"))}))}}}))}}},c=n,d=a("2877"),u=Object(d["a"])(c,i,s,!1,null,null,null);t["a"]=u.exports},dbb4:function(e,t,a){var i=a("23e7"),s=a("83ab"),l=a("56ef"),o=a("fc6a"),r=a("06cf"),n=a("8418");i({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(e){var t,a,i=o(e),s=r.f,c=l(i),d={},u=0;while(c.length>u)a=s(i,t=c[u++]),void 0!==a&&n(d,t,a);return d}})},e29d:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("FollowUp")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.closePopup()}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body",staticStyle:{"max-height":"600px","overflow-y":"auto"}},[a("div",{staticClass:"listing"},[e.followupList.length>0?a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"table-openactivities-content","aria-describedby":"folowuplist"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{attrs:{scope:"col"}},[a("span",[e._v(" "+e._s(e.$t("Subject"))+" ")])]),a("th",{attrs:{scope:"col"}},[a("span",[e._v(" "+e._s(e.$t("Activity"))+" "+e._s(e.$t("Type"))+" ")])]),a("th",{attrs:{scope:"col"}},[a("span",[e._v(" "+e._s(e.$t("Activity"))+" "+e._s(e.$t("ScheduleDate"))+" ")])]),a("th",{attrs:{scope:"col"}},[a("span",[e._v(" "+e._s(e.$t("Activity"))+" "+e._s(e.$t("OWNER"))+" ")])]),a("th",{attrs:{scope:"col"}},[a("span",[e._v(" "+e._s(e.$t("CreatedAt"))+" ")])]),a("th",{attrs:{scope:"col"}},[a("span",[e._v(" "+e._s(e.$t("Status"))+" ")])]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[a("span",[e._v(" "+e._s(e.$t("Action"))+" ")])])])]),a("tbody",e._l(e.followupList,(function(t){return a("tr",[a("td",[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return e.openToAddEditFollowUp(t)}}},[e._v(e._s(t.followup_notification_subject))])]),a("td",["FollowUp"===t.activity_type?a("div",[a("label",[e._v(" "+e._s(e.$t("FollowUp"))+" ")])]):a("div",[e._v(" "+e._s(t.activity_type)+" ")])]),a("td",[e._v(e._s(e.$options.filters.formatDate(t.followup_notification_schedule)))]),a("td",[e._v(e._s(t.activity_owner))]),a("td",[e._v(e._s(e.$options.filters.formatDate(t.created_at)))]),a("td",[a("span",{class:{"px-2 bg-success text-white d-block text-center":"Active"==t.status_name,"px-2 bg-danger text-white d-block text-center":"Inactive"==t.status_name}},[e._v(e._s(t.status_name))])]),a("td",{staticClass:"text-center single-action"},[a("a",{attrs:{href:"javascript:;",title:e.$t("Delete")},on:{click:function(a){return e.DeleteActivityData(t.followup_notification_id)}}},[a("em",{staticClass:"fa fa-trash action-icon text-danger"})])])])})),0)])]):e._e(),0==e.followupList.length?a("div",{staticClass:"text-center text-danger p-4 border no-record"},[e._v(" "+e._s(e.$t("NoRecordfound")))]):e._e()])]),a("div",{staticClass:"modal-footer"},[a("div",{staticClass:"col-lg-6 text-right p-0"},[a("a",{staticClass:"btn btn-success formbtn text-white",attrs:{href:"javascript:;"},on:{click:function(t){return e.openToAddEditFollowUp(null)}}},[a("em",{staticClass:"fa fa-plus pr-2"}),e._v(e._s(e.$t("Add"))+" "+e._s(e.$t("FollowUp")))])])])])])]),e.showAddEventModalForAddEdit?a("modalevent",{ref:"addEditFollowupModal",attrs:{modulename:e.modulename,submodulecode:e.submodulecode,sourceid:e.sourceId},on:{close:function(t){e.showAddEventModalForAddEdit=!1}}}):e._e()],1)])},s=[],l=(a("a9e3"),a("4de4"),a("d3b7"),a("e9c4"),a("6c06")),o=a("9769"),r={components:{modalevent:l["a"]},props:{modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},userid:{type:Number,required:!0},leadInfo:{Type:Object,required:!0},srcId:{Type:String,required:!0}},data:function(){return{followupList:[],showAddEventModalForAddEdit:!1,sourceId:null,listItem:null}},created:function(){this.sourceId=this.srcId,this.loadFollowUpData(this.leadInfo,this.srcId)},methods:{formatDateTimeFunc:function(e){if(e)return moment(String(e),"YYYY-MM-DD HH:mm").format("MM/dd/yyyy")},loadFollowUpData:function(e,t){if("undefined"!=typeof t&&null!=t&&""!=t){var a=this;a.listItem=e,a.sourceId=t,a.followupList=[];var i="id="+t+"&subModuleCode="+a.submodulecode+"&moduleName="+a.modulename;o["a"].getFollowupList(i).then((function(e){""!=e.data&&null!=e.data&&e.data.data.length>0?(a.followupList=e.data.data.filter((function(e){return"FollowUp"==e.activity_type})),setTimeout((function(){a.CheckBoxBootstrap()}),100),setTimeout((function(){a.ResponsiveDataTable("table-openactivities-content")}),500)):a.followupList=[]}))}},DeleteActivityData:function(e){var t=this;e>0&&t.confirmR(this.$t("ConfirmDelete"),!0,this.$t("Confirm"),(function(){var a={ids:e,moduleName:t.modulename,subModuleCode:t.submodulecode,refCode:"DELETE_VIEW_ACTIVITY",refId:t.sourceId},i=JSON.stringify(a);o["a"].deleteActivityData(i).then((function(e){"Success"==e.data[0].Status?(t.ShowAlert(t.$t("DeletedSuccess",[t.$t("FollowUp")]),"success",!0,t.$t("Alert")),t.loadFollowUpData(null,t.sourceId)):t.ShowAlert(t.$t("DeletedError",[t.$t("FollowUp")]),"warning",!0,t.$t("Alert"))}))}))},closePopup:function(){this.$emit("close")},openToAddEditFollowUp:function(e){var t=this;if(null!=t.listItem&&"NO"!=t.listItem.is_additional_lead_owner&&"CRM_LEADS"==t.submodulecode){var a=JSON.parse(t.listItem.is_additional_lead_owner),i=a.filter((function(e){return"AddAcitvities"==e.permission_code}));i.length>0?(t.showAddEventModalForAddEdit=!0,null!=e&&setTimeout((function(){t.$refs.addEditFollowupModal.FetchEventViewData(e.followup_notification_id)}),500)):alert(t.$t("additionalOwnerAuthorityWarning"))}else t.showAddEventModalForAddEdit=!0,console.log(t.sourceId),null!=e&&setTimeout((function(){t.$refs.addEditFollowupModal.FetchEventViewData(e.followup_notification_id)}),500)}}},n=r,c=a("2877"),d=Object(c["a"])(n,i,s,!1,null,null,null);t["a"]=d.exports},e439:function(e,t,a){var i=a("23e7"),s=a("d039"),l=a("fc6a"),o=a("06cf").f,r=a("83ab"),n=s((function(){o(1)})),c=!r||n;i({target:"Object",stat:!0,forced:c,sham:!r},{getOwnPropertyDescriptor:function(e,t){return o(l(e),t)}})},eb8b:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("loader",{attrs:{"is-visible":e.isLoading}}),a("TgList",{attrs:{IsShowAction:"true",ModuleName:"CRM",SubModuleCode:"CRM_STAGES",IdentityColumn:"stage_id",HeaderText:e.$t("Stage"),ListData:e.StageData,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchData,LegendArray:e.LegendArray,IsFilterApplied:!!e.searchCondition,SortExp:e.SortExp,SortBy:e.SortBy,CurrentPageNumber:e.PageNumber},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function(t){var i=t.data;return["status_id"==i.column.COLUMN_NAME?[e.isCRMShowStausDrop(i.row.status_id,"CRM_STAGES")?a("listing-status",{ref:"updatestatus",attrs:{isfor:"CRM_STAGES",dataid:i.row.stage_id,"data-controller":"Crm",statuslist:e.StatusListForListing,item:i,"data-action":"index",dataselected:i.row.status_id,callbackfunction:e.FetchData,isselectedvaluestring:!0}}):e._e(),e.isCRMShowStausDrop(i.row.status_id,"CRM_STAGES")?e._e():a("a",{staticClass:"inactive-disabled"},[a("span",{class:e.getStatusClass(i.row.status_id,"status_id")},[e._v(" "+e._s(i.row[i.column.COLUMN_NAME])+" ")])])]:e._e()]}}])}),e.showFilter?a("searchfilter",{attrs:{submodulecode:"CRM_STAGES",modulename:"CRM",callbackfunction:e.FetchData},on:{close:function(t){e.showFilter=!1},FilterData:e.FilterData}},[a("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("Search")))])]):e._e(),e.ShowManageView?a("viewlayout",{directives:[{name:"show",rawName:"v-show",value:e.ShowManageView,expression:"ShowManageView"}],attrs:{submodulecode:"CRM_STAGES",modulename:"CRM",callbackfunction:e.FetchData,usertype:e.usertype},on:{close:function(t){e.ShowManageView=!1}}},[a("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("Search")))])]):e._e(),e.showAddEmailTemplate?a("modalemail",{attrs:{selectedids:e.modalItem,userid:e.userid,companyid:e.companyId,submodulecode:"CRM_STAGES"},on:{close:function(t){e.showAddEmailTemplate=!1}}},[a("h5",{staticClass:"modal-title",attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("SendEmail")))])]):e._e(),e.showAddEventModal?a("modalfollowupslist",{attrs:{srcId:e.souceID,modulename:"CRM",submodulecode:"CRM_STAGES",userid:e.userid,baseurl:e.BaseUrlForManageView},on:{close:e.closeEventViewModal}}):e._e()],1)},s=[],l=a("5530"),o=a("53ca"),r=(a("e9c4"),a("c740"),a("d3b7"),a("159b"),a("9769")),n=[{fieldName:"Stage Name",fieldType:"text",fieldIcon:"fa-file",fieldSearchConditionName:["stage_name"],isSearch:!1,value:"",listOptions:[]},{fieldName:"FORECAST CATEGORY NAME",fieldType:"ddl-check",fieldIcon:"fa-file-text-o",fieldSearchConditionName:["forcst.forecast_id"],isSearch:!1,value:"",listOptions:[]}],c=[{title:"Page Tour",iconClass:"fa fa-road",callbackfunction:"setTourGuideSteps",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Reset",iconClass:"fa-filter text-danger",callbackfunction:"removeFilter",href:"",additionalClass:"",isdisabled:!1,isvisible:!1,checkPrivilege:!1},{title:"Filters",iconClass:"fa-filter",callbackfunction:"openFilterPopUp",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"ManageView",iconClass:"fa-list-alt",callbackfunction:"ManageView",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"AddStage",iconClass:"fa-plus",href:"/CRM/ManageStage/0/CRM/CRM_STAGES",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"addStage_a"},{title:"ExportToExcel",iconClass:"fa-file-excel-o",callbackfunction:"downloadExceldata",href:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{id:"Sendbulkmail",title:"SendEmail",iconClass:"fa-envelope",callbackfunction:"sendBulkEmail",isdisabled:!0,isvisible:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0}],d=[{title:"View",href:"/CRM/ViewStageDetails/{stage_id}/CRM/CRM_STAGES",icon:"fa fa-eye action-icon",additionalSpan:""},{title:"Edit",href:"/CRM/ManageStage/{stage_id}/CRM/CRM_STAGES",icon:"fa fa-pencil text-success action-icon",additionalSpan:""},{title:"FollowUps",callbackfunction:"openAddNewEvent",href:"javascript:void(0)",icon:"fa fa-flag text-muted action-icon",additionalSpan:""}];function u(e,t,a){var i=e,s={};s["moduleName"]=t,s["type"]=a,r["a"].GetDDLData(s).then((function(e){var t=e.data;if(null!=t)return i.leftSearchFields[1].listOptions=t.DATA,i.Forecastcategorylist=t.DATA}))}var m={buttons:c,leftSearchFields:n,listActions:d,GetForecastCategorylist:u},p=a("cdd5"),f=a("b32d"),h=a("e29d"),v=a("fc0b"),g=a("2aeb"),b={components:{viewlayout:p["a"],modalemail:f["a"],TgList:g["a"],modalfollowupslist:h["a"],searchfilter:v["a"]},data:function(){return{txtstagename:"",Forecastcategorylist:null,showAddEventModal:!1,ShowManageView:!1,showFilter:!1,isLoading:!1,leftSearchFields:m.leftSearchFields,userid:null,usertype:null,searchCondition:"",PageNumber:1,PageSize:10,SortBy:"",SortExp:"",listheaderbuttons:m.buttons,Headers:null,noRecord:!1,StageData:null,listActions:m.listActions,TotalRecords:0,StatusListForListing:[],IsAnySearch:!1,souceID:0,showAddEmailTemplate:!1,LegendArray:[],appliedFilter:[],privilegeParams:null}},created:function(){this.userid=this.GetUserInfo.ID,this.usertype=this.GetUserInfo.UserType,this.privilegeParams="controller=CRM&action=";var e=this;m.GetForecastCategorylist(e,"CRM","FORECAST_CATEGORY"),e.getStatuslistForListing("CRM","en"),e.GetPageSizeOption(),e.FetchData()},updated:function(){this.BindActionButtonEvent()},methods:{openAddNewEvent:function(e,t){var a=this;a.souceID=t.stage_id,a.selectedItem=e,a.showAddEventModal=!a.showAddEventModal},closeEventViewModal:function(){this.showAddEventModal=!1},ManageView:function(){this.ShowManageView=!0,setTimeout((function(){$("#modalManageView").modal("show"),setTimeout((function(){this.SetBootstraptoolTip()}),200)}),1e3)},commonDeleteData:function(e){var t=this;r["a"].CheckPrivilege(t.privilegeParams+"DeleteStage").then((function(e){if(e.data){var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("Stage"),(function(){var e={ids:a,moduleName:"CRM",subModuleCode:"CRM_STAGES"},i=JSON.stringify(e);r["a"].CommonDeleteData(i).then((function(e){var a="";200==e.status?($(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),a=t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Stage")]),"success",!0,t.$t("Alert")),t.PageNumber=parseInt(t.PageNumber)-1,t.PageNumber<=0&&(t.PageNumber=1),t.FetchData()):a=t.ShowAlert(t.$t("DeletedError",[t.$t("Stage")]),"failure",!0,t.$t("Alert")),setTimeout((function(){a.modal("hide")}),2e3)}))})):t.ShowAlert(t.$t("Selectanyrecordtodelete"))}else t.ShowAlert("You are not authorized","failure",!0,"Alert")}))},sortdata:function(e){var t="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",t="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",t="sort tb_headerSortUp"):(this.SortExp="ASC",t="sort tb_headerSortDown")),this.FetchData(),$("#"+e+"  span:first-child").attr("class",t)},cancelOrRefresh:function(){this.txtstagename="",this.selectedForecastCategory=[],this.searchCondition="",this.IsAnySearch=!1,this.PageNumber=1,this.FetchData()},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchData()},openFilterPopUp:function(e){this.cancelOrRefresh(),this.showFilter=!0},FilterData:function(e,t,a,i,s,l){this.pageNum=e,this.pageSize=t,this.sortBy=a,this.sortExp=i,this.searchCondition=s,null!=Object(o["a"])(l)&&this.appliedFilter.push(l),this.FetchData()},actionButtonClick:function(e,t,a,i){var s=this;switch(e){case"checkPrivilegeView":break;case"checkPrivilegeDetails":break;case"openAddNewEvent":s.openAddNewEvent(t.Order_id,t);break}},currentPageMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchData()},GetPageSizeOption:function(){for(var e=[],t=10,a=t;a<t+95;a+=5)e.push(a);this.PageSizeOption=e},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"ManageView":this.ManageView();break;case"openFilterPopUp":this.openFilterPopUp();break;case"downloadExceldata":this.FetchData(!0);break;case"sendBulkEmail":this.SendBulkEmail();break;case"commonDeleteData":this.commonDeleteData();break;case"removeFilter":var t=this;this.searchCondition="";var a=t.listheaderbuttons.findIndex((function(e){return"removeFilter"===e.callbackfunction}));t.listheaderbuttons[a].isvisible=!1;var i=t.listheaderbuttons.findIndex((function(e){return"openFilterPopUp"===e.callbackfunction}));t.listheaderbuttons[i].iconClass="fa fa-filter";try{t.appliedFilter=[]}catch(s){}t.FetchData();break;case"setTourGuideSteps":this.setTourGuideSteps(0,this);break}},SendBulkEmail:function(e){var t=this;r["a"].CheckPrivilege(t.privilegeParams+"SendBulkEmail").then((function(e){if(e.data){var a="",i="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").not(".CloseLeadInput").each((function(){i.length>0&&(i+=","),i+=$(this).val(),a=i})),a.length>0&&(t.showAddEmailTemplate=!0,t.modalItem=a)}else t.ShowAlert("You are not authorized","failure",!0,"Alert")}))},getStatuslistForListing:function(e,t){var a=this,i="langCode="+t+"&statusType="+e+"&hasglobal=true";r["a"].statusdropdown(i).then((function(e){if("Success"==e.data.status){var t=e.data.result;a.StatusListForListing=t.data}}))},getRequestParams:function(e,t,a,i,s,l){var o={};return e&&(o["pageNum"]=e),l&&(o["searchcondition"]=l),s&&(o["isPaged"]=s),a&&(o["sortBy"]=a),i&&(o["sortExp"]=i),t&&(o["pageSize"]=t),o},leftCommonSearch:function(e){this.PageNumber=e.PageNumber,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchCondition:this.searchCondition="",this.FetchData()},renderActions:function(e){var t=this,a=[];return t.listActions.forEach((function(t){var i=Object(l["a"])({},t);switch(i.title){case"View":i.isVisible="Draft"!=e.status_id;break;case"Edit":i.isVisible="Cancelled"!=e.status_id&&"Closed"!=e.status_id;break;case"FollowUps":i.isVisible="Closed"!=e.status_id;break;default:i.isVisible=!0;break}a.push(i)})),a},clickEventOfColumn:function(e,t){var a=this;"stage_name"==t.COLUMN_NAME&&a.$router.push({path:"/CRM/ViewStageDetails/"+e.stage_id+"/CRM/CRM_STAGES"})},FetchData:function(e){var t=this.getRequestParams(this.pageNumber,this.pageSize,this.sortBy,this.sortExp,this.isPaged,this.searchcondition),a=this;a.isLoading=!0,t.pageSize=e?a.TotalRecords:a.PageSize,t.pageNumber=a.PageNumber,t.searchCondition=a.searchCondition,a.PageNumber?t.pageNum=a.PageNumber:a.PageNumber=t.pageNum=1,"undefined"!=typeof a.isPaged?t.isPaged=a.isPaged:a.isPaged=t.isPaged=1,t.isPaged=a.isPaged,t.sortBy=a.SortBy,t.sortExp=a.SortExp;var i="";if(a.isBlank(this.searchCondition)||(i+=a.searchCondition),a.isBlank(this.conditionForInstantSearch)||(i+=a.isBlank(a.searchCondition)?a.conditionForInstantSearch:" AND "+a.conditionForInstantSearch),""!=i&&(t.searchCondition=i,a.appliedFilter.length>0)){var s=a.listheaderbuttons.findIndex((function(e){return"removeFilter"===e.callbackfunction}));a.listheaderbuttons[s].isvisible=!0;var l=a.listheaderbuttons.findIndex((function(e){return"openFilterPopUp"===e.callbackfunction}));a.listheaderbuttons[l].iconClass="fa fa-filter text-success"}e?(t.isPaged=0,r["a"].StageListing(t).then((function(e){""!=e.data&&null!=e.data?a.JSONToCSVConvertor(e.data,"Stage-Detail",!0):a.ModelnoRecord=!0,a.isLoading=!1}))):r["a"].StageListing(t).then((function(e){""!=e.data&&null!=e.data?(a.Headers=e.data.schema,a.Headers.forEach((function(e){e.settings=null,"stage_name"==e.COLUMN_NAME&&(e.settings={clickEvent:a.clickEventOfColumn,formatter:a.columnDataFormatter}),"status_id"==e.COLUMN_NAME&&(e.settings={isInSlot:!0})})),e.data.data.length>0?(a.StageData=e.data.data,a.StageData.forEach((function(e){e.isCheckBoxDisabled=!1,"Closed"==e.status_id&&(e.isCheckBoxDisabled=!0),e.rowDetailsUrl="",""==e.rowDetailsUrl&&(e.rowDetailsUrl="/CRM/ViewStageDetails/"+e.stage_id+"/CRM/CRM_STAGES")})),a.TotalRecords=e.data.data[0].total_records,a.TotalPages=Math.ceil(a.TotalRecords/a.PageSize),a.CurrentPage=a.PageNumber,$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#DeleteStage").addClass("disabled"),$("#Sendbulkmail").addClass("disabled"),setTimeout((function(){$("#DeleteMultiple").addClass("disabled"),$("#DeleteMultiple").removeClass("enable")}),1e3),a.noRecord=!1):(a.noRecord=!0,a.StageData=[],a.TotalRecords=0,$("[id^='chkAll']").prop("disabled",!0),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$("#DeleteStage").addClass("disabled"),setTimeout((function(){$("#DeleteMultiple").addClass("disabled"),$("#DeleteMultiple").removeClass("enable")}),1e3),setTimeout("CheckBoxBootstrap()",100),$("#Sendbulkmail").addClass("disabled"))):(a.noRecord=!0,a.StageData=[],a.Headers=[],a.TotalRecords=0,$("[id^='chkAll']").prop("disabled",!0),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$("#DeleteStage").addClass("disabled"),setTimeout((function(){$("#DeleteMultiple").addClass("disabled"),$("#DeleteMultiple").removeClass("enable")}),1e3),$("#Sendbulkmail").addClass("disabled")),setTimeout((function(){a.ResponsiveDataTable("tablelistingdata")}),500),a.isLoading=!1}))}}},C=b,S=a("2877"),y=Object(S["a"])(C,i,s,!1,null,null,null);t["default"]=y.exports}}]);
//# sourceMappingURL=CRMStage.js.map
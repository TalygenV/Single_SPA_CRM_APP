(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CRMContactImportDetails"],{3511:function(t,e){var a=TypeError,s=9007199254740991;t.exports=function(t){if(t>s)throw a("Maximum allowed index exceeded");return t}},"99af":function(t,e,a){"use strict";var s=a("23e7"),o=a("d039"),c=a("e8b5"),n=a("861d"),r=a("7b0b"),i=a("07fa"),l=a("3511"),u=a("8418"),d=a("65f0"),A=a("1dde"),_=a("b622"),m=a("2d00"),C=_("isConcatSpreadable"),p=m>=51||!o((function(){var t=[];return t[C]=!1,t.concat()[0]!==t})),v=A("concat"),T=function(t){if(!n(t))return!1;var e=t[C];return void 0!==e?!!e:c(t)},f=!p||!v;s({target:"Array",proto:!0,arity:1,forced:f},{concat:function(t){var e,a,s,o,c,n=r(this),A=d(n,0),_=0;for(e=-1,s=arguments.length;e<s;e++)if(c=-1===e?n:arguments[e],T(c))for(o=i(c),l(_+o),a=0;a<o;a++,_++)a in c&&u(A,_,c[a]);else l(_+1),u(A,_++,c);return A.length=_,A}})},a016:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left",attrs:{id:"divImportContactDatakData"}},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 mt-3 float-left",attrs:{id:"divshowImportContactList"}},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"theme-primary partition  p-actions-expand"},[a("span",{staticClass:"p-name text-white"},[t._v(" "+t._s(t.$t("Import"))+" "+t._s("ImportContacts"==t.reqfrom?t.$t("Contacts"):t.$t("Accounts"))+" "+t._s(t.$t("Detail"))+" ")]),a("span",{staticClass:"p-actions float-right"},[a("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",title:t.$t("BacktoList")},on:{click:function(e){return t.cancel()}}},[a("em",{staticClass:"fa fa-angle-double-left pr-2"}),a("br"),t._v(t._s(t.$t("BacktoList")))])]),t._m(0)])]),a("Form",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.valid,o=e.errors;return[a("div",{staticClass:"listing mt-2"},[a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table table-bordered mt-0",attrs:{id:"tablecontactdata","aria-describedby":"contactimp"}},[a("thead",{staticClass:"thead-bg"},[a("tr",{staticClass:"text-capitalize"},t._l(t.Headers,(function(e,s){return a("th",{key:s,staticStyle:{"min-width":"240px"},attrs:{scope:"col"}},[a("span",{staticStyle:{display:"initial !important"}},[t._v(t._s(t.$t(e.DISPLAY_NAME)))]),e.IS_REQUIRED?a("span",{staticClass:"d-inline-block",class:{"text-danger":e.IS_REQUIRED}},[t._v("*")]):t._e()])})),0)]),a("tbody",t._l(t.ImportContactData,(function(e,s){return a("tr",{key:s},t._l(t.Headers,(function(o,c){return a("td",{key:c,staticClass:"text-center",staticStyle:{width:"100px"},style:["radio"==o.ACTUAL_DATA_TYPE?{"min-width":"220px !important"}:{"min-width":"100px"}]},["date"==o.ACTUAL_DATA_TYPE?a("div",{staticClass:"input-group table_datepickerfix"},[a("Field",{attrs:{name:t.GetFormSchemaFieldName(o.COLUMN_NAME,o.DISPLAY_NAME),rules:{required:o.IS_REQUIRED}},scopedSlots:t._u([{key:"default",fn:function(s){var c=s.errors,n=s.changed;return[a("v-date-picker",{staticClass:"input-group",attrs:{"minute-increment":5},on:{"update:modelValue":n},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.inputValue,o=e.inputEvents,n=e.togglePopover;return[a("input",t._g({class:{"form-control":!0,"is-invalid":c[0]},domProps:{value:s}},o)),a("div",{staticClass:"input-group-append",on:{click:function(t){return n()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:e[o.COLUMN_NAME],callback:function(a){t.$set(e,o.COLUMN_NAME,a)},expression:"item[key.COLUMN_NAME]"}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:o.COLUMN_NAME}},[t._v(t._s(c[0]))])]}}],null,!0)})],1):t._e(),"select"==o.ACTUAL_DATA_TYPE?a("Field",{attrs:{name:o.TABLE_COLUMN_NAME+s,rules:{required:o.IS_REQUIRED},label:t.GetFormSchemaFieldName(o.COLUMN_NAME,o.DISPLAY_NAME)},scopedSlots:t._u([{key:"default",fn:function(c){var n=c.touched,r=c.invalid;return["select"==o.ACTUAL_DATA_TYPE?a("select",{class:{"form-control":!0,"is-invalid":"select"==o.ACTUAL_DATA_TYPE&&n&&r},attrs:{id:o.TABLE_COLUMN_NAME+s},on:{change:function(e){return t.FillDropdown(o,s)}}},[a("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.MakeNormalArray(o.SELECT_OPTIONS),(function(s,c){return a("option",{key:c,domProps:{selected:e[o.COLUMN_NAME]==s.name,value:s.value}},[t._v(t._s(s.name))])}))],2):t._e(),"select"==o.ACTUAL_DATA_TYPE&&n&&r?a("span",{staticClass:"invalid-feedback",attrs:{name:o.TABLE_COLUMN_NAME+s}},[t._v(t._s(t.error[0]))]):t._e()]}}],null,!0),model:{value:e[o.COLUMN_NAME],callback:function(a){t.$set(e,o.COLUMN_NAME,a)},expression:"item[key.COLUMN_NAME]"}}):t._e(),"radio"==o.ACTUAL_DATA_TYPE?a("div",{staticClass:"form-control border-0 bg-transparent"},t._l(t.MakeArray(o.SELECT_OPTIONS,o.ACTUAL_DATA_TYPE),(function(c,n){return a("div",{key:n,staticClass:"form-check form-check-inline"},[a("div",{staticClass:"form-check form-check-inline custom-control mx-4 p-0 custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e[o.COLUMN_NAME],expression:"item[key.COLUMN_NAME]"}],staticClass:"dynamic form-check-input custom-control-input",attrs:{id:"rdo_"+s+"_"+c.value,name:o.COLUMN_NAME+s,"data-resource":c.name,type:"radio"},domProps:{value:c.value,checked:t._q(e[o.COLUMN_NAME],c.value)},on:{change:[function(a){return t.$set(e,o.COLUMN_NAME,c.value)},function(a){return t.showDependentItem(e,c.value,o.COLUMN_NAME,s)}]}}),a("label",{staticClass:"custom-control-label universalradio-custom-control-label dynamic",attrs:{for:"rdo_"+s+"_"+c.value}},[t._v(t._s(c.name))])])])})),0):t._e(),"Lookup"!=o.COLUMN_NAME&&"date"!=o.ACTUAL_DATA_TYPE&&"radio"!=o.ACTUAL_DATA_TYPE&&"select"!=o.ACTUAL_DATA_TYPE&&"textarea"!=o.ACTUAL_DATA_TYPE&&"checkbox"!=o.ACTUAL_DATA_TYPE?a("Field",{attrs:{name:o.COLUMN_NAME+"_"+s,rules:{required:o.IS_REQUIRED},label:t.GetFormSchemaFieldName(o.COLUMN_NAME,o.DISPLAY_NAME)},scopedSlots:t._u([{key:"default",fn:function(c){var n=c.errors,r=c.touched,i=c.invalid;return["Lookup"!=o.COLUMN_NAME&&"date"!=o.ACTUAL_DATA_TYPE&&"radio"!=o.ACTUAL_DATA_TYPE&&"select"!=o.ACTUAL_DATA_TYPE&&"textarea"!=o.ACTUAL_DATA_TYPE&&"checkbox"!=o.ACTUAL_DATA_TYPE?a("input",{directives:[{name:"model",rawName:"v-model",value:e[o.COLUMN_NAME],expression:"item[key.COLUMN_NAME]"}],class:{"form-control":!0,"is-invalid":"select"!=o.ACTUAL_DATA_TYPE&&r&&i},attrs:{type:"text",id:o.COLUMN_NAME+"_"+s,name:o.COLUMN_NAME+"_"+s},domProps:{value:e[o.COLUMN_NAME]},on:{input:function(a){a.target.composing||t.$set(e,o.COLUMN_NAME,a.target.value)}}}):t._e(),"select"!=o.ACTUAL_DATA_TYPE&&r&&i?a("span",{staticClass:"invalid-feedback",attrs:{name:o.COLUMN_NAME+"_"+s}},[t._v(t._s(n[0]))]):t._e()]}}],null,!0)}):t._e(),"checkbox"==o.ACTUAL_DATA_TYPE?a("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[a("div",{staticClass:"form-check form-check-inline"},t._l(t.MakeArray(o.SELECT_OPTIONS,o.ACTUAL_DATA_TYPE),(function(c,n){return a("div",{key:n,staticClass:"custom-control custom-checkbox"},[a("Field",{attrs:{name:"chk_"+s+"_"+c.value,rules:{required:o.IS_REQUIRED},label:t.GetFormSchemaFieldName(o.COLUMN_NAME,o.DISPLAY_NAME)}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e[o.COLUMN_NAME],expression:"item[key.COLUMN_NAME]"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+s+"_"+c.value,name:"chk_"+s+"_"+c.value,"data-resource-id":c.name,type:"checkbox","data-vv-as":t.GetFormSchemaFieldName(o.COLUMN_NAME,o.DISPLAY_NAME)},domProps:{value:c.value,checked:Array.isArray(e[o.COLUMN_NAME])?t._i(e[o.COLUMN_NAME],c.value)>-1:e[o.COLUMN_NAME]},on:{change:function(a){var s=e[o.COLUMN_NAME],n=a.target,r=!!n.checked;if(Array.isArray(s)){var i=c.value,l=t._i(s,i);n.checked?l<0&&t.$set(e,o.COLUMN_NAME,s.concat([i])):l>-1&&t.$set(e,o.COLUMN_NAME,s.slice(0,l).concat(s.slice(l+1)))}else t.$set(e,o.COLUMN_NAME,r)}}})]),a("label",{staticClass:"custom-control-label universal-custom-control-label pl-1 pr-3 dynamic",attrs:{for:"chk_"+s+"_"+c.value}},[t._v(t._s(c.name))])],1)})),0)]):t._e()],1)})),0)})),0)]),t.noRecord?a("div",{staticClass:"text-center text-danger no-record",staticStyle:{padding:"20px"}},[t._v(" "+t._s(t.$t("NoRecordfound")))]):t._e()])]),a("div",{staticClass:"col-lg-12 float-left px-0"},[a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right mt-2"},[a("a",{staticClass:"btn btn-success mr-2",class:{disabled:t.submited},attrs:{href:"javascript:;",title:t.$t("Save")},on:{click:function(e){return t.SubmitData(s,o)}}},[a("em",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("Save")))]),a("a",{staticClass:"btn btn-danger",attrs:{href:"javascript:;",title:t.$t("Cancel")},on:{click:t.cancel}},[a("em",{staticClass:"fa fa-close pr-2"}),t._v(t._s(t.$t("Cancel")))])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("small",[a("span",{staticClass:"text-danger"})])])])])])]}}])})],1)],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"collapse-head-btns"},[a("a",{staticClass:"collapse-btns",attrs:{href:"javascript:;"}},[a("em",{staticClass:"fa fa-angle-up text-white"})])])}],c=(a("498a"),a("99af"),a("b0c0"),a("d3b7"),a("159b"),a("e9c4"),a("9769")),n={data:function(){return{isLoading:!1,CompanyId:null,batchid:null,ImportContactData:null,Headers:null,options:null,noRecord:!1,submited:!1,selectedStates:[],reqfrom:null,submodule:null}},created:function(){this.CompanyId=this.GetUserInfo.CompanyId,this.batchid=this.$route.params.batchid,this.reqfrom=this.$route.params.reqfrom,this.submodule=this.$route.params.subModuleCode,this.FetchData()},methods:{FillDropdown:function(t,e,a,s){var o=this,n="",r="";"account_country"==t.TABLE_COLUMN_NAME?(r="STATE",$("#account_state"+e).empty(),$("#account_city"+e).empty(),$("#account_state"+e).append("<option value=''>Select</option>"),$("#account_city"+e).append("<option value=''>Select</option>")):"account_state"==t.TABLE_COLUMN_NAME&&(r="STATE_DISTRICT",$("#account_city"+e).empty(),$("#account_city"+e).append("<option value=''>Select</option>"));var i=t.TABLE_COLUMN_NAME;if(n=$("#"+t.TABLE_COLUMN_NAME+e+" option:selected").val(),""!=$.trim(a)&&(n=a),""!=n){var l="id=&moduleName=".concat(o.$route.params.moduleName,"&type=").concat(r,"&refId=").concat(n);c["a"].getDDLData(l).then((function(t){var a=[];if(null!=t.data&&(a=t.data.DATA),"account_country"==i){var c=o.selectedStates[e];$.each(a,(function(t,a){var o="";$.trim(c)==$.trim(a.name)&&(o="selected=true",s["account_state_lookup"]=a.value),$("#account_state"+e).append("<option value="+a.value+" "+o+">"+a.name+"</option>")}))}else"account_state"==i&&$.each(a,(function(t,a){$("#account_city"+e).append("<option value="+a.value+">"+a.name+"</option>")}));o.isLoading=!1}))}},cancel:function(){var t=this,e=t.submodule;"CRM_CONTACTS"==e?t.$router.push({name:"CRMImportContacts",params:{reqfrom:"ContactListing"}}):"CRM_Account"==e?t.$router.push({name:"CRMImportAccounts",params:{reqfrom:"Accounts"}}):t.$router.push({name:"CRMImportLeads",params:{reqfrom:"CRMLead"}})},showDependentItem:function(t,e,a,s){this.ImportContactData[s][a]=e},GetValidationLocal:function(t,e){var a={};return t.IS_REQUIRED&&(a["required"]=!0),"decimal"==t.ACTUAL_DATA_TYPE&&(a["decimal"]=2),t.length>0&&(a["max"]=t.length),"text"==t.ACTUAL_DATA_TYPE&&(a["regex"]="^[@@#.a-zA-Z0-9 ._-s]+$"),"date"==t.ACTUAL_DATA_TYPE&&(a["date"]=String(Globalize.culture().calendar.patterns.d).toUpperCase()),"int"!=t.ACTUAL_DATA_TYPE&&"bigint"!=t.ACTUAL_DATA_TYPE||(a["numeric"]=!0),"url"==t.ACTUAL_DATA_TYPE&&(a["url"]="require_protocol"),a},FetchData:function(){this.isLoading=!0;var t="batchid="+this.batchid,e=this;c["a"].Importlead(t).then((function(t){e.isLoading=!1,null!=t.data?(e.Headers=[],e.Headers=t.data.schema,t.data.data.length>0?(e.ImportContactData=[],e.ImportContactData=t.data.data,e.noRecord=!1):(e.noRecord=!0,e.ImportContactData=[])):(e.noRecord=!0,e.ImportContactData=[],e.Headers=[]),setTimeout((function(){e.ResponsiveDataTable("tablecontactdata");var t={};e.ImportContactData.forEach((function(a,s){e.Headers.forEach((function(e){"date"==e.ACTUAL_DATA_TYPE?t[e.COLUMN_NAME]=a[e.COLUMN_NAME]:"select"==e.ACTUAL_DATA_TYPE?t[e.TABLE_COLUMN_NAME+s]=a[e.COLUMN_NAME]:"Lookup"!=e.COLUMN_NAME&&"date"!=e.ACTUAL_DATA_TYPE&&"radio"!=e.ACTUAL_DATA_TYPE&&"select"!=e.ACTUAL_DATA_TYPE&&"textarea"!=e.ACTUAL_DATA_TYPE&&"checkbox"!=e.ACTUAL_DATA_TYPE?t[e.COLUMN_NAME+"_"+s]=a[e.COLUMN_NAME]:"checkbox"==e.ACTUAL_DATA_TYPE&&(t["chk_"+s+"_"+option.value]=a[e.COLUMN_NAME])}))})),console.log(t)}),500)}))},SubmitData:function(t,e){var a=this;this.$refs.form.validate().then((function(t){if(t){a.isLoading=!0;var e=a.ImportContactData,s={data:JSON.stringify(e),BatchId:a.batchid},o=JSON.stringify(s),n=a.submodule,r=a.reqfrom,i="";i="CRM_ACCOUNTS"==n&&"ImportAccounts"==r?"/SaveImportAccounts":"/SaveImportContact",c["a"].postImportAccountsOrContact(i,o).then((function(t){a.isLoading=!1,"Success"==t.data[0].Status?"CRM_ACCOUNTS"==n?("ImportContacts"==r?a.ShowAlert(a.$t("AddedSuccess",[a.$t("Contact")]),"success",!0,a.$t("Alert")):a.ShowAlert(a.$t("AddedSuccess",[a.$t("Account")]),"success",!0,a.$t("Alert")),a.$router.push({name:"CRMAccounts"})):(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Contact")]),"success",!0,a.$t("Alert")),a.$router.push({name:"ContactListing"})):a.ShowAlert(a.$t("AddedError",[a.$t("Contact")]),"warning",!0,a.$t("Alert"))}))}}))}}},r=n,i=a("2877"),l=Object(i["a"])(r,s,o,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=CRMContactImportDetails.js.map
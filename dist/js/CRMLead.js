(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CRMLead","CRM Invoice~CRMCampaign~CRMPurchaseOrder~CRMSalesOrderListing~CRMVendor~InwardList"],{"0d3b":function(e,t,a){var i=a("d039"),s=a("b622"),n=a("c430"),o=s("iterator");e.exports=!i((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,a="";return e.pathname="c%20d",t.forEach((function(e,i){t["delete"]("b"),a+=i+e})),n&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==a||"x"!==new URL("http://x",void 0).host}))},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"25ab":function(e,t,a){"use strict";a("a81f")},"25f0":function(e,t,a){"use strict";var i=a("5e77").PROPER,s=a("cb2d"),n=a("825a"),o=a("577e"),l=a("d039"),r=a("90d8"),d="toString",c=RegExp.prototype,u=c[d],m=l((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),p=i&&u.name!=d;(m||p)&&s(RegExp.prototype,d,(function(){var e=n(this),t=o(e.source),a=o(r(e));return"/"+t+"/"+a}),{unsafe:!0})},"3b1bd":function(e,t,a){"use strict";a("b6c5")},"3e9a":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"inline"}},[a("span",{domProps:{innerHTML:e._s(e.returnShortNoteString())}}),e.isShowReadMoreButtton()?a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.openFullDateModal()}}},[e._v("   "+e._s(e.$t("readmore"))+" ...")]):e._e(),e.isShowFullData?a("div",{staticClass:"modal d-block my-popups dialog"},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v(e._s(e.heading))]),a("button",{staticClass:"close",attrs:{type:"button",href:"javascript:;"},on:{click:function(t){e.isShowFullData=!1}}},[a("em",{staticClass:"fa fa-times"})])]),a("div",{staticClass:"modal-body crmnote-description"},["Notes"!=e.callFrom?a("div",{staticStyle:{"max-height":"500px","overflow-y":"auto"},domProps:{innerHTML:e._s(e.tempData)}}):e._e(),"Notes"==e.callFrom?a("ckeditor",{staticStyle:{height:"400px"},attrs:{id:"editor-a",editor:e.editor,config:e.editorConfig},on:{ready:e.onReady}}):e._e()],1)])])]):e._e()])},s=[],n=a("fb3d"),o=a.n(n),l={name:"crm-readmore",props:{data:{type:String,required:!0},heading:{type:String,required:!0},length:{type:String},callFrom:null},data:function(){return{isShowFullData:!1,tempData:"",editor:o.a}},methods:{onReady:function(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},openFullDateModal:function(){this.isShowFullData=!0},returnShortNoteString:function(){var e=document.implementation.createHTMLDocument().createElement("div");"Notes"==this.callFrom&&this.data.length,e.innerHTML=this.data;var t=e.innerText;return this.tempData=t,t.length<=this.length?this.data:t.substring(0,this.length)},isShowReadMoreButtton:function(){var e=document.implementation.createHTMLDocument().createElement("div");e.innerHTML=this.data;var t=e.innerText;return!(t.length<=this.length)}}},r=l,d=a("2877"),c=Object(d["a"])(r,i,s,!1,null,null,null);t["a"]=c.exports},"410d8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("loader",{attrs:{"is-visible":e.isLoading}}),a("TgList",{attrs:{IsShowAction:"true",ModuleName:"CRM",SubModuleCode:"CRM_LEADS",IdentityColumn:"lead_id",HeaderText:e.$t("Leads"),ListData:e.LeadData,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,IsSearchFieldsOnTop:!1,SearchFields:e.leftSearchFields,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchData,LegendArray:e.LegendArray,IsFilterApplied:!!e.searchCondition,SortExp:e.SortExp,SortBy:e.SortBy,CurrentPageNumber:e.PageNumber},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata,RefreshManageView:e.FetchData},scopedSlots:e._u([{key:"slotdata",fn:function(t){var i=t.data;return["status_id"==i.column.COLUMN_NAME?[1==e.isCRMShowStausDrop(i.row.status_id,"CRM_LEADS")?a("listing-status",{ref:"updatestatus",attrs:{isfor:"CRM_LEADS",dataid:i.row.lead_id,"data-controller":"Crm",statuslist:e.StatusListForListing,item:i,"data-action":"index",dataselected:i.row.status_id,callbackfunction:e.FetchData,isselectedvaluestring:!0}}):e._e(),0==e.isCRMShowStausDrop(i.row.status_id,"CRM_LEADS")?a("a",{staticClass:"inactive-disabled"},[a("span",{class:e.getStatusClass(i.row.status_id,"status_id")},[e._v(" "+e._s(i.row[i.column.COLUMN_NAME])+" ")])]):e._e()]:e._e()]}}])}),e.showQuickLeadViewModal?a("modalquickviewdetails",{attrs:{sourceIds:e.idForViewRecord,modulename:"CRM",submodulecode:"CRM_LEADS",controller:"crm",actions:"ViewLeadDetails"},on:{close:function(t){return e.closeQuickViewModal()}}}):e._e(),e.showNoteModal?a("modalnote",{attrs:{leadInfo:e.LeadIdForViewNote,modulename:"CRM",submodulecode:"CRM_LEADS",userid:e.userid,curindex:e.CurIndex},on:{close:function(t){e.showNoteModal=!1}}}):e._e(),e.showAddEventModal?a("modalfollowupslist",{attrs:{srcId:e.souceID,leadInfo:e.selectedItem,modulename:"CRM",submodulecode:"CRM_LEADS",userid:e.userid,baseurl:e.BaseUrlForManageView},on:{close:e.closeEventViewModal}}):e._e(),e.showAddEmailTemplate?a("modalemail",{attrs:{selectedids:e.modalItem,userid:e.userid,companyid:e.companyId,submodulecode:"CRM_LEADS"},on:{close:function(t){e.showAddEmailTemplate=!1}}},[a("h5",{staticClass:"modal-title",attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("SendEmail")))])]):e._e(),e.showConvertLead?a("modalconvertlead",{attrs:{leadId:e.convertLeadValue.value,moduleName:"CRM",subModuleCode:"CRM_LEADS",callFrom:"LeadListing"},on:{close:e.closeConvertLead}}):e._e(),e.ShowManageView?a("viewlayout",{directives:[{name:"show",rawName:"v-show",value:e.ShowManageView,expression:"ShowManageView"}],attrs:{submodulecode:"CRM_LEADS",modulename:"CRM",callbackfunction:e.FetchData,usertype:e.usertype},on:{close:function(t){e.ShowManageView=!1}}},[a("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("Search")))])]):e._e(),e.showAdditionalOwnerPopup?a("addadditionalowner",{attrs:{subModuleCode:"CRM_LEADS"},on:{close:function(t){e.showAdditionalOwnerPopup=!1,e.onChange()}}}):e._e(),e.showFilter?a("searchfilter",{attrs:{submodulecode:"CRM_LEADS",modulename:"CRM",callbackfunction:e.FetchData},on:{close:function(t){e.showFilter=!1},FilterData:e.FilterData}},[a("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("Search")))])]):e._e(),e.showLeadOwnerModal?a("modalleadowner",{attrs:{OwnerIds:e.OwnerIds,ModuleType:e.ModuleType},on:{close:e.onCloseLeadOwner}},[a("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("LeadOwner")))])]):e._e()],1)},s=[],n=a("53ca"),o=a("5530"),l=(a("d3b7"),a("159b"),a("c740"),a("e9c4"),a("4de4"),a("b0c0"),a("6e8d")),r=a("779d"),d=a("e29d"),c=a("b32d"),u=a("5c60"),m=a("9769"),p=[{title:"Page Tour",iconClass:"fa fa-road",callbackfunction:"setTourGuideSteps",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Reset",iconClass:"fa-filter text-danger",callbackfunction:"removeFilter",href:"",additionalClass:"",isdisabled:!1,isvisible:!1,checkPrivilege:!1},{title:"Filters",iconClass:"fa-filter",callbackfunction:"openFilterPopUp",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"ManageView",iconClass:"fa-list-alt",callbackfunction:"ManageView",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"AddLead",iconClass:"fa-plus",href:"/CRM/ManageLead/0/No/CRM/CRM_LEADS",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"addLead_a"},{title:"ExportToExcel",iconClass:"fa-file-excel-o",callbackfunction:"downloadExceldata",href:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"ImportLeads",iconClass:"fa-users",href:"/CRM/ImportLeads",isdisabled:!1,isvisible:!0},{id:"ChangeOwnerId",title:"ChangeLeadOwner",iconClass:"fa-user",callbackfunction:"ChangeLeadOwner",isdisabled:!0,isvisible:!0},{id:"AdditionalOwnerId",title:"AdditionalOwner",iconClass:"fa-user-plus",callbackfunction:"checkPrivilegeDetailsForOwner",isdisabled:!0,isvisible:!0},{id:"Sendbulkmail",title:"SendEmail",iconClass:"fa-envelope",callbackfunction:"sendBulkEmail",isdisabled:!0,isvisible:!0},{id:"CloseLeadId",title:"CloseLeads",iconClass:"fa-close",callbackfunction:"closeLead",isdisabled:!0,isvisible:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0}],v=[{fieldName:"Email",fieldType:"text",fieldIcon:"fa-envelope",fieldSearchConditionName:["LEAD.CLIENT_EMAIL"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Lead Name",fieldType:"text",fieldIcon:"fa-file",fieldSearchConditionName:["LEAD.CLIENT_FIRST_NAME","LEAD.CLIENT_LAST_NAME"],isSearch:!1,value:"",listOptions:[]},{fieldName:"LeadOwner",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["LEAD.LEAD_OWNER_ID"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["LEAD.STATUS_ID"],isSearch:!1,value:"",listOptions:[]}],f=[{title:"Quick View",callbackfunction:"openQuickLeadViewModal",href:"javascript:void(0)",icon:"fa fa-eye text-info action-icon",additionalSpan:""},{title:"View",href:"/CRM/ViewLeadDetails/{lead_id}/CRM/CRM_LEADS",icon:"fa fa-eye action-icon",additionalSpan:""},{title:"Edit",href:"/CRM/ManageLead/{lead_id}/Yes/CRM/CRM_LEADS",icon:"fa fa-pencil text-success action-icon",additionalSpan:""},{title:"Notes",callbackfunction:"openNoteListPopUp",href:"javascript:void(0)",icon:"fa fa-sticky-note-o text-primary action-icon",additionalSpan:'<span class="text-primary">{note_count}</span>'},{title:"Follow-Ups",callbackfunction:"openAddNewEvent",href:"javascript:void(0)",icon:"fa fa-flag text-muted action-icon",additionalSpan:""},{title:"Reopen",callbackfunction:"ReopenLead",href:"javascript:void(0)",icon:"fa fa-refresh text-danger action-icon",additionalSpan:""},{title:"Convert Lead",callbackfunction:"openConvertLeadModel",href:"javascript:void(0)",icon:"fa fa-retweet text-warning action-icon",additionalSpan:""}];function h(e,t,a){var i=e,s={};s["moduleName"]=t,s["type"]=a,m["a"].leadStatus(s).then((function(e){var t=e.data;if(null!=t){if("LEAD_DEAL_STATUS"==a)return i.leftSearchFields[3].listOptions=t.DATA,i.LeadStatusList=t.DATA,i.LeadStatusList;if("LEAD_OWNER_SEARCH"==a)return i.leftSearchFields[2].listOptions=t.DATA,i.LeadOwnerList=t.DATA,i.LeadOwnerList}}))}var _={buttons:p,leftsearchSchema:v,listActions:f,bindleftCommonSearchdropdown:h},C=a("fc0b"),g=a("a2a4"),b=a("2aeb"),w=a("555e"),y=a("cdd5"),D={components:{viewlayout:y["a"],addadditionalowner:g["a"],modalleadowner:w["a"],modalemail:c["a"],TgList:b["a"],modalconvertlead:u["a"],modalquickviewdetails:l["a"],modalnote:r["a"],modalfollowupslist:d["a"],searchfilter:C["a"]},data:function(){return{isLoading:!1,LeadData:[],clientemail:"",NameSearch:"",CompanyName:"",hdnOwnerId:"",Headers:[],souceID:0,showAddEventModal:!1,showLeadOwnerModal:!1,TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",PageSizeOption:null,CurrentPage:1,TotalPages:0,GroupStart:1,GroupEnd:3,Status:"",OwnerId:"",OwnerIds:[],ModuleType:"",SearchClient:"",leadDateFrom:"",leadDateTo:"",SearchCompay:"",Channel:"",showImportModal:!1,showConvertLead:!1,showAddEmailTemplate:!1,convertLeadValue:{value:null,name:""},modalItem:[],showExportModal:!1,showModal:!1,BaseUrlForManageView:"",noRecord:!1,showFilter:!1,searchCondition:"",showQuickLeadViewModal:!1,showNoteModal:!1,isShowLeadNoteDialogue:!1,idForViewRecord:null,NoRecordForTabNotes:!1,LeadIdForViewNote:null,LeadOwnerList:null,LeadStatusList:null,selectedLeadOwner:[],IsAnySearch:!1,CurIndex:0,ShowManageView:!1,conditionForInstantSearch:"",showAdditionalOwnerPopup:!1,listheaderbuttons:_.buttons,userid:null,usertype:null,companyId:null,leftSearchFields:_.leftsearchSchema,listActions:_.listActions,appliedFilter:[],StatusListForListing:[],LegendArray:[],privilegeParams:null}},created:function(){this.userid=this.GetUserInfo.ID,this.usertype=this.GetUserInfo.UserType,this.companyId=this.GetUserInfo.CompanyId,this.privilegeParams="controller=CRM&action=";var e=this;e.getStatuslistForListing("CRM","en"),_.bindleftCommonSearchdropdown(e,"CRM","LEAD_OWNER_SEARCH"),_.bindleftCommonSearchdropdown(e,"CRM","LEAD_DEAL_STATUS"),e.FetchData(),e.LegendArray=[{class:"legend-pending colorboxsquare",text:e.$t("CloseLeadLegend",["Lead"])}]},updated:function(){this.BindActionButtonEvent()},methods:{renderActions:function(e){var t=this,a=[];return t.listActions.forEach((function(i){var s=Object(o["a"])({},i);switch(s.title){case"Quick View":case"View":case"Notes":s.isVisible=!0;break;case"Edit":s.isVisible=(t.isBlank(e.existing_client_id)||t.isBlank(e.project_id))&&"Closed"!=e.status_id&&"Cancelled"!=e.status_id;break;case"Follow-Ups":s.isVisible="Closed"!=e.status_id;break;case"Reopen":s.isVisible="Closed"==e.status_id;break;case"Convert Lead":s.isVisible=(t.isBlank(e.existing_client_id)||t.isBlank(e.project_id))&&"Closed"!=e.status_id&&"Inactive"!=e.status_id&&"Draft"!=e.status_id&&"Cancelled"!=e.status_id;break;default:s.isVisible=!0}a.push(s)})),a},clickEventOfColumn:function(e,t){"client_first_name"==t.COLUMN_NAME&&this.$router.push({path:"/CRM/ViewLeadDetails/"+e.lead_id+"/CRM/CRM_LEADS"})},closeConvertLead:function(){this.showConvertLead=!1,this.FetchData()},columnDataFormatter:function(e,t){return e[t.COLUMN_NAME]},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"downloadExceldata":this.FetchData(!0);break;case"sendBulkEmail":this.SendBulkEmail();break;case"ManageView":this.ManageView();break;case"openFilterPopUp":this.openFilterPopUp();break;case"checkPrivilegeDetailsForOwner":this.checkPrivilegeDetailsForOwner(e,null);break;case"ChangeLeadOwner":this.ChangeLeadOwner();break;case"closeLead":this.closeLead();break;case"commonDeleteData":this.commonDeleteData();break;case"removeFilter":var t=this;this.searchCondition="";var a=t.listheaderbuttons.findIndex((function(e){return"removeFilter"===e.callbackfunction}));t.listheaderbuttons[a].isvisible=!1;var i=t.listheaderbuttons.findIndex((function(e){return"openFilterPopUp"===e.callbackfunction}));t.listheaderbuttons[i].iconClass="fa fa-filter";try{t.appliedFilter=[]}catch(s){}t.FetchData();break;case"setTourGuideSteps":this.setTourGuideSteps(0);break}},actionButtonClick:function(e,t,a,i){var s=this;switch(e){case"openQuickLeadViewModal":s.openQuickLeadViewModal(t.lead_id);break;case"checkPrivilegeView":break;case"checkPrivilegeDetails":break;case"openNoteListPopUp":s.openNoteListPopUp(t,a);break;case"openAddNewEvent":s.openAddNewEvent(t.lead_id,t);break;case"ReopenLead":s.confirmR(s.$t("AreYouSuretoReopenLead"),!0,s.$t("Close")+"  "+s.$t("Lead"),(function(e){var a={ids:t.lead_id},i=JSON.stringify(a);m["a"].reopenLead(i).then((function(e){"Success"==e.data[0].Status?"CONVERTED_TO_CONTRACT"!=e.data[0].Value&&"CONVERTED_TO_DEAL"!=e.data[0].Value?(s.FetchData(),s.ShowAlert(s.$t("LeadReopenedSuccessfully"),"success",s.$t("Alert"))):s.ShowAlert(s.$t("CantReopenDueToConverted"),"warning",s.$t("Alert")):s.ShowAlert(s.$t("ReopenLeadError"),"failure",s.$t("Alert"))}))}));break;case"openConvertLeadModel":m["a"].CheckPrivilege(s.privilegeParams+"ConvertLead").then((function(e){if(1==e.data){var a=(null!=t.client_first_name?t.client_first_name:"")+" "+(null!=t.client_last_name?t.client_last_name:"");s.openConvertLeadViewModel(t.lead_id,a)}else s.ShowAlert("You are not authorized","failure",!0,"Alert")}));break}},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchData()},leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchCondition:this.searchCondition="",this.FetchData()},openFilterPopUp:function(e){this.cancelOrRefresh(),this.showFilter=!0},cancelOrRefresh:function(){this.clientemail="",this.selectedLeadOwner="",this.NameSearch="",this.CompanyName="",this.hdnOwnerId="",this.conditionForInstantSearch="",this.IsAnySearch=!1,this.FetchData()},ManageView:function(){var e=this;this.ShowManageView=!0,$("#modalManageView").modal("show"),setTimeout((function(){$("#modalManageView").modal("show"),setTimeout((function(){e.SetBootstraptoolTip()}),200)}),1e3)},checkPrivilegeDetailsForOwner:function(e,t){var a=this;a.openAdditionalOwnerpopup()},sortdata:function(e){var t="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",t="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",t="sort tb_headerSortUp"):(this.SortExp="ASC",t="sort tb_headerSortDown")),this.FetchData(),$("#"+e+"  span:first-child").attr("class",t)},getRequestParams:function(e,t,a,i,s,n){var o={};return e&&(o["pageNum"]=e),n&&(o["searchcondition"]=n),s&&(o["isPaged"]=s),a&&(o["sortBy"]=a),i&&(o["sortExp"]=i),t&&(o["pageSize"]=t),o},FilterData:function(e,t,a,i,s,o){this.pageNum=e,this.pageSize=t,this.sortBy=a,this.sortExp=i,this.searchCondition=s,null!=Object(n["a"])(o)&&this.appliedFilter.push(o),this.FetchData()},FetchData:function(e){var t=this.getRequestParams(this.pageNum,this.pageSize,this.sortBy,this.sortExp,this.isPaged,this.searchCondition),a=this;a.isLoading=!0,t.pageSize=a.PageSize,t.pageNum=a.PageNumber,t.searchCondition=a.searchCondition,a.PageNumber?t.pageNum=a.PageNumber:a.PageNumber=t.pageNum=1,"undefined"!=typeof a.isPaged?t.isPaged=a.isPaged:a.isPaged=t.isPaged=1,t.isPaged=a.isPaged,t.sortBy=a.SortBy,t.sortExp=a.SortExp;var i="";if(this.isBlank(this.searchCondition)||(i+=this.searchCondition),this.isBlank(this.conditionForInstantSearch)||(i+=this.isBlank(this.searchCondition)?this.conditionForInstantSearch:" AND "+this.conditionForInstantSearch),""!=i){if(t.searchCondition=i,a.appliedFilter.length>0){var s=a.listheaderbuttons.findIndex((function(e){return"removeFilter"===e.callbackfunction}));a.listheaderbuttons[s].isvisible=!0;var n=a.listheaderbuttons.findIndex((function(e){return"openFilterPopUp"===e.callbackfunction}));a.listheaderbuttons[n].iconClass="fa fa-filter text-success"}}else if(0==a.appliedFilter.length){var o=a.listheaderbuttons.findIndex((function(e){return"removeFilter"===e.callbackfunction}));a.listheaderbuttons[o].isvisible=!1;var l=a.listheaderbuttons.findIndex((function(e){return"openFilterPopUp"===e.callbackfunction}));a.listheaderbuttons[l].iconClass="fa fa-filter"}e?(t.isPaged=0,m["a"].leadListing(t).then((function(e){a.isLoading=!1,""!=e.data&&null!=e.data?a.JSONToCSVConvertor(e.data,"Lead-Detail",!0):a.ModelnoRecord=!0}))):m["a"].leadListing(t).then((function(e){""!=e.data&&null!=e.data?(a.Headers=e.data.schema,a.Headers.forEach((function(e){e.settings=null,"client_first_name"==e.COLUMN_NAME&&(e.settings={clickEvent:a.clickEventOfColumn,formatter:a.columnDataFormatter}),"status_id"==e.COLUMN_NAME&&(e.settings={isInSlot:!0})})),e.data.data.length>0?(a.LeadData=e.data.data,a.LeadData.forEach((function(e){e.isCheckBoxDisabled=!1,e.additionalClass="","Closed"==e.status_id&&(e.additionalClass="warning-bar"),"Closed"!=e.status_id&&"NO"==e.is_additional_lead_owner||(e.isCheckBoxDisabled=!0),e.rowDetailsUrl="",""==e.rowDetailsUrl&&(e.rowDetailsUrl="/CRM/ViewLeadDetails/"+e.lead_id+"/CRM/CRM_LEADS")})),a.TotalRecords=e.data.data[0].total_records,a.TotalPages=Math.ceil(a.TotalRecords/a.PageSize),a.CurrentPage=a.PageNumber,a.noRecord=!1):(a.noRecord=!0,a.LeadData=[],a.TotalRecords=0)):(a.noRecord=!0,a.LeadData=[],a.Headers=[],a.TotalRecords=0),setTimeout((function(){a.ResponsiveDataTable("tablelistingdata")}),500),a.isLoading=!1}))},openNoteListPopUp:function(e,t){var a=this;if(null!=e&&"NO"!=e.is_additional_lead_owner&&""!=e.is_additional_lead_owner){var i=JSON.parse(e.is_additional_lead_owner),s=i.filter((function(e){return"ViewNotes"==e.permission_code}));s.length>0?(a.LeadIdForViewNote=e,a.showNoteModal=!0):ShowAlert(a.$t("additionalOwnerAuthorityWarning"),"warning",!0,a.$t("Alert"))}else a.LeadIdForViewNote=e,a.showNoteModal=!0,a.CurIndex=t},openConvertLeadViewModel:function(e,t){var a=this;a.confirmR(a.$t("AreyousuretoConvertLead"),!0,null,(function(){a.convertLeadValue.value=e,a.convertLeadValue.name=t,a.showConvertLead=1!=a.showConvertLead}))},openQuickLeadViewModal:function(e){this.idForViewRecord=e,this.showQuickLeadViewModal=!0},openAddNewEvent:function(e,t){var a=this;m["a"].CheckPrivilege(a.privilegeParams+"FollowUpCRM").then((function(i){if(1==i.data)if(null!=t&&"NO"!=t.is_additional_lead_owner){var s=JSON.parse(t.is_additional_lead_owner),n=s.filter((function(e){return"ViewAcitvities"==e.permission_code}));n.length>0?(a.souceID=e,a.selectedItem=t,setTimeout((function(){a.showAddEventModal=1!=a.showAddEventModal}),500)):a.ShowAlert(this.$t("additionalOwnerAuthorityWarning"),"warning",!0,this.$t("Alert"))}else a.souceID=e,a.selectedItem=t,setTimeout((function(){a.showAddEventModal=1!=a.showAddEventModal}),300);else a.ShowAlert("You are not authorized","failure",!0,"Alert")}))},closeQuickViewModal:function(){this.idForViewRecord=null,this.showQuickLeadViewModal=!1},closeEventViewModal:function(){this.showAddEventModal=!1},getStatuslistForListing:function(e,t){var a=this,i="langCode="+t+"&statusType="+e+"&hasglobal=true";m["a"].statusdropdown(i).then((function(e){if("Success"==e.data.status){var t=e.data.result;a.StatusListForListing=t.data}}))},openAdditionalOwnerpopup:function(){this.showAdditionalOwnerPopup=!0},ChangeLeadOwner:function(e){var t=this;m["a"].CheckPrivilege(t.privilegeParams+"ChangeLeadOwner").then((function(e){1==e.data?($(".chkItems:checkbox:checked").not("[id^='chkAll']").not(".CloseLeadInput").each((function(){t.OwnerIds.push($(this).val()),t.ModuleType="Lead"})),t.OwnerIds.length>0?t.showLeadOwnerModal=1!=t.showLeadOwnerModal:alert(t.$t("Selectchangeleadowner"))):vm.ShowAlert("You are not authorized","failure",!0,"Alert")}))},SendBulkEmail:function(e){var t=this;m["a"].CheckPrivilege(this.privilegeParams+"SendBulkEmail").then((function(e){if(1==e.data){var a="",i="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").not(".CloseLeadInput").each((function(){i.length>0&&(i+=","),i+=$(this).val(),a=i})),a.length>0&&(t.modalItem=a,t.showAddEmailTemplate=!0)}else t.ShowAlert("You are not authorized","failure",!0,"Alert")}))},closeLead:function(e){var t=this,a="";m["a"].CheckPrivilege(t.privilegeParams+"CloseLeads").then((function(e){1==e.data?($(".chkItems:checkbox:checked").not("[id^='chkAll']").not(".CloseLeadInput").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?t.confirmR(t.$t("AreyousuretoCloseTheseLeads"),!0,t.$t("Close")+"  "+t.$t("Lead"),(function(){var e={ids:a},i=JSON.stringify(e);m["a"].CloseLead(i).then((function(e){"Success"==e.data[0].Status?($("[id^='ChangeOwnerId']").removeClass("enable").addClass("disabled"),$("[id^='AdditionalOwnerId']").removeClass("enable").addClass("disabled"),$("[id^='Sendbulkmail']").removeClass("enable").addClass("disabled"),$("[id^='CloseLeadId']").removeClass("enable").addClass("disabled"),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$("[id^='DeleteMultiple']").removeClass("enable").addClass("disabled"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),t.FetchData(),t.ShowAlert(t.$t("LeadClosedSuccessfully",[t.$t("Lead")]),"success",!0,t.$t("Alert"))):t.ShowAlert(t.$t("CloseLeadError"),"warning",!0,t.$t("Alert"))}))})):alert(t.$t("PleaseSelectAnyRecordsForFurtherAction"))):t.ShowAlert("You are not authorized","failure",!0,"Alert")}))},commonDeleteData:function(){var e=this;m["a"].CheckPrivilege(e.privilegeParams+"Delete").then((function(t){if(1==t.data){var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Lead"),(function(){var t={ids:a,moduleName:"CRM",subModuleCode:"CRM_LEADS"},i=JSON.stringify(t);m["a"].deleteActivityData(i).then((function(t){var a="";"Success"==t.data[0].Status?($("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("[id^='ChangeOwnerId']").removeClass("enable").addClass("disabled"),$("[id^='AdditionalOwnerId']").removeClass("enable").addClass("disabled"),$("[id^='CloseLeadId']").removeClass("enable").addClass("disabled"),$("[id^='DeleteMultiple']").removeClass("enable").addClass("disabled"),a=e.ShowAlert(e.$t("DeletedSuccess",[e.$t("Lead")]),"Success",!0,e.$t("Alert")),e.PageNumber=parseInt(e.PageNumber)-1,e.PageNumber<0&&(e.PageNumber=1),e.FetchData()):a=e.ShowAlert(e.$t("DeletedError",[e.$t("Lead")]),"failure",!0,e.$t("Alert")),setTimeout((function(){a.modal("hide")}),2e3)}))})):alert(e.$t("Selectanyrecordtodelete"))}}))},onChange:function(){var e=$(".chkItems:checked").not("[id^='chkAll']").length;e>0?($("#ChangeOwnerId").removeClass("disabled"),$("#AdditionalOwnerId").removeClass("disabled")):($("#ChangeOwnerId").addClass("disabled"),$("#AdditionalOwnerId").addClass("disabled"))},onCloseLeadOwner:function(){this.showLeadOwnerModal=!1,this.Headers=[],this.LeadData=[],$(".action-list-box-ddl").hide("slow"),this.FetchData()}}},S=D,A=a("2877"),L=Object(A["a"])(S,i,s,!1,null,null,null);t["default"]=L.exports},5352:function(e,t,a){"use strict";a("e260");var i=a("23e7"),s=a("da84"),n=a("c65b"),o=a("e330"),l=a("83ab"),r=a("0d3b"),d=a("cb2d"),c=a("6964"),u=a("d44e"),m=a("9ed3"),p=a("69f3"),v=a("19aa"),f=a("1626"),h=a("1a2d"),_=a("0366"),C=a("f5df"),g=a("825a"),b=a("861d"),w=a("577e"),y=a("7c73"),D=a("5c6c"),S=a("9a1f"),A=a("35a1"),L=a("d6d6"),k=a("b622"),$=a("addb"),N=k("iterator"),x="URLSearchParams",I=x+"Iterator",T=p.set,O=p.getterFor(x),E=p.getterFor(I),M=Object.getOwnPropertyDescriptor,F=function(e){if(!l)return s[e];var t=M(s,e);return t&&t.value},R=F("fetch"),P=F("Request"),V=F("Headers"),j=P&&P.prototype,U=V&&V.prototype,q=s.RegExp,B=s.TypeError,H=s.decodeURIComponent,G=s.encodeURIComponent,J=o("".charAt),z=o([].join),Y=o([].push),Q=o("".replace),W=o([].shift),Z=o([].splice),K=o("".split),X=o("".slice),ee=/\+/g,te=Array(4),ae=function(e){return te[e-1]||(te[e-1]=q("((?:%[\\da-f]{2}){"+e+"})","gi"))},ie=function(e){try{return H(e)}catch(t){return e}},se=function(e){var t=Q(e,ee," "),a=4;try{return H(t)}catch(i){while(a)t=Q(t,ae(a--),ie);return t}},ne=/[!'()~]|%20/g,oe={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},le=function(e){return oe[e]},re=function(e){return Q(G(e),ne,le)},de=m((function(e,t){T(this,{type:I,iterator:S(O(e).entries),kind:t})}),"Iterator",(function(){var e=E(this),t=e.kind,a=e.iterator.next(),i=a.value;return a.done||(a.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),a}),!0),ce=function(e){this.entries=[],this.url=null,void 0!==e&&(b(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===J(e,0)?X(e,1):e:w(e)))};ce.prototype={type:x,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,a,i,s,o,l,r,d=A(e);if(d){t=S(e,d),a=t.next;while(!(i=n(a,t)).done){if(s=S(g(i.value)),o=s.next,(l=n(o,s)).done||(r=n(o,s)).done||!n(o,s).done)throw B("Expected sequence with length 2");Y(this.entries,{key:w(l.value),value:w(r.value)})}}else for(var c in e)h(e,c)&&Y(this.entries,{key:c,value:w(e[c])})},parseQuery:function(e){if(e){var t,a,i=K(e,"&"),s=0;while(s<i.length)t=i[s++],t.length&&(a=K(t,"="),Y(this.entries,{key:se(W(a)),value:se(z(a,"="))}))}},serialize:function(){var e,t=this.entries,a=[],i=0;while(i<t.length)e=t[i++],Y(a,re(e.key)+"="+re(e.value));return z(a,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ue=function(){v(this,me);var e=arguments.length>0?arguments[0]:void 0;T(this,new ce(e))},me=ue.prototype;if(c(me,{append:function(e,t){L(arguments.length,2);var a=O(this);Y(a.entries,{key:w(e),value:w(t)}),a.updateURL()},delete:function(e){L(arguments.length,1);var t=O(this),a=t.entries,i=w(e),s=0;while(s<a.length)a[s].key===i?Z(a,s,1):s++;t.updateURL()},get:function(e){L(arguments.length,1);for(var t=O(this).entries,a=w(e),i=0;i<t.length;i++)if(t[i].key===a)return t[i].value;return null},getAll:function(e){L(arguments.length,1);for(var t=O(this).entries,a=w(e),i=[],s=0;s<t.length;s++)t[s].key===a&&Y(i,t[s].value);return i},has:function(e){L(arguments.length,1);var t=O(this).entries,a=w(e),i=0;while(i<t.length)if(t[i++].key===a)return!0;return!1},set:function(e,t){L(arguments.length,1);for(var a,i=O(this),s=i.entries,n=!1,o=w(e),l=w(t),r=0;r<s.length;r++)a=s[r],a.key===o&&(n?Z(s,r--,1):(n=!0,a.value=l));n||Y(s,{key:o,value:l}),i.updateURL()},sort:function(){var e=O(this);$(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){var t,a=O(this).entries,i=_(e,arguments.length>1?arguments[1]:void 0),s=0;while(s<a.length)t=a[s++],i(t.value,t.key,this)},keys:function(){return new de(this,"keys")},values:function(){return new de(this,"values")},entries:function(){return new de(this,"entries")}},{enumerable:!0}),d(me,N,me.entries,{name:"entries"}),d(me,"toString",(function(){return O(this).serialize()}),{enumerable:!0}),u(ue,x),i({global:!0,constructor:!0,forced:!r},{URLSearchParams:ue}),!r&&f(V)){var pe=o(U.has),ve=o(U.set),fe=function(e){if(b(e)){var t,a=e.body;if(C(a)===x)return t=e.headers?new V(e.headers):new V,pe(t,"content-type")||ve(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),y(e,{body:D(0,w(a)),headers:D(0,t)})}return e};if(f(R)&&i({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return R(e,arguments.length>1?fe(arguments[1]):{})}}),f(P)){var he=function(e){return v(this,j),new P(e,arguments.length>1?fe(arguments[1]):{})};j.constructor=he,he.prototype=j,i({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:he})}}e.exports={URLSearchParams:ue,getState:O}},5530:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("b64b"),a("a4d3"),a("4de4"),a("d3b7"),a("e439"),a("159b"),a("dbb4");var i=a("ade3");function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},"555e":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("LeadOwner"))+" ")]),a("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("Form",{ref:"form"},[a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("SelectLeadOwner"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{id:"ddl_changeOwner",rules:{required:!0},label:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:e.leadid,expression:"leadid"}],class:{"form-control":!0,"is-invalid":i[0]},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.leadid=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select"))+" "+e._s(e.$t("OWNER")))]),e._l(e.LeadownerArray,(function(t,i){return a("option",{key:i,domProps:{value:t.value}},[e._v(" "+e._s(t.name)+" ")])}))],2)]}}])})],1)])]),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("button",{staticClass:"btn btn-primary save-btn mr-1",attrs:{type:"button"},on:{click:e.submitChangeOwner}},[a("em",{staticClass:"fa fa-save pr-2",attrs:{"aria-hidden":"true"}}),e._v(e._s(e.$t("Save")))]),a("button",{staticClass:"btn btn-primary delete-btn",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Cancel")))])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"})])])])])])],1)])])])])])},s=[],n=(a("d3b7"),a("25f0"),a("e9c4"),a("9769")),o={props:{OwnerIds:null,ModuleType:""},data:function(){return{leadid:"",LeadownerArray:[],SubModuleCode:"CRM_LEADS"}},created:function(){this.GetLeadOwnerlist(),"Deal"==this.ModuleType&&(this.SubModuleCode="CRM_DEALS")},methods:{GetLeadOwnerlist:function(){var e=this,t="id=&moduleName=CRM&type=CRM_USERS";n["a"].getDDLData(t).then((function(t){var a=t.data;if(null!=a)return e.LeadownerArray=a.DATA,e.LeadownerArray}))},submitChangeOwner:function(){var e=this;console.log(e.$parent),e.$refs.form.validate().then((function(t){if(t)if("Campaign"==e.ModuleType){var a={leadOwner_id:e.leadid,campaign_id:e.$route.params.id,ModuleName:e.$route.params.moduleName,subModule_Code:e.$route.params.subModuleCode,contact_id:e.OwnerIds.toString()},i=JSON.stringify(a);n["a"].ConvertToLeadCampaign(i).then((function(t){"Success"==t.data[0].Status?($("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),e.ShowAlert("Contact has been converted into lead successfully","success",!0,e.$t("Alert")),e.$emit("close")):e.ShowAlert("Something went wrong. Please retry!")}))}else{var s={sourceId:e.activitySourceID,moduleName:"CRM",subModuleCode:e.SubModuleCode,newleadID:e.leadid,checkedIds:e.OwnerIds,ModuleType:e.ModuleType},o=JSON.stringify(s);n["a"].ChangeOwner(o).then((function(t){"Success"==t.data[0].Status&&(e.ShowAlert(e.$t("LeadOwnerChanged",["Deal"==e.ModuleType?e.$t("DealOwner"):e.$t("LeadOwner")]),"success",!0,e.$t("Alert")),e.$emit("close"))}))}}))}}},l=o,r=a("2877"),d=Object(r["a"])(l,i,s,!1,null,null,null);t["a"]=d.exports},"5b81":function(e,t,a){"use strict";var i=a("23e7"),s=a("c65b"),n=a("e330"),o=a("1d80"),l=a("1626"),r=a("44e7"),d=a("577e"),c=a("dc4a"),u=a("90d8"),m=a("0cb2"),p=a("b622"),v=a("c430"),f=p("replace"),h=TypeError,_=n("".indexOf),C=n("".replace),g=n("".slice),b=Math.max,w=function(e,t,a){return a>e.length?-1:""===t?a:_(e,t,a)};i({target:"String",proto:!0},{replaceAll:function(e,t){var a,i,n,p,y,D,S,A,L,k=o(this),$=0,N=0,x="";if(null!=e){if(a=r(e),a&&(i=d(o(u(e))),!~_(i,"g")))throw h("`.replaceAll` does not allow non-global regexes");if(n=c(e,f),n)return s(n,e,k,t);if(v&&a)return C(d(k),e,t)}p=d(k),y=d(e),D=l(t),D||(t=d(t)),S=y.length,A=b(1,S),$=w(p,y,0);while(-1!==$)L=D?d(t(y,$,p)):m(y,p,$,[],void 0,t),x+=g(p,N,$)+L,N=$+S,$=w(p,y,$+A);return N<p.length&&(x+=g(p,N)),x}})},"5c60":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal d-block my-popups dialog"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[e._t("headerForModal",(function(){return[a("h5",{staticClass:"modal-title"},[e._v(e._s(e.popupHeader))])]})),a("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(t){e.$emit("close"),e.closePopup()}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),a("div",{staticClass:"modal-body"},[a("Form",{ref:"ConvertLeadIntoDeal",attrs:{tag:"form"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.valid,s=t.errors;return[e.afterConvertToAccount||e.isConvertLeadToOthers?e._e():a("div",{class:{fade:e.isConvertLeadToOthers},attrs:{id:"divConvertLeadIntoAccount"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card-body p-0"},e._l(e.LeftViewData,(function(t,i){return a("div",{key:i,staticClass:"panel1"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5 mb-2"},[a("span",[e._v(e._s(e.$t(t.group_name,"")))])])]),a("div",{staticClass:"row"},[e._l(t.LeftViewData,(function(t,i){return a("div",{key:i,staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",[a("strong",[e._v(e._s(e.$t(t.name,t.display_name))+":")]),"date"==t.dt_code||"datetime"==t.dt_code?a("span",{staticClass:"answer rightlabeltext ml-1"},[e._v(e._s(e.$options.filters.formatDate(t.value)))]):e._e(),"decimal"==t.dt_code?a("span",{staticClass:"answer rightlabeltext ml-1"},[e._v(e._s(e.isBlank(t.value)?"0.00":e.$options.filters.currency(t.value)))]):e._e(),"date"!=t.dt_code&&"datetime"!=t.dt_code&&"decimal"!=t.dt_code&&"Lookup"!=t.picklist_options?a("span",{staticClass:"answer rightlabeltext ml-1"},[e._v(e._s(e.isBlank(t.value)?"--":t.value))]):e._e(),"date"!=t.dt_code&&"datetime"!=t.dt_code&&"decimal"!=t.dt_code&&"Lookup"==t.picklist_options?a("span",{staticClass:"answer rightlabeltext ml-1"},[e._v(e._s(e.isBlank(t.value)?"--":e.FilterDDLandNormalValue(t.value)))]):e._e()])])])})),a("div",{staticClass:"col-md-6"},[a("label",[a("strong",[e._v("Company Name:")]),a("span",{staticClass:"answer rightlabeltext",domProps:{innerHTML:e._s(e.LeadCompany)}})])])],2)])})),0)])]),a("div",{staticClass:"heading-border mt-2"},[a("h5",{staticClass:"h5"},[a("span",[e._v("New Account")])])]),a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"form-group row mt-2"},[a("div",{staticClass:"col-md-6"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.IsActiveAccount,expression:"IsActiveAccount"}],attrs:{type:"radio",disabled:"InProgress"==e.LeadStatus,name:"Account",value:"1"},domProps:{checked:e._q(e.IsActiveAccount,"1")},on:{click:function(t){return e.ChangeAccount(e.IsActiveAccount)},change:function(t){e.IsActiveAccount="1"}}}),e._v(" Create New:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.NewAccName,expression:"NewAccName"}],staticClass:"form-control",attrs:{type:"text",readonly:2==e.IsActiveAccount,name:e.NewAccName},domProps:{value:e.NewAccName},on:{input:function(t){t.target.composing||(e.NewAccName=t.target.value)}}})]),a("div",{staticClass:"col-md-6"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.IsActiveAccount,expression:"IsActiveAccount"}],attrs:{type:"radio",name:"Account",value:"2"},domProps:{checked:e._q(e.IsActiveAccount,"2")},on:{click:function(t){return e.ChangeAccount(e.IsActiveAccount)},change:function(t){e.IsActiveAccount="2"}}}),e._v(" Select Account:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.OldAccountId,expression:"OldAccountId"}],staticClass:"form-control",attrs:{readonly:1==e.IsActiveAccount},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.OldAccountId=t.target.multiple?a:a[0]},function(t){return e.getName(e.ACCountDDL,e.OldAccountId)}]}},e._l(e.ACCountDDL,(function(t,i){return a("option",{key:i,domProps:{value:t.value}},[e._v(" "+e._s(t.name))])})),0)])])])]),e.afterConvertToAccount?a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 mt-2 p-0"},[""!=e.successMessage&&e.isContactForExistsAccount?a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2"},[a("div",{staticClass:"alert alert-success alert-dismissible mt-1"},[a("a",{staticClass:"close",attrs:{href:"javascript:;","data-dismiss":"alert","aria-label":"close"}},[e._v("×")]),e._v(" "+e._s(e.successMessage)+" ")])]):e._e(),e.isContactForExistsAccount?e._e():a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2"},[a("div",{staticClass:"alert alert-danger alert-dismissible mt-1"},[a("a",{staticClass:"close",attrs:{href:"javascript:;","data-dismiss":"alert","aria-label":"close"}},[e._v("×")]),e._v(" "+e._s(e.successMessage)+" ")])]),e.isContactForExistsAccount?a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2 text-center"},[e.isConvertLeadToOthers?e._e():a("a",{staticClass:"btn btn-success",attrs:{href:"javascript:;"},on:{click:function(t){e.popupHeader="@Resources.AddContract",e.FetchData(e.createdAccountID,"CONTRACT")}}},[a("em",{staticClass:"fa fa-plus"}),e._v(e._s(e.$t("AddContract")))]),e.isConvertLeadToOthers?e._e():a("a",{staticClass:"btn btn-success",attrs:{href:"javascript:;"},on:{click:function(t){e.popupHeader="@Resources.Add @Resources.Deal",e.FetchData(e.createdAccountID,"DEAL")}}},[a("em",{staticClass:"fa fa-plus"}),e._v(e._s(e.$t("Add"))+" "+e._s(e.$t("Deal")))])]):e._e()]):e._e(),e.isConvertLeadToOthers?a("div",{attrs:{id:"divConvertLeadIntoDealAfterAccount"}},[a("div",{staticClass:"d-flex flex-wrap",attrs:{id:"divMainDealData"}},[e._l(e.GroupBy,(function(t,i){return a("div",{key:i,staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2 validationfixer p-0"},[a("div",{staticClass:"passpolicy-detailshead mb-3"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",[e._v(e._s(e.$t(t.group_name,t.group_display_name)))])])])]),a("div",{staticClass:"d-flex flex-wrap row"},e._l(t.dealData,(function(t,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.dependent_show_type,expression:"item.dependent_show_type == 1"}],key:s,class:{"col-sm-12 col-md-12 float-left":!0,"d-none":"NO"==t.form_field_visibility||"contact_name"==t.name||"mobile_phone"==t.name||"home_phone"==t.name||"business_phone"==t.name||"lead_source_id"==t.name||"referred_by"==t.name,"col-lg-12 col-xl-12":"single"==t.layout_type,"col-lg-6 col-xl-6":"double"==t.layout_type,"col-lg-4 col-xl-4":"triple"==t.layout_type,"col-lg-3 col-xl-3":"four"==t.layout_type}},["NO"==t.form_field_visibility?a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],attrs:{type:"hidden",id:t.name},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}}):e._e(),"YES"==t.form_field_visibility?a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t(t.label,t.display_name))+": "),t.is_required?a("span",{class:{"text-danger":t.is_required}},[e._v("*")]):e._e()]),"date"==t.dt_code?a("div",{staticClass:"input-group"},[a("Field",{staticClass:"w-100",attrs:{name:t.name,rules:{required:t.is_required},label:e.GetFormSchemaFieldName(t.name,t.display_name)},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.errors,n=i.changed;return["date"==t.dt_code?a("v-date-picker",{staticClass:"input-group",attrs:{"minute-increment":5,"min-date":"contract_end_date"==t.name?e.DependentOption[0].minDate:"billing_end_date"==t.name?e.DependentOption[1].minDate:e.getMinDate(),name:t.name},on:{dayclick:function(a){return e.DependentDateObject(t,t.value)},"update:modelValue":n},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.inputValue,n=t.inputEvents,o=t.togglePopover;return[a("input",e._g({class:{"form-control":!0,"is-invalid":s[0]},domProps:{value:i}},n)),a("div",{staticClass:"input-group-append",on:{click:function(e){return o()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}):e._e(),"date"==t.dt_code&&s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.name}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)})],1):e._e(),"Lookup"!=t.picklist_options&&"date"!=t.dt_code&&"radio"!=t.dt_code&&"select"!=t.dt_code&&"textarea"!=t.dt_code&&"checkbox"!=t.dt_code?a("Field",{staticClass:"w-100",attrs:{name:t.name,rules:e.GetValidation(t),label:e.GetFormSchemaFieldName(t.name,t.display_name)},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"!=t.picklist_options&&s[0]},attrs:{type:"text",id:t.name,name:t.name,placeholder:e.GetFieldPlaceHolder(t.label,t.display_name,t.dt_code)},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}}),"Lookup"!=t.picklist_options&&"date"!=t.dt_code&&"radio"!=t.dt_code&&"select"!=t.dt_code&&"textarea"!=t.dt_code&&"checkbox"!=t.dt_code&&s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.name}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)}):e._e(),"textarea"==t.dt_code?a("Field",{staticClass:"w-100",attrs:{name:t.name,rules:{required:t.is_required},label:e.GetFormSchemaFieldName(t.name,t.display_name)},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.errors;return[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"textarea"==t.dt_code&&s[0]},attrs:{id:t.name,name:t.name,placeholder:e.GetFieldPlaceHolder(t.label,t.display_name,t.dt_code)},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}}),"textarea"==t.dt_code&&s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.name}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)}):e._e(),"radio"==t.dt_code?a("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[a("div",{staticClass:"form-check form-check-inline"},e._l(e.MakeArray(t.picklist_options,t.dt_code),(function(s,n){return a("div",{key:n,staticClass:"form-check form-check-inline custom-control mx-2 p-0 custom-radio"},[a("Field",{staticClass:"w-100",attrs:{name:t.name,rules:{required:t.is_required},label:e.GetFormSchemaFieldName(t.name,t.display_name)},scopedSlots:e._u([{key:"default",fn:function(n){var o=n.errors,l=n.touched,r=n.invalid;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],staticClass:"dynamic form-check-input custom-control-input",attrs:{id:"rdo_"+t.custom_field_id+"_"+s.value,name:t.name,"data-resource":s.name,type:"radio"},domProps:{value:s.value,checked:s.value==t.value,checked:e._q(t.value,s.value)},on:{change:[function(a){return e.$set(t,"value",s.value)},function(a){return e.showDependentItem(t,s.value,i,e.index)}]}}),a("label",{staticClass:"custom-control-label universalradio-custom-control-label pl-2 pt-1 dynamic",attrs:{for:"rdo_"+t.custom_field_id+"_"+s.value}},[e._v(e._s(s.name))]),"radio"==t.dt_code&&l&&r?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.name}},[e._v(e._s(o[0]))]):e._e()]}}],null,!0)})],1)})),0)]):e._e(),"checkbox"==t.dt_code?a("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[a("div",{staticClass:"form-check form-check-inline"},e._l(e.MakeArray(t.picklist_options,t.dt_code),(function(i,s){return a("div",{key:s,staticClass:"custom-control custom-checkbox"},[a("Field",{staticClass:"w-100",attrs:{name:t.name,rules:{required:t.is_required},label:e.GetFormSchemaFieldName(t.name,t.display_name)},scopedSlots:e._u([{key:"default",fn:function(s){var n=s.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+t.custom_field_id+"_"+i.value,name:t.name,"data-resource-id":i.name,type:"checkbox"},domProps:{value:i.value,checked:Array.isArray(t.value)?e._i(t.value,i.value)>-1:t.value},on:{change:function(a){var s=t.value,n=a.target,o=!!n.checked;if(Array.isArray(s)){var l=i.value,r=e._i(s,l);n.checked?r<0&&e.$set(t,"value",s.concat([l])):r>-1&&e.$set(t,"value",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(t,"value",o)}}}),a("label",{staticClass:"custom-control-label universal-custom-control-label pl-2 pr-1 dynamic",attrs:{for:"chk_"+t.custom_field_id+"_"+i.value}},[e._v(e._s(i.name))]),"checkbox"==t.dt_code&&n[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.name}},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)})],1)})),0)]):e._e(),"Lookup"==t.picklist_options&&"select"==t.dt_code&&"custom"==t.dropdown_type?a("Field",{staticClass:"w-100",attrs:{name:t.name,rules:{required:t.is_required},label:e.GetFormSchemaFieldName(t.name,t.display_name)},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.errors,n=i.changed;return[a("Multiselect",{class:{"disable-all":!0,"is-invalid":"status_id"==t.name&&s[0]},attrs:{placeholder:e.GetFieldPlaceHolder(t.label,t.display_name,"select"),"filter-results":!1,searchable:!0,"track-by":"value","show-no-results":!1,"internal-search":!1,"clear-on-select":!1,"close-on-select":!0,options:e.MakeNormalArray(t.select_options),object:!0,label:"name",disabled:"account_id"==t.name||"status_id"==t.name},on:{"search-change":function(a){return e.onSearch(a,t)},select:function(a){return e.setSelectedValue(t,a)},"update:modelValue":n},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}),"Lookup"==t.picklist_options&&"select"==t.dt_code&&"custom"==t.dropdown_type&&"status_id"==t.name&&s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.name}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)}):e._e(),"Lookup"==t.picklist_options&&"select"==t.dt_code&&"normal"==t.dropdown_type?a("Field",{staticClass:"w-100",attrs:{name:t.name,rules:{required:t.is_required},label:e.GetFormSchemaFieldName(t.name,t.display_name)},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],class:{"form-control":!0,"disable-all":!0,"is-invalid":"Lookup"==t.picklist_options&&"select"==t.dt_code&&"normal"==t.dropdown_type&&s[0]},attrs:{id:t.name,name:t.name,placeholder:e.GetFieldPlaceHolder(t.label,t.display_name,t.dt_code),disabled:"account_id"==t.name||"status_id"==t.name},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"value",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:"",selected:"selected"}},[e._v("Select")]),e._l(e.MakeNormalArray(t.select_options),(function(i,s){return a("option",{key:s,domProps:{selected:t.value==i.value,value:i.value}},[e._v(e._s(i.name))])}))],2),"Lookup"==t.picklist_options&&"select"==t.dt_code&&"normal"==t.dropdown_type&&s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.name}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)}):e._e(),"Lookup"!=t.picklist_options&&"select"==t.dt_code?a("Field",{staticClass:"w-100",attrs:{name:t.name,rules:{required:t.is_required},label:e.GetFormSchemaFieldName(t.name,t.display_name)},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"!=t.picklist_options&&"select"==t.dt_code&&s[0]},attrs:{id:t.name,name:t.name},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"value",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(e.MakeArray(t.picklist_options,t.dt_code),(function(i,s){return a("option",{key:s,domProps:{selected:t.value==i.value,value:i.value}},[e._v(e._s(i.name))])}))],2),"Lookup"!=t.picklist_options&&"select"==t.dt_code&&s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.name}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)}):e._e()],1):e._e()])})),0)])})),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2 p-0"},[a("div",{staticClass:"passpolicy-detailshead mb-3"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",[e._v(e._s(e.$t("Contacts")))])])])]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-1 mb-1 p-0"},[e.noRecordForTab?e._e():a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table-sorting table table-bordered mb-0",attrs:{id:"table-contacts-content","aria-describedby":"modalconvertlead"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{staticClass:"text-center",attrs:{scope:"col"}},[a("span",{staticClass:"mr-3"},[e._v("#")])]),a("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("FirstName")))]),a("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("LastName")))]),a("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("Email")))])])]),a("tbody",e._l(e.contactsData,(function(t,i){return a("tr",{key:i},[a("td",{staticClass:"text-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.clientCheck,expression:"clientCheck"}],staticClass:"chkitems",attrs:{type:"radio",value:"-1",name:"radio_clients"},domProps:{checked:e._q(e.clientCheck,"-1")},on:{change:function(t){e.clientCheck="-1"}}})]),a("td",[e._v(e._s(t.first_name))]),a("td",[e._v(e._s(t.last_name))]),a("td",[e._v(e._s(t.email_id))])])})),0)])])]),e.noRecordForTab?a("div",{staticClass:"text-center text-danger p-4 border"},[e._v(" "+e._s(e.$t("NoRecordfound")))]):e._e()])]),e.isProjectShow?a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2 validationfixer p-0"},[a("div",{staticClass:"passpolicy-detailshead mb-3"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",[e._v(e._s(e.$t("Select"))+" "+e._s(e.$t("Project")))])])])]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0 step1fixer"},[a("div",{staticClass:"table-responsive listing tableborder customborder_lightgrey"},[a("table",{staticClass:"table-sorting table table-bordered mb-0",attrs:{"aria-describedby":"modalproject"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{staticStyle:{width:"50%"},attrs:{scope:"col"}},[a("span",[e._v(e._s(e.$t("ProjectTemplate")))])]),a("th",{staticStyle:{width:"50%"},attrs:{scope:"col"}},[a("span",{staticClass:"d-flex"},[e._v(e._s(e.$t("ProjectName"))),a("span",{staticClass:"text-danger"},[e._v("*")])])])])]),a("tbody",[a("tr",[a("td",[a("Field",{attrs:{name:"ProjectTemplate",rules:{required:!0},label:"Project Template"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:e.projectDetail.ProjectTemplate,expression:"projectDetail.ProjectTemplate"}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.projectDetail,"ProjectTemplate",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v(e._s(e.$t("SelectTemplate")))]),e._l(e.ProjectTemplateListJson,(function(t,i){return a("option",{key:i,domProps:{value:t.value}},[e._v(" "+e._s(t.name))])}))],2),i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"ProjectTemplate"}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1),a("td",[a("Field",{attrs:{name:"ProjectName",rules:{required:0==e.clientCheck},label:"Project Name"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.projectDetail.ProjectName,expression:"projectDetail.ProjectName"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{type:"text",placeholder:"ProjectName",name:"ProjectName"},domProps:{value:e.projectDetail.ProjectName},on:{keyup:function(t){return e.HideMessage()},input:function(t){t.target.composing||e.$set(e.projectDetail,"ProjectName",t.target.value)}}}),i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"ProjectName"}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)}),"1"==e.Duplicate?a("div",{staticClass:"text-danger"},[e._v(" "+e._s(e.existName)+" "+e._s(e.$t("AddContract")))]):e._e()],1)])])])])])]):e._e()],2)]):e._e(),a("div",{staticClass:"col-lg-12 float-left mt-2 px-0"},[a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right py-3"},[!e.afterConvertToAccount&&e.isConvertLeadToOthers?a("a",{staticClass:"btn btn-success save-btn mr-2",attrs:{href:"javascript:;"},on:{click:e.GoPrevious}},[a("em",{staticClass:"fa  fa-angle-left mr-2"}),e._v(e._s(e.$t("Previous")))]):e._e(),e.afterConvertToAccount||e.isConvertLeadToOthers?e._e():a("a",{staticClass:"btn btn-success save-btn mr-2",attrs:{href:"javascript:;"},on:{click:function(t){e.popupHeader="Add Contract",e.convertLead("CONTRACT")}}},[a("em",{staticClass:"fa fa-plus mr-2"}),e._v(e._s(e.$t("AddContract")))]),e.afterConvertToAccount||e.isConvertLeadToOthers?e._e():a("a",{staticClass:"btn btn-success save-btn mr-2",attrs:{href:"javascript:;"},on:{click:function(t){e.popupHeader="Add Deal",e.convertLead("DEAL")}}},[a("em",{staticClass:"fa fa-plus mr-2"}),e._v(e._s(e.$t("Add"))+" "+e._s(e.$t("Deal")))]),!e.afterConvertToAccount&&e.isConvertLeadToOthers?a("a",{staticClass:"btn btn-success save-btn mr-2",class:{disabled:e.SaveDisabled},attrs:{href:"javascript:;"},on:{click:function(t){return e.SubmitData(i,s)}}},[a("em",{staticClass:"fa fa-save mr-2"}),e._v(e._s(e.$t("Save")))]):e._e(),a("a",{staticClass:"btn btn-danger delete-btn",attrs:{href:"javascript:;"},on:{click:e.closePopup}},[a("em",{staticClass:"fa fa-times mr-2"}),e._v(e._s(e.$t("Cancel")))])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-3"},[a("span",{staticClass:"mandatory"},[e._v(e._s(e.$t("MandatoryString")))])])])])])]}}])})],1)])])],1)},s=[],n=a("53ca"),o=(a("99af"),a("b0c0"),a("498a"),a("ac1f"),a("00b4"),a("4de4"),a("d3b7"),a("7db0"),a("caad"),a("2532"),a("5319"),a("e9c4"),a("9769")),l={props:{leadId:null,moduleName:null,subModuleCode:null,callFrom:null},data:function(){return{isLoading:!1,noRecordLeadConvert:!1,leadConvertContactsData:null,LeadConvertContactsHeader:null,afterConvertToAccount:!1,labelForAdd:"",isSelected:!1,isErrorMessage:"",accountName:"",SortBy:"",SortExp:"",PageSize:50,PageNumber:1,dealData:[],GroupBy:[],isConvertLeadToOthers:!1,createdAccountID:0,successMessage:"",contactListForAddDeal:[],saveFor:"",submited:!1,clientData:[],ProjectTemplateListJson:[],clientCheck:-1,popupHeader:"Convert Lead",Duplicate:"0",existName:"",SaveDisabled:!1,projectDetail:{ProjectName:"",ProjectTemplate:""},DependentOption:[{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:new Date(Date.now())},{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:new Date(Date.now())}],isProjectShow:!1,isContactForExistsAccount:!0,LeftViewData:[],AccName:"",NewAccName:"",ACCountDDL:[],OldAccountId:0,IsActiveAccount:0,contactId:0,LeadStatus:"",LeadCompany:"",Leadaddr1:"",Leadaddr2:"",Leadcity:"",Leadzip:"",Leadstate:"",contactsData:[],contactsHeader:[],noRecordForTab:!1,dataToConvertLead:{},leadName:"",clienFirstName:"",clientLastName:"",clientaddr1:"",clientaddr2:"",clientcity:"",clientstate:"",clientzip:"",clientcompany:"",defaultemailid:null,popover:{visibility:"click"}}},created:function(){this.fetchData(),this.fetchConvertLeadContacts(),this.accountName=this.leadName,this.GetProjectTemplatelist(),this.fetchContacts()},methods:{onBlur:function(e,t,a){var i=this;setTimeout((function(){var s=$('div[name="'.concat(t,'"]')).attr("value");s?($(e.target).removeClass("is-invalid"),$(e.target).parent().next().addClass("d-none")):($(e.target).addClass("is-invalid"),$(e.target).parent().next().is("span")?$(e.target).parent().next().removeClass("d-none"):$(e.target).parent().parent().append('<span name="'.concat(t,'" class="invalid-feedback d-block">').concat(i.GetFormSchemaFieldName(t,a)," is required.</span>")))}),700)},fetchData:function(){var e="id=".concat(this.leadId,"&refId=").concat(this.leadId,"&moduleName=").concat(this.moduleName,"&subModuleCode=").concat(this.subModuleCode),t=this;t.isLoading=!0,o["a"].FormLayoutView(e).then((function(e){t.isLoading=!1;var a=e.data.LEFTDATA;a=$.grep(a,(function(e,t){return"YES"==e.form_field_visibility})),null!=a&&a.length>0&&($.grep(a,(function(e,a){"role_title_id"==e.name&&(t.dataToConvertLead.roletitle=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value),"home_phone"==e.name&&(t.dataToConvertLead.home_phone=e.value),"business_phone"==e.name&&(t.dataToConvertLead.business_phone=e.value),"contact_number"==e.name&&(t.dataToConvertLead.contact_number=e.value),"account_id"==e.name&&(t.dataToConvertLead.account_id=e.value),"channel_id"==e.name&&(t.dataToConvertLead.lead_source_id=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value),"industry_type_id"==e.name&&(t.dataToConvertLead.industry_type_id=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value),"lead_country"==e.name&&(t.dataToConvertLead.lead_country=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value),"lead_state"==e.name&&(t.dataToConvertLead.lead_state=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value),"external_source_id"==e.name?t.dataToConvertLead.referred_by=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value:"status_id"==e.name?t.LeadStatus=t.FilterDDLandNormalValue(e.value):"client_first_name"==e.name?t.clienFirstName=null!=e.value?e.value:"":"client_last_name"==e.name?t.clientLastName=null!=e.value?e.value:"":"lead_address1"==e.name?t.clientaddr1=null!=e.value?e.value:"":"lead_address2"==e.name?t.clientaddr2=null!=e.value?e.value:"":"lead_city"==e.name?t.clientcity=null!=e.value?e.value:"":"lead_state"==e.name?t.clientstate=null!=e.value?JSON.parse(e.value)[0].name:"":"lead_zipcode"==e.name?t.clientzip=null!=e.value?e.value:"":"lead_company_name"==e.name?t.clientcompany=null!=e.value?e.value:"":"client_email"==e.name?t.defaultemailid=null!=e.value?e.value:"":"expected_close_date"==e.name?t.dataToConvertLead.closing_date=e.value:"money_value"==e.name?t.dataToConvertLead.ammount=e.value:"campaign_id"==e.name?t.dataToConvertLead.campaign_id=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value:"lead_owner_id"==e.name&&(t.dataToConvertLead.lead_owner=e.value),"commission_type"==e.name&&""!=$.trim(e.value)&&(e.form_field_visibility="YES",e.display_order=20),"agreement_type"==e.name&&""!=$.trim(e.value)&&(e.form_field_visibility="YES",e.display_order=19)})),""==t.leadName&&(t.leadName=t.clienFirstName+" "+t.clientLastName),t.dataToConvertLead.lead_name=t.leadName)}))},GetLocalizedValue:function(e,t){try{if(this.isBlank(t)){var a=this.$t(String(e).toUpperCase());return a!=String(e).toUpperCase()?a:(a=this.$t(String(e)),a||/^\s*$/.test(a)?a:e)}a=this.$t(String(t).toUpperCase());return a!=String(t).toUpperCase()?a:(a=this.$t(String(t)),a||/^\s*$/.test(a)?a:t)}catch(i){console.log(i)}},ChangeAccount:function(e){this.createdAccountID="2"==e?0:this.OldAccountId},fetchContacts:function(){var e=this;e.isLoading=!0;var t="sourceid=".concat(e.leadId,"&submodulecode=CRM_LEADS");o["a"].PrimaryContactDetails(t).then((function(t){e.isLoading=!1,null!=t.data?(e.contactsData=t.data.data,e.contactsHeader=t.data.schema,setTimeout((function(){e.CheckBoxBootstrap()}),100),e.noRecordForTab=!1):(e.noRecordForTab=!0,e.contactsData=null)}))},getName:function(e,t){var a=e.filter((function(e){return e.value==t}));this.AccName=a[0].name,this.createdAccountID=t},GetAssociatedAccounts:function(e){var t=this,a="id=&moduleName=CRM&type=CONTACT_ACCOUNTS&refId=".concat(e);o["a"].getDDLData(a).then((function(e){var a=[];if(null!=e.data&&""!=e.data&&(a=e.data.DATA),t.ACCountDDL=a,a.length>0)if(t.OldAccountId=a[0],t.AccName=a[0].name,t.createdAccountID>0){t.OldAccountId=t.createdAccountID,t.IsActiveAccount=2;var i=a.filter((function(e){return e.value==t.createdAccountID}));null!=i&&i.length>0?t.AccName=i[0].name:null!=a&&a.length>0&&(t.createdAccountID=a[0],t.AccName=a[0].name)}else t.createdAccountID=t.OldAccountId,t.IsActiveAccount=1;else t.IsActiveAccount=1}))},DependentDateObject:function(e,t){if("contract_start_date"==e.name){var a=new Date;a="undefined"!==typeof t&&""!=t?new Date(Date.parse(t)):new Date(Date.now()),this.DependentOption[0]={format:null,useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:a},$.each(this.GroupBy,(function(e,t){$.each(t.Data,(function(e,t){"contract_end_date"==t.name&&(t.value="")}))}))}else if("billing_start_date"==e.name){a=new Date;a="undefined"!==typeof t&&""!=t?new Date(Date.parse(t)):new Date(Date.now()),this.DependentOption[1]={format:null,useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:a},$.each(this.GroupBy,(function(e,t){$.each(t.Data,(function(e,t){"billing_end_date"==t.name&&(t.value="")}))}))}var i=this;setTimeout((function(){var t=$('div[name="'.concat(e.name,'"]')),a=$('div[name="'.concat(e.name,'"] input:first')),s=t.attr("value");s?(a.removeClass("is-invalid"),a.parent().parent().find("span[name='".concat(e.name,"']")).removeClass("d-block").addClass("d-none")):(a.addClass("is-invalid"),a.parent().next().is("span")?a.parent().next().removeClass("d-none"):a.parent().parent().append('<span name="'.concat(e.name,'" class="invalid-feedback d-block">').concat(i.GetFormSchemaFieldName(e.name,e.display_name)," is required.</span>")))}),200)},HideMessage:function(){this.Duplicate=0,$("input[name='ProjectName']").removeClass("is-invalid")},isBlank:function(e){return!e||/^\s*$/.test(e)},GetProjectTemplatelist:function(){var e=this,t="id=&moduleName=CRM&type=PROJECT";o["a"].getDDLData(t).then((function(t){var a=t.data;if(null!=a)return e.ProjectTemplateListJson=a.DATA,e.ProjectTemplateListJson}))},onSearch:function(e,t,a){this.searchSelectData(e,this,t,a)},searchSelectData:function(e,t,a,i){this.ShowSearchData(e,t,a,i)},ShowSearchData:function(e,t,a,i){if("contact_id"==a.name&&"select"==dt_code&&null!=t.contactListForAddDeal){var s=[];return s=$.grep(t.contactListForAddDeal,(function(t,a){return t.first_name.includes(e)})),a.select_options==s}"undefined"==typeof i&&(i=0);var n="id=&moduleName="+t.moduleName+"&type="+a.field_code;"fill"==a.dependent_type&&(n+="&refId="+i),o["a"].getDDLData(n+"&search="+escape(e)).then((function(e){var t=e.data;if(null!=t)return a.select_options=t.DATA,a.select_options}))},setSelectedValue:function(e,t){var a=this;try{Array.isArray(t)?e.value="object"===Object(n["a"])(t[0])&&null!==t[0]?t[0].value:t[0]:(e.has_dependent>0&&$.each(a.GroupBy,$.proxy((function(i,s){$.each(s.Data,(function(i,s){s.parent_id==e.custom_field_id&&"fill"==s.dependent_type&&a.ShowSearchData("",a,s,t.value)}))}),this)),e.value=t)}catch(i){}},fetchConvertLeadContacts:function(){var e=this;e.isLoading=!0;var t=""!=$.trim(e.dataToConvertLead.account_id)?e.dataToConvertLead.account_id:"",a="",i="";e.createdAccountID=0,""!=t&&t>0&&(e.createdAccountID=t,i=t),a=e.subModuleCode,i=e.leadId;var s="id="+i+"&subModuleCode="+a+"&sortBy="+e.SortBy+"&sortExp="+e.SortExp+"&pageSize="+e.PageSize+"&pageNumber="+e.PageNumber,n="id="+e.leadId+"&moduleName=CRM&subModuleCode=CRM_LEADS";o["a"].ContactListing(s).then((function(t){if(e.isLoading=!1,null!=t.data)if(e.LeadConvertContactsHeader=t.data.schema,null!=t.data.data&&t.data.data.length>0){var a=t.data.data.filter((function(e){return 1==e.IsPrimary}));null!=a&&a.length>0?e.contactId=a[0].contact_id:(e.contactId=t.data.data[0].contact_id,t.data.data[0].IsPrimary=!0),e.leadConvertContactsData=t.data.data,setTimeout((function(){e.CheckBoxBootstrap()}),100),e.noRecordLeadConvert=!1}else e.noRecordLeadConvert=!0;else e.noRecordLeadConvert=!0})),o["a"].FormLayoutView(n).then((function(t){if(null!=t.data){var a=t.data.LEFTDATA;if(a=$.grep(a,(function(e,t){return"YES"==e.form_field_visibility})),null!=a&&a.length>0){var i=a[0].group_id,s="",n="",o="",l="",r="",d="",c="",u="",m="";$.each(a,$.proxy((function(t,p){var v=$.grep(e.LeftViewData,(function(e,t){return e.group_id==i}));if(0==v.length){var f=$.grep(a,(function(t,a){if("client_first_name"==t.name&&(s=t.value),"client_last_name"==t.name&&(n=t.value),"lead_address1"==t.name&&(o=t.value),"lead_address2"==t.name&&(l=t.value),"lead_city"==t.name&&(r=t.value),"lead_company_name"==t.name&&(m=t.value),"lead_state"==t.name){c=null==JSON.parse(t.value)?"":JSON.parse(t.value)[0].value;var p=JSON.parse(t.value);null!=p&&p.length>0&&(d=p[0].name)}if("lead_zipcode"==t.name&&(u=t.value),t.group_id==i&&("client_first_name"==t.name||"client_last_name"==t.name||"client_email"==t.name||"contact_number"==t.name||"home_phone"==t.name||"business_phone"==t.name))return t;e.LeadCompany=m,e.Leadaddr1=o,e.Leadaddr2=l,e.Leadcity=r,e.Leadzip=u,e.Leadstate=c}));if(f.length>0){var h={group_id:i,group_name:f[0].group_name,LeftViewData:f};e.LeftViewData.push(h)}}i=p.group_id}),this)),e.NewAccName=""==m||null==m?$.trim($.trim(s)+" "+$.trim(n)+" "+$.trim(m)+" "+$.trim(o)+" "+$.trim(l)+" "+$.trim(r)+" "+$.trim(d)+" "+$.trim(u)):$.trim(m),e.NewAccName=e.NewAccName.replace(/ +(?= )/g,"")}}else e.noRecordLeadConvert=!0;setTimeout((function(){e.GetAssociatedAccounts(e.contactId)}),400)}))},getLeadContactsIFAssociatedAccountDontHaveContacts:function(e,t){var a=this;if(a.createdAccountID>0){var i="id="+e+"&subModuleCode="+t+"&sortBy="+a.SortBy+"&sortExp="+a.SortExp+"&pageSize="+a.PageSize+"&pageNumber="+a.PageNumber;o["a"].ContactListing(i).then((function(e){null!=e.data?(a.LeadConvertContactsHeader=e.data.schema,null!=e.data.data&&e.data.data.length>0?(a.leadConvertContactsData=e.data.data,setTimeout((function(){a.CheckBoxBootstrap()}),100),a.afterConvertToAccount=!0,a.convertLead(),a.noRecordLeadConvert=!1):a.noRecordLeadConvert=!0):a.noRecordLeadConvert=!0}))}},getClientData:function(e){var t={user_id:0,first_name:"",last_name:"",email_id:"",account_id:e};this.clientData.push(t)},FetchData:function(e,t){var a,i=[],s=this;s.isLoading=!0,s.createdAccountID>0?(s.contactListForAddDeal=[],$.each(s.leadConvertContactsData,(function(e,t){var a={name:t.first_name+" "+t.last_name,value:t.contact_id,first_value:null,second_value:null};i.push(t.contact_id),s.contactListForAddDeal.push(a)}))):$("#ConvertLeadContacts table tr td input[type='checkbox']:checked").each((function(){var e=this;i.push($(e).val());var t=[];if(t=$.grep(s.leadConvertContactsData,(function(t,a){return t.contact_id==$(e).val()})),t.length>0){var a={name:t[0].first_name+" "+t[0].last_name,value:t[0].contact_id,first_value:null,second_value:null};s.contactListForAddDeal.push(a)}}));var n="";"DEAL"==t?(s.isProjectShow=!1,a=[{id:e,name:"account_id"},{id:s.FilterDDLValueForID(s.dataToConvertLead.lead_owner),name:"deal_owner_id"}],s.labelForAdd='{{$t("Deal ")}} {{$t("Deal ")}}',n="CRM_DEALS"):"CONTRACT"==t&&(s.isProjectShow=!0,a=[{id:e,name:"account_id"}],s.labelForAdd="AddContract",n="CRM_CONTRACTS"),s.saveFor=t;var l=encodeURIComponent(JSON.stringify(a)),r="moduleName=CRM&subModuleCode="+n+"&otherData="+l;o["a"].getFormLayout(r).then((function(a){if(s.isLoading=!1,s.GroupBy=[],s.dealData=a.data.data,null!=s.dealData&&s.dealData.length>0){var i=s.dealData[0].group_id;$.each(s.dealData,$.proxy((function(a,n){i=n.group_id;var o=$.grep(s.GroupBy,(function(e){return e.group_id==i}));if(0==o.length){var l=$.grep(s.dealData,(function(e){return e.group_id==i}));if(e>0&&$.each(l,(function(a,i){if("select"==i.dt_code)try{i.value=i.value.trim()}catch(o){console.log("value is null while trimming")}if("Lookup"==i.picklist_options&&(i.select_options=s.MakeNormalArray(i.select_options),i.select_value=i.select_options,"account_id"==i.name&&(i.value=i.select_options.find((function(t){return t.value==e})))),"Lookup"==i.picklist_options&&"custom"==i.dropdown_type&&i.select_options&&""==i.value&&(i.value=i.select_options[0]),"lead_id"==i.name&&(i.value=s.leadId),"DEAL"==t)"closing_date"==i.name&&(i.value=null!=s.dataToConvertLead.closing_date&&s.dataToConvertLead.closing_date.length>0?s.dataToConvertLead.closing_date:""),"deal_name"==i.name&&(i.value=1==s.IsActiveAccount?s.NewAccName:s.AccName),"deal_name"==i.name&&(i.value=s.dataToConvertLead.lead_name),"email_id"==i.name&&(i.value=s.dataToConvertLead.email_id),"amount"==i.name&&(i.value=null!=s.dataToConvertLead.ammount&&s.dataToConvertLead.ammount.length>0?s.dataToConvertLead.ammount:""),"Lookup"==i.picklist_options&&"status_id"==i.name&&(i.value=1001),"campaign_id"==i.name&&(i.value=s.dataToConvertLead.campaign_id),"Lookup"==i.picklist_options&&"contact_name"==i.name?(i.select_options=s.contactListForAddDeal,null!=s.contactsData&&s.contactsData.length>0&&(i.value=s.contactsData[0].contact_id)):"Lookup"==i.picklist_options&&"lead_source_id"==i.name?i.value=s.dataToConvertLead.lead_source_id:"Lookup"==i.picklist_options&&"referred_by"==i.name?i.value=s.dataToConvertLead.referred_by:"deal_address1"==i.name?i.value=s.clientaddr1:"deal_address2"==i.name?i.value=s.clientaddr2:"deal_city"==i.name?i.value=s.clientcity:"deal_state"==i.name?i.value=s.dataToConvertLead.lead_state:"deal_zipcode"==i.name?i.value=s.clientzip:"deal_country"==i.name?i.value=s.dataToConvertLead.lead_country:"deal_company_name"==i.name?i.value=s.clientcompany:"industry_type_id"==i.name?i.value=s.dataToConvertLead.industry_type_id:"role_title_id"==i.name?i.value=s.dataToConvertLead.roletitle:"email_id"==i.name?i.value=s.defaultemailid:"home_phone"==i.name?i.value=s.dataToConvertLead.home_phone:"business_phone"==i.name?i.value=s.dataToConvertLead.business_phone:"mobile_phone"==i.name&&(i.value=s.dataToConvertLead.contact_number);else if("CONTRACT"==t){if("contract_start_date"!=i.name&&"contract_end_date"!=i.name||(i.value=null!=s.dataToConvertLead.closing_date&&s.dataToConvertLead.closing_date.length>0?s.$options.filters.formatDate(s.dataToConvertLead.closing_date):"",i.value=new Date(Date.parse(i.value))),"contract_name"==i.name&&(i.value=s.accountName),"total_price"==i.name){i.value=null!=s.dataToConvertLead.ammount&&s.dataToConvertLead.ammount.length>0?s.dataToConvertLead.ammount:"";var n=i.value;null==n&&(n=0),n+="",n.includes(".")&&(i.length=i.length+3)}"Lookup"==i.picklist_options&&"status_id"==i.name&&(i.value=1001)}})),l.length>0){var r={group_id:i,group_name:l[0].group_name,dealData:l};s.GroupBy.push(r)}}}),this)),s.isConvertLeadToOthers=!0,s.afterConvertToAccount=!1}setTimeout((function(){$("div [name=account_id]").find(".vs__actions .clear").html("")}),600),setTimeout((function(){s.CheckBoxBootstrap()}),100),setTimeout((function(){s.RadioButtonBootstrap()}),500)})),$("#status_id option:selected").text("Select")},SubmitData:function(e,t){var a=this,i=this,s=!1,n=i.projectDetail.ProjectName;i.submited=!0,i.Duplicate=0,i.$refs.ConvertLeadIntoDeal.validate().then((function(e){if(e){i.isLoading=!0,i.SaveDisabled=!0;var t=i.dealData,l=[],r=[],d=$("input[name='radio_clients']:checked").val(),c=$.grep(i.clientData,(function(e,t){return e.user_id==d}));if(d)if(""!=n){var u="name="+n+"&type=PROJECT";o["a"].CheckDuplicate(u).then((function(e){var a=e.data;if(null!=a&&(i.existName=n,i.Duplicate=a,1==i.Duplicate&&($("input[name='ProjectName']").addClass("is-invalid"),s=!0,i.SaveDisabled=!1),!s||"DEAL"==i.saveFor)){$.each(t,(function(e,t){var a={field_name:t.name,required:t.is_required,length:t.length,type:t.validation_type},i={field_name:t.name,field_value:t.value,custom_field_id:t.custom_field_id};l.push(i),r.push(a)}));var d={data:l,validation:r,clientData:c,ProjectDetail:i.projectDetail},u=JSON.stringify(d),m="DEAL"==i.saveFor?"PostDeal":"PostContract";o["a"].PostDealOrContract(m,u).then((function(e){i.isLoading=!1,"1"==e.data[0].Code?(i.$emit("close"),i.ShowAlert(i.$t("AddedSuccess",[i.$t("DEAL"==i.saveFor?"Deal":"Contract")]),"success",!0,i.$t("Alert")),"LeadListing"==i.callFrom&&($("[id^='ChangeOwnerId']").removeClass("enable").addClass("disabled"),$("[id^='CloseLeadId']").removeClass("enable").addClass("disabled"))):i.ShowAlert(i.$t("AddedError",[i.$t("DEAL"==i.saveFor?"Deal":"Contract")]),"failure",!0,i.$t("Alert")),i.SaveDisabled=!1}))}}))}else{$.each(t,(function(e,t){"deal_owner_id"!=t.name&&"account_id"!=t.name||(t.value=t.value.value);var a={field_name:t.name,required:t.is_required,length:t.length,type:t.validation_type},i={field_name:t.name,field_value:t.value,custom_field_id:t.custom_field_id};l.push(i),r.push(a)}));var m={data:l,validation:r,clientData:c},p=JSON.stringify(m);u="DEAL"==i.saveFor?"PostDeal":"PostContract";o["a"].PostDealOrContract(u,p).then((function(e){"1"==e.data[0].Code?(i.$emit("close"),i.ShowAlert(i.$t("AddedSuccess",[i.$t("DEAL"==i.saveFor?"Deal":"Contract")]),"success",!0,i.$t("Alert")),i.FetchData()):i.ShowAlert(i.$t("AddedError",[i.$t("DEAL"==i.saveFor?"Deal":"Contract")]),"failure",!0,i.$t("Alert")),i.SaveDisabled=!1})),i.Duplicate=0}else i.ShowAlert(i.$t("Please Select Contact"),"warning",!0,i.$t("Alert")),i.SaveDisabled=!1}else console.log(a.$refs.ConvertLeadIntoDeal.errors)}))},MakeNormalArray:function(e){if(e)try{return JSON.parse(e)}catch(t){return e}else e=[]},convertLead:function(e){var t=[],a=this,i="";if(a.clientData=[],a.createdAccountID>0?$.each(a.leadConvertContactsData,(function(e,i){var s={name:i.first_name+" "+i.last_name,value:i.contact_id,first_value:null,second_value:null};t.push(i.contact_id),a.contactListForAddDeal.push(s)})):($("#ConvertLeadContacts table tr td input[type='checkbox']:checked").each((function(){var e=this;t.push($(e).val());var i=[];if(i=$.grep(a.leadConvertContactsData,(function(t,a){return t.contact_id==$(e).val()})),i.length>0){var s={name:i[0].first_name+" "+i[0].last_name,value:i[0].contact_id,first_value:null,second_value:null};a.contactListForAddDeal.push(s)}})),i=a.$t("LeadConvertSuccess")+a.$t("Lead")+a.$t("Account")),0==a.contactId)return a.ShowAlert("Please add contact first.","warning",!0,a.$t("Alert")),!1;var s=$.trim(1==a.IsActiveAccount?a.NewAccName:a.AccName);if(""==s)return a.ShowAlert("Please fill Account Name.","warning",!0,a.$t("Alert")),!1;if(t.length<1){t.push(a.contactId);var n=[];if(n=$.grep(a.leadConvertContactsData,(function(e,t){return e.contact_id==a.contactId})),n.length>0){var l={name:n[0].first_name+" "+n[0].last_name,value:n[0].contact_id,first_value:null,second_value:null};a.contactListForAddDeal.push(l)}}if(t.length>0){a.accountName=s;var r={sourceId:a.leadId,moduleName:a.moduleName,subModuleCode:a.subModuleCode,accountName:a.accountName,contactIds:t,accountId:1==a.IsActiveAccount||""==$.trim(a.createdAccountID)?0:a.createdAccountID,company:a.LeadCompany,address1:a.Leadaddr1,address2:a.Leadaddr2,city:a.Leadcity,zip:a.Leadzip,state:a.Leadstate},d=JSON.stringify(r);o["a"].ConvertLead(d).then((function(t){if("Success"==t.data[0].Status){var s=a.MakeNormalArray(t.data[0].Value);a.successMessage=i,a.isConvertLeadToOthers=!0,a.createdAccountID=s.ACCOUNT,a.clientData=s.CLIENTS,a.getClientData(s.ACCOUNT),"DEAL"==e?setTimeout((function(){a.FetchData(s.ACCOUNT,"DEAL")}),300):"CONTRACT"==e&&setTimeout((function(){a.FetchData(s.ACCOUNT,"CONTRACT")}),300)}}))}else if(a.createdAccountID>0){var c=a.FilterDDLandNormalValue(a.dataToConvertLead.account_id);a.isContactForExistsAccount=!1,vm.$t("SubmitSuccess"),a.successMessage=a.$t("AccountIsNotAssciated")+c}else a.isErrorMessage=a.$t("PleaseSelectAnyRecordsForFurther"),a.isSelected=!0},closePopup:function(){var e=this,t={accntid:e.createdAccountID},a=JSON.stringify(t);o["a"].DeleteAccountBeforeDeal(a).then((function(e){console.log(e)})),e.isConvertLeadToOthers?(e.isConvertLeadToOthers=!1,e.$emit("close")):e.$emit("close")},GoPrevious:function(){var e=this,t={accntid:e.createdAccountID},a=JSON.stringify(t);o["a"].DeleteAccountBeforeDeal(a).then((function(e){console.log(e)})),e.isConvertLeadToOthers=!1,e.IsActiveAccount=1,e.showConvertLead=!0,$("div [name=account_id]").find(".vs__actions .clear").html("")},GetValidation:function(e){var t={};if(e.is_required&&(t["required"]=!0),e.length>0&&(t["max"]=e.length),"email"==e.validation_type&&(t["email"]=!0),"decimal"!=e.dt_code&&"float"!=e.dt_code||("ORIGNAL_CONVERSION_RATE"==e.name&&(t["min_value"]=0),"estimated_hours"!=e.name&&"estimated_cost"!=e.name&&"base_rate"!=e.name||(t["min_value"]=1),"base_rate"==e.name&&(t["max_value"]=9999.99)),"int"!=e.dt_code&&"bigint"!=e.dt_code||(t["numeric"]=!0),"url"==e.dt_code&&(t["url"]="require_protocol"),null!=e.regular_expression&&""!=e.regular_expression&&(t["regex"]=e.regular_expression),"project_named"==e.name&&""!=e.value){var a=/^[A-Za-z0-9 _]*[A-Za-z0-9][A-Za-z0-9 _]*$/;t["regex"]=a}return t}}},r=l,d=(a("3b1bd"),a("2877")),c=Object(d["a"])(r,i,s,!1,null,null,null);t["a"]=c.exports},6964:function(e,t,a){var i=a("cb2d");e.exports=function(e,t,a){for(var s in t)i(e,s,t[s],a);return e}},"6c06":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v(e._s(e.header))]),a("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("Form",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var i=t.valid,s=t.errors;return[a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("Subject"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Subject",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.Subject,expression:"Subject"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{id:"Subject",name:"Subject",maxlength:"200",type:"text"},domProps:{value:e.Subject},on:{input:function(t){t.target.composing||(e.Subject=t.target.value)}}}),i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Subject"}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("FollowUp"))+" "+e._s(e.$t("ScheduleDate"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("div",{staticClass:"input-group"},[a("Field",{attrs:{name:"due date",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("v-date-picker",{staticClass:"input-group",attrs:{mode:"dateTime","min-date":new Date,"minute-increment":5},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.inputValue,n=t.inputEvents,o=t.togglePopover;return[a("input",e._g({class:{"form-control":!0,"is-invalid":i[0]},domProps:{value:s}},n)),a("div",{staticClass:"input-group-append",on:{click:function(e){return o()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:e.duedate,callback:function(t){e.duedate=t},expression:"duedate"}}),i[0]?a("span",{staticClass:"invalid-feedback d-block"},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1)])]),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("Priority"))+":")]),a("Field",{attrs:{name:"priority",rules:{required:!1}}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.priorityValue,expression:"priorityValue"}],staticClass:"form-control",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.priorityValue=t.target.multiple?a:a[0]},e.getSelectedValue]}},[a("option",{attrs:{value:""}},[e._v(e._s(e.$t("SelectPriorityLevel"))+" ")]),e._l(e.priority,(function(t,i){return a("option",{key:i,domProps:{value:t.value}},[e._v(" "+e._s(t.name)+" ")])}))],2)])],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left",class:{"d-none":e.enableReminder}},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Default"))+e._s(e.$t("Reminder"))+":")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.DefaultReminder,expression:"DefaultReminder"}],staticClass:"form-control disabled",attrs:{id:"DefaultReminder",name:"DefaultReminder",value:"",maxlength:"200",type:"text"},domProps:{value:e.DefaultReminder},on:{input:function(t){t.target.composing||(e.DefaultReminder=t.target.value)}}})])]),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("OverrideDefault"))+" "+e._s(e.$t("Reminder"))+":")]),a("div",{staticClass:"Col-4"},[a("label",{staticClass:"switch"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.enableReminder,expression:"enableReminder"}],staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{type:"checkbox"},domProps:{value:e.enableReminder,checked:Array.isArray(e.enableReminder)?e._i(e.enableReminder,e.enableReminder)>-1:e.enableReminder},on:{change:function(t){var a=e.enableReminder,i=t.target,s=!!i.checked;if(Array.isArray(a)){var n=e.enableReminder,o=e._i(a,n);i.checked?o<0&&(e.enableReminder=a.concat([n])):o>-1&&(e.enableReminder=a.slice(0,o).concat(a.slice(o+1)))}else e.enableReminder=s}}}),a("span",{staticClass:"slider round"},[a("span",{staticClass:"slider-yes"},[e._v("Yes")]),a("span",{staticClass:"slider-no"},[e._v("NO")])])])])])]),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",{class:{"d-none":!e.enableReminder}},[e._v(e._s(e.$t("Duration"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedDurationValue,expression:"selectedDurationValue"}],staticClass:"form-control",class:{"d-none":!e.enableReminder},staticStyle:{"max-width":"100%"},attrs:{id:"duration"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedDurationValue=t.target.multiple?a:a[0]},e.getValidate]}},[a("option",{attrs:{value:""}},[e._v("Select")]),e._l(e.reminderDurationValues,(function(t,i){return a("option",{key:i,domProps:{value:t,innerHTML:e._s(t)}})}))],2),a("span",{staticClass:"text-danger DurationReq small",class:{"d-none":!e.enableReminder},attrs:{id:"DurationReq"}})])]),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",{class:{"d-none":!e.enableReminder}},[e._v(e._s(e.$t("SelectType"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedDurationType,expression:"selectedDurationType"}],staticClass:"form-control",class:{"d-none":!e.enableReminder},staticStyle:{"max-width":"100%"},attrs:{id:"durationType"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedDurationType=t.target.multiple?a:a[0]},e.getValidate]}},[a("option",{attrs:{value:""}},[e._v("Select")]),e._l(e.reminderDurationTypes,(function(t,i){return a("option",{key:i,domProps:{value:t,innerHTML:e._s(t)}})}))],2),a("span",{staticClass:"text-danger DurationTypeReq small",class:{"d-none":!e.enableReminder}})])]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("FollowUpCRM"))+" "+e._s(e.$t("Message"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Message",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.Message,expression:"Message"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{id:"Message",name:"Message",maxlength:1e3,rows:"5"},domProps:{value:e.Message},on:{input:function(t){t.target.composing||(e.Message=t.target.value)}}}),i[0]?a("span",{staticClass:"invalid-feedback",attrs:{name:"Message"}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1)])]),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("button",{staticClass:"btn btn-success save-btn mr-1",attrs:{type:"button"},on:{click:function(t){return e.saveTask(i,s)}}},[a("em",{staticClass:"fa fa-save pr-2",attrs:{"aria-hidden":"true"}}),e._v(e._s(e.$t("Save"))+" ")]),a("button",{staticClass:"btn btn-danger delete-btn",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-close pr-2",attrs:{"aria-hidden":"true"}}),e._v(e._s(e.$t("Cancel"))+" ")])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("span",{staticClass:"mandatory"},[e._v(" "+e._s(e.$t("MandatoryString"))+" ")])])])])])])]}}])})],1)])])])],1)},s=[],n=(a("ac1f"),a("5319"),a("d3b7"),a("3ca3"),a("ddb0"),a("9861"),a("841c"),a("e9c4"),a("9769")),o={props:{modulename:{type:String,required:!0},modalFollowUpItem:null,submodulecode:{type:String,required:!0},sourceid:{Type:String,required:!0}},data:function(){return{isLoading:!1,currentDate:new Date,duedate:new Date,Subject:"",priority:[],Message:"",priorityValue:"",activitySourceID:0,modal:null,isView:!1,popover:{visibility:"click"},optionsMindate:{format:"MMM dd yyyy",useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:new Date(Date.now())},FollowUpIdForEdit:0,reminderDurationValues:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60"],reminderDurationTypes:["Minutes","Hours","Days"],enableReminder:!1,selectedDurationType:"",selectedDurationValue:"",DefaultReminder:$("#hdnReminderDuration").val(),header:this.$t("Add")+" "+this.$t("FollowUp")}},created:function(){this.activitySourceID=this.sourceid,this.GetPriority(),this.FollowUpIdForEdit=0,this.modalFollowUpItem&&this.FetchEventViewData(this.modalFollowUpItem.followup_notification_id),this.optionsMindate.minDate=new Date(Date.now());var e=this;parseInt(e.DefaultReminder)>60&&parseInt(e.DefaultReminder)<=1440?e.DefaultReminder=parseInt(e.DefaultReminder/60)+" Hours":parseInt(e.DefaultReminder)>1440?e.DefaultReminder=parseInt(e.DefaultReminder/1440)+" Days":e.DefaultReminder=e.DefaultReminder+" Minutes"},methods:{FetchEventViewData:function(e){var t=this;t.FollowUpIdForEdit=0,t.optionsMindate.minDate=!1;var a="id="+e+"&refId="+t.sourceid+"&subModuleCode="+t.modulename+"&moduleCode="+t.submodulecode;n["a"].updateActivityData(a).then((function(a){if(t.FollowUpIdForEdit=e,t.header=t.$t("Edit")+" "+t.$t("FollowUp"),null!=a.data){var i=a.data.data;t.duedate=t.$options.filters.formatDate(i[0].followUpDate),t.Message=i[0].followup_notification_message,t.Subject=i[0].followup_notification_subject,t.priorityValue=null!=i[0].priority_lavel&&0!=i[0].priority_lavel?i[0].priority_lavel:"",t.optionsMindate.minDate=new Date(Date.now());var s=i[0].reminder_duration;0!=s&&s<60?($(".rdoticketfor").trigger("click"),t.selectedDurationType="Minutes",t.selectedDurationValue=s):0!=s&&(60==s||s<1440)?($(".rdoticketfor").trigger("click"),t.selectedDurationType="Hours",t.selectedDurationValue=parseInt(s/60)):0!=s&&s>=1440&&($(".rdoticketfor").trigger("click"),t.selectedDurationType="Days",t.selectedDurationValue=parseInt(s/1440))}}))},GetPriority:function(){var e=this,t="id=&moduleName="+this.submodulecode+"&type=PRIORITY";n["a"].getLeaOwnerBySearch(t).then((function(t){var a=t.data;if(null!=a)return e.priority=a.DATA,e.priority}))},getSelectedValue:function(e){this.priorityValue=e.target.value},formatDate:function(e){if(e)try{var t=Globalize.culture().calendar.patterns.t;t=String(t).replace("t","A").replace("t","");var a=new Date(moment(String(e)).year(),moment(String(e)).month(),moment(String(e)).date(),moment(String(e)).hours(),moment(String(e)).minutes());return moment(a,"YYYY-MM-DD HH:mm:ss").format("MM-dd-yyyy")}catch(i){}},getValidate:function(){var e=$(".rdoticketfor").is(":checked")?"yes":"no",t=$("#duration").val(),a=$("#durationType").val();"yes"!=e||"0"!=t&&""!=t?$(".DurationReq").html(""):$(".DurationReq").html("Duration Is Required."),"yes"==e&&""==a?$(".DurationTypeReq").html("Duration Type Is Required."):$(".DurationTypeReq").html("")},saveTask:function(e,t){var a=this;this.$refs.form.validate().then((function(e){var t=new URLSearchParams(window.location.search),i=t.get("reqfrom");null==i&&(i=window.location.pathname.indexOf("Listing")>-1||window.location.pathname.indexOf("Index")>-1?1:0);var s=parseInt(i)||0,o=$(".rdoticketfor").is(":checked")?"yes":"no",l=$("#duration").val(),r=$("#durationType").val(),d=0,c="";"yes"!=o||"0"!=l&&""!=l?$(".DurationReq").html(""):(c="no",$(".DurationReq").html("Duration Is Required.")),"yes"==o&&""==r?(c="no",$(".DurationTypeReq").html("Duration Type Is Required.")):$(".DurationTypeReq").html("");var u=new Date(a.duedate),m=new Date,p=u-m,v=Math.floor(p/1e3/60);if("yes"==o){if("Minutes"==r?d=l:"Hours"==r?d=60*l:"Days"==r&&(d=24*l*60),v<=d||v<=0)return a.ShowAlert(a.$t("InvalidReminderDuration"),"failure",!0,a.$t("Alert")),!1}else if(d=$("#hdnReminderDuration").val(),v<=d||v<=0)return a.ShowAlert(a.$t("InvalidReminderDate"),"failure",!0,a.$t("Alert")),!1;if(o&&0==c.length){var f={sourceId:a.activitySourceID,moduleName:a.modulename,subModuleCode:a.submodulecode,subjecttext:a.Subject,dueDate:a.duedate,priorityLavel:a.priorityValue,messagetext:a.Message,reminderduration:d,activityType:"FollowUp",activityId:a.FollowUpIdForEdit},h=JSON.stringify(f);e&&(a.isLoading=!0,n["a"].Addtask(h).then((function(e){a.isLoading=!1,"Success"==e.data[0].Status?(f.activityId>0?a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("FollowUp")]),"success",!0,a.$t("Alert")):a.ShowAlert(a.$t("AddedSuccess",[a.$t("FollowUp")]),"success",!0,a.$t("Alert")),a.duedate="",a.Subject="",a.priority="",a.Message="",a.showAddTaskModal=!1,a.$emit("close"),s>0?a.$parent.loadFollowUpData(null,a.sourceid):a.$parent.loadData("activities")):"Exist"==e.data[0].Status&&a.ShowAlert(a.$t("AlreadyExist",[a.$t("FollowUp")]),"warning",!0,a.$t("Alert"))}))),a.isLoading=!1}}))}}},l=o,r=a("2877"),d=Object(r["a"])(l,i,s,!1,null,null,null);t["a"]=d.exports},"6e8d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("LEAD_NAME"))+": "+e._s(e.leadName)+" ")]),a("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},e._l(e.LeftViewData,(function(t,i){return a("div",{key:i,staticClass:"panel1"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5 mb-2"},[a("span",[e._v(e._s(e.$t(t.group_name.toUpperCase(),"")))])])]),a("div",{staticClass:"row"},e._l(t.LeftViewData,(function(t,i){return a("div",{key:i,staticClass:"col-md-6 col-lg-3"},[a("div",{staticClass:"form-group"},[a("label",[a("strong",[e._v(e._s(e.$t(t.name.toUpperCase(),t.display_name))+":")]),"date"==t.dt_code||"datetime"==t.dt_code?a("span",{staticClass:"answer rightlabeltext ml-1"},[e._v(" "+e._s(e._f("formatDate")(t.value))+" ")]):e._e(),"decimal"==t.dt_code?a("span",{staticClass:"answer rightlabeltext ml-1"},[e._v(" "+e._s(e._f("currency")(e.isBlank(t.value)?"0.00":t.value))+" ")]):e._e(),"date"!=t.dt_code&&"datetime"!=t.dt_code&&"decimal"!=t.dt_code&&"Lookup"!=t.picklist_options?a("span",{staticClass:"answer rightlabeltext ml-1"},[e._v(" "+e._s(e.isBlank(t.value)?"--":t.value)+" ")]):e._e(),"date"!=t.dt_code&&"datetime"!=t.dt_code&&"decimal"!=t.dt_code&&"Lookup"==t.picklist_options?a("span",{staticClass:"answer rightlabeltext ml-1"},[e._v(" "+e._s(e.isBlank(t.value)?"--":e.FilterDDLandNormalValue(t.value))+" ")]):e._e()])])])})),0)])})),0)])])])],1)])},s=[],n=(a("a9e3"),a("b0c0"),a("ac1f"),a("00b4"),a("9769")),o={props:{modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},sourceIds:{type:Number,required:!0},controller:{type:String,required:!0}},data:function(){return{LeftViewData:[],sourceId:null,ApiURL:"moduleName="+this.modulename+"&subModuleCode="+this.submodulecode,leadName:"--",itemOfListingScreen:null,isLoading:!1}},created:function(){console.log("source "+this.sourceIds),this.sourceId=this.sourceIds,this.itemOfListingScreen=this.$parent.LeadIdForViewNote,this.FetchLeadDetails()},methods:{FetchLeadDetails:function(){var e=this;e.isLoading=!0,e.ApiURL=e.ApiURL+"&id="+e.sourceId,n["a"].getQuickViewDetails(e.ApiURL).then((function(t){e.isLoading=!1;var a=t.data.LEFTDATA,i="",s="";if(a=$.grep(a,(function(e,t){return"client_first_name"==e.name?i=null!=e.value?e.value:"":"client_last_name"==e.name&&(s=null!=e.value?e.value:""),"YES"==e.form_field_visibility})),"--"==e.leadName&&(e.leadName=i+" "+s),null!=a&&a.length>0){var n=a[0].group_id;$.each(a,$.proxy((function(t,i){var s=$.grep(e.LeftViewData,(function(e,t){return e.group_id==n}));if(0==s.length){var o=$.grep(a,(function(e,t){return e.group_id==n}));if(o.length>0){var l={group_id:n,group_name:o[0].group_name,LeftViewData:o};e.LeftViewData.push(l)}}n=i.group_id}),this))}setTimeout((function(){e.CheckBoxBootstrap()}),100),setTimeout((function(){e.RadioButtonBootstrap()}),500)}))},isBlank:function(e){return!e||/^\s*$/.test(e)},FilterDDLandNormalValue:function(e){if(!(e.length>0))return"";try{return JSON.parse(e)[0].name}catch(t){return""}}}},l=o,r=a("2877"),d=Object(r["a"])(l,i,s,!1,null,null,null);t["a"]=d.exports},"779d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v(e._s(e.header))]),a("span",{staticClass:"float-right"},["list"==e.NoteListType?a("a",{staticClass:"text-white",attrs:{href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Card View"},on:{click:function(t){e.NoteListType="card"}}},[a("em",{staticClass:"fa fa-th-large mr-2"}),e._v(e._s(e.$t("CardView"))+" ")]):e._e(),"list"!=e.NoteListType?a("a",{staticClass:"text-white",attrs:{href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"List View"},on:{click:function(t){e.NoteListType="list"}}},[a("em",{staticClass:"fa fa-list mr-2"}),e._v(e._s(e.$t("ListView"))+" ")]):e._e()]),a("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body",staticStyle:{"max-height":"600px","overflow-y":"auto"}},[a("div",{},[a("crmnote",{attrs:{notedata:e.noteData,sourceid:e.allIds,modulename:e.modulename,submodulecode:e.submodulecode,callfrom:"quickViewAndNoteJS",userid:e.userid,curIndex:e.curindex,listtype:e.NoteListType,showNotePopUp:e.isShowNotePopup}})],1)]),e.isShowNotePopup?e._e():a("div",{staticClass:"modal-footer AddNote"},[a("div",{staticClass:"col-lg-6 text-right p-0"},[a("a",{staticClass:"btn btn-success formbtn text-white",attrs:{href:"javascript:;"},on:{click:function(t){return e.openShowNotePopup()}}},[a("em",{staticClass:"fa fa-plus pr-2"}),e._v(e._s(e.$t("AddNote"))+" ")])])])])])])])])},s=[],n=(a("a9e3"),a("4de4"),a("d3b7"),a("84a0")),o=a("9769"),l={props:{modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},userid:{type:Number,required:!0},sourcekeyname:{type:String,required:!1},curindex:{type:Number},leadInfo:{type:Object,required:!0},DealInfo:{type:Object,required:!1}},components:{crmnote:n["a"]},data:function(){return{LeadId:null,DealId:null,allIds:null,noteData:[],noteslead:null,crm_NotesId:null,NoRecordForTabNotes:!0,isShowLeadNoteDialogue:!1,editDeleteButonFor:0,header:"",isShowNotePopup:!1,NoteListType:"list"}},watch:{LeadId:function(e){this.allIds=e,this.loadNoteData(e)},DealId:function(e){this.allIds=e,this.loadNoteData(e)}},created:function(){console.log(this.userid);try{this.LeadId=this.leadInfo.lead_id}catch(e){}try{console.log(this.DealInfo.deal_id),this.DealId=this.DealInfo.deal_id}catch(e){}this.header=this.$t("Notes"),null!=this.LeadId?("CRM_LEADS"==this.submodulecode&&(this.NoteListType="list"),this.allIds=this.leadInfo.lead_id,this.loadNoteData(this.LeadId)):null!=this.DealId&&(this.allIds=this.DealInfo.deal_id,"CRM_DEALS"==this.submodulecode&&(this.NoteListType="list"),this.loadNoteData(this.DealId))},methods:{openShowNotePopup:function(){var e=this;if("CRM_LEADS"==this.submodulecode)if(null!=this.leadInfo&&"NO"!=this.leadInfo.is_additional_lead_owner){var t=JSON.parse(vm.leadInfo.is_additional_lead_owner),a=t.filter((function(e){return"AddNote"==e.permission_code}));a.length>0?(e.isShowNotePopup=!0,e.loadNoteData(e.LeadId)):e.ShowAlert(this.$t("additionalOwnerAuthorityWarning"),"warning",!0,this.$t("Alert"))}else e.isShowNotePopup=!0,e.loadNoteData(e.LeadId);else e.isShowNotePopup=!0,null!=e.LeadId?e.loadNoteData(e.LeadId):e.loadNoteData(e.DealId)},loadNoteData:function(e){var t=this,a=e,i="id="+a+"&subModuleCode="+t.submodulecode+"&moduleName="+t.modulename;o["a"].NoteListing(i).then((function(e){if(null!=e.data&&e.data.data.length>0){if(t.noteData=e.data.data,null!=t.noteData&&t.noteData.length>0){var a=t.noteData.filter((function(e){return e.created_by==t.userid}));a.length>0&&(t.editDeleteButonFor=a[0].crm_note_id)}setTimeout((function(){t.CheckBoxBootstrap()}),100),t.NoRecordForTabNotes=!1}else t.NoRecordForTabNotes=!0,t.noteData=[]}))}}},r=l,d=a("2877"),c=Object(d["a"])(r,i,s,!1,null,null,null);t["a"]=c.exports},"841c":function(e,t,a){"use strict";var i=a("c65b"),s=a("d784"),n=a("825a"),o=a("1d80"),l=a("129f"),r=a("577e"),d=a("dc4a"),c=a("14c3");s("search",(function(e,t,a){return[function(t){var a=o(this),s=void 0==t?void 0:d(t,e);return s?i(s,t,a):new RegExp(t)[e](r(a))},function(e){var i=n(this),s=r(e),o=a(t,i,s);if(o.done)return o.value;var d=i.lastIndex;l(d,0)||(i.lastIndex=0);var u=c(i,s);return l(i.lastIndex,d)||(i.lastIndex=d),null===u?-1:u.index}]}))},"84a0":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[e.isShowNoteDialogue?a("div",{class:{"feedback-ticket feedback-ticket-present-answersDiv mb-2":!0,"border p-3":!e.isShowNoteDialogue||"quickViewAndNoteJS"!=e.callfrom}},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5 mb-2"},[a("span",[e._v(" "+e._s(e.$t("AddNotes")))])])]),a("div",{staticClass:"feedback-ticket-content"},[a("Form",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var i=t.values,s=t.meta;return[a("div",{staticClass:"feedback-conversation-box",staticStyle:{padding:"none"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Visibility"))+" :")]),a("div",{staticClass:"pl-0 border-0"},[a("div",{staticClass:"form-check form-check-inline"},[a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.IsPrivate,expression:"IsPrivate"}],staticClass:"custom-control-input dynamic",attrs:{type:"radio",id:"radio_Public",value:"0",name:"rdo_ForNote",checked:"checked"},domProps:{checked:e._q(e.IsPrivate,"0")},on:{change:function(t){e.IsPrivate="0"}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"radio_Public"}},[e._v(" "+e._s(e.$t("Public"))+" ")])])]),a("div",{staticClass:"form-check form-check-inline"},[a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.IsPrivate,expression:"IsPrivate"}],staticClass:"custom-control-input",attrs:{id:"radio_Private",type:"radio",value:"1",name:"rdo_ForNote"},domProps:{checked:e._q(e.IsPrivate,"1")},on:{change:function(t){e.IsPrivate="1"}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"radio_Private"}},[e._v(" "+e._s(e.$t("Private"))+" ")])])])])])])]),a("div",{staticClass:"conversation-content feedback-conversation-content"},[a("Field",{attrs:{name:"note",rules:{required:!0},label:"Note"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("ckeditor",{attrs:{editor:e.editor},model:{value:e.note,callback:function(t){e.note=t},expression:"note"}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"note"}},[e._v(e._s(i[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 mt-3 text-right"},[a("div",{staticClass:"form-group mb-0"},[a("div",{staticClass:"search-btm-btn"},[a("a",{staticClass:"btn btn-success save-btn mr-1",attrs:{href:"javascript:;",title:"Save"},on:{"~click":function(t){return e.saveNote(i,s)}}},[a("em",{staticClass:"fa fa-save pr-2 text-white"}),e._v(e._s(e.$t("Save"))+" ")]),a("a",{staticClass:"btn btn-danger delete-btn",attrs:{href:"javascript:;",title:"Cancel"},on:{click:function(t){return e.closeNoteDialogue()}}},[a("em",{staticClass:"fa fa-close pr-2 text-white"}),e._v(e._s(e.$t("Cancel")))])]),a("div",{staticStyle:{clear:"both"}})])])]}}],null,!1,2654907794)})],1)]):e._e(),e.isShowNoteDialogue&&"quickViewAndNoteJS"==e.callfrom?e._e():a("div",{staticClass:"pb-2 d-inline-block"},[a("span",{staticClass:"legend-Progress colorboxsquare"}),e._v(e._s(e.$t("Private"))+" "+e._s(e.$t("NOTE"))+" "),a("span",{staticClass:"legend-upcoming colorboxsquare ml-3"}),e._v(e._s(e.$t("Public"))+" "+e._s(e.$t("NOTE"))+" ")]),e.isShowNoteDialogue&&"quickViewAndNoteJS"==e.callfrom?e._e():a("div",{staticClass:"col-12 p-0"},[a("div",{staticClass:"container-fluid p-0"},[e.NoRecordForTab?a("div",{staticClass:"text-center text-danger p-4 border"},[e._v(e._s(e.NoRecordFoundText))]):e._e(),a("div",{staticStyle:{clear:"both"}}),"list"!=e.ListTypeForViewChange?a("div",{staticClass:"row ticket-card-container card-view bg-border p-0"},e._l(e.NoteData,(function(t,i){return a("div",{key:i,staticClass:"col-md-12 col-lg-6 col-xl-3 mb-3",staticStyle:{"min-width":"257px"}},[a("div",{class:{"card-box":!0,"blue-bg-light":!t.IS_PRIVATE,"green-bg-light":t.IS_PRIVATE}},[a("div",{staticClass:"card-heading d-flex align-items-center"},[a("span",{staticClass:"user-img-con mr-2"},[a("img",{attrs:{src:null!=t.PROFILE_PATH&&""!=t.PROFILE_PATH?t.PROFILE_PATH:"/Content/images/uc/uc_user_new.jpg",alt:""}})]),e._v(" "+e._s(t.notes_created_by)+" ")]),a("div",{staticClass:"card-detail-main",staticStyle:{"max-height":"150px"}},[a("div",{staticClass:"card-detail"},[a("em",{staticClass:"fa fa-address-card",attrs:{"aria-hidden":"true"}}),a("span",[e._v(e._s(t.crm_designation))])]),a("div",{staticStyle:{clear:"both"}}),a("crmreadmore",{attrs:{callFrom:"Notes",data:t.crm_notes,heading:e.$t("NOTE"),length:"100"},domProps:{innerHTML:e._s(t.crm_notes)}})],1),a("div",{staticClass:"bottom-action"},[a("div",{staticClass:"card-date"},[a("em",{staticClass:"fa fa-calendar-o",attrs:{"aria-hidden":"true"}}),a("span",[e._v("  "+e._s(e._f("formatDateTime")(t.note_date)))])]),e.userid==t.created_by&&t.crm_note_id==e.editDeleteButonFor?a("div",{staticClass:"card-action"},[e.userid==t.created_by&&t.crm_note_id==e.editDeleteButonFor?a("a",{staticClass:"round-icon-small btn-success-light",attrs:{href:"javascript:;"},on:{click:function(a){return e.editNote(t)}}},[a("em",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}})]):e._e(),e.userid==t.created_by&&t.crm_note_id==e.editDeleteButonFor?a("a",{staticClass:"round-icon-small btn-danger-light",attrs:{href:"javascript:;",id:"DeleteNote"},on:{click:function(a){return e.deleteNote(t.crm_note_id)}}},[a("em",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})]):e._e()]):e._e()])])])})),0):e._e()]),"list"==e.ListTypeForViewChange?a("div",{staticClass:"conversation-main"},[e._l(e.NoteData,(function(t,i){return[a("div",{staticClass:"conversation-time"},[a("span",[e._v(e._s(e.formatTime(t.note_date)))])]),e.NoRecordForTab?e._e():a("div",{staticClass:"conversation-box-con"},[a("div",{class:{"conversation-box":!0,"public-note":!t.IS_PRIVATE,"private-note":t.IS_PRIVATE}},[a("div",{staticClass:"name-circle light-grey"},[a("img",{staticClass:"img-circle avatar img-max-width",attrs:{src:null!=t.PROFILE_PATH&&""!=t.PROFILE_PATH?t.PROFILE_PATH:"/Content/images/DefaultImages/uc_user_new.jpg",alt:""}})]),a("div",{staticClass:"conversation-header"},[a("span",[a("span",{staticClass:"sender-name"},[e._v(e._s(t.notes_created_by))]),a("span",{staticClass:"sender-department"},[e._v("("),a("small",{staticClass:"text-danger font-14",attrs:{title:e._f("formatDateTime")(t.note_date)}},[e._v(e._s(e._f("formatDateTime")(t.note_date)))]),e._v(")")])]),a("span",{},[e.userid==t.created_by&&t.crm_note_id==e.editDeleteButonFor?a("a",{staticClass:"round-icon-small btn-danger-light float-right",attrs:{href:"javascript:;",id:"DeleteNote"},on:{click:function(a){return e.deleteNote(t.crm_note_id)}}},[a("em",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})]):e._e(),e.userid==t.created_by&&t.crm_note_id==e.editDeleteButonFor?a("a",{staticClass:"round-icon-small btn-success-light float-right",attrs:{href:"javascript:;"},on:{click:function(a){return e.editNote(t)}}},[a("em",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}})]):e._e()])]),a("div",{staticClass:"conversation-content"},[a("p",{domProps:{innerHTML:e._s(t.crm_notes)}})])])])]}))],2):e._e()])])},s=[],n=(a("a9e3"),a("ac1f"),a("1276"),a("5319"),a("498a"),a("4de4"),a("d3b7"),a("3ca3"),a("ddb0"),a("9861"),a("841c"),a("e9c4"),a("c1df")),o=a.n(n),l=a("3e9a"),r=a("9769"),d=a("fb3d"),c=a.n(d),u={components:{crmreadmore:l["a"],ClassicEditor:c.a},props:{notedata:{type:Array,required:!0},userid:{type:Number,required:!0},sourceid:null,modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callfrom:{type:String},curIndex:{type:Number},listtype:{type:String},showNotePopUp:{type:Boolean}},data:function(){return{NoteData:[],NoRecordForTab:!0,LeadStatus:this.$parent.LeadStatus,isShowNoteDialogue:!1,note:"",crmNoteId:null,editDeleteButonFor:0,isShowFulleNote:!1,FulleNoteToShow:"",IsPrivate:"0",TotalCount:0,ListTypeForViewChange:"list",NoRecordFoundText:this.$t("Loading"),editor:c.a,userTimeZone:null}},created:function(){this.userTimeZone=this.GetUserInfo.TimeZone.split(":"),String.prototype.format=function(){var e=arguments;return this.replace(/{([0-9]+)}/g,(function(t,a){return"undefined"==typeof e[a]?t:e[a]}))}},watch:{listtype:function(e){this.ListTypeForViewChange=e},notedata:function(e){var t=this;if(t.ListTypeForViewChange=""!=$.trim(t.listtype)?t.listtype:t.ListTypeForViewChange,t.TotalCount=e.length,t.NoteData=e,t.NoRecordForTab=!(null!=t.NoteData&&t.NoteData.length>0),t.NoRecordForTab&&(t.NoRecordFoundText=t.$t("NoRecordfound")),t.isShowNoteDialogue=t.showNotePopUp,t.crmNoteId=null,t.note="",null!=t.NoteData&&t.NoteData.length>0){var a=t.NoteData.filter((function(e){return e.created_by==t.userid}));a.length>0&&(t.editDeleteButonFor=a[0].crm_note_id)}}},methods:{onReady:function(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},formatTime:function(e){if(e)try{var t="h:mm A";t=String(t).replace("t","A").replace("t","");var a=new Date(o()(String(e)).year(),o()(String(e)).month(),o()(String(e)).date(),o()(String(e)).hours(),o()(String(e)).minutes());return o()(a,"h:mm A").format(String(t))}catch(i){return t=String(t).replace("t","a").replace("t",""),o()(String(e)).format(String("h:mm A").toUpperCase()+" "+String(t))}},openNoteDialogue:function(){"undefined"===typeof this.$parent.checkForAdditionalPermission||this.$parent.checkForAdditionalPermission("AddNote")?(this.isShowNoteDialogue=!0,this.IsPrivate="0",this.NoRecordForTab=!this.isShowNoteDialogue):alertR(Globalize.localize("additionalOwnerAuthorityWarning"),!0,this.$t("Alert"))},closeNoteDialogue:function(){var e=this;if(e.note="",e.IsPrivate="0","quickViewAndNoteJS"==e.callfrom){console.log(e.$parent),e.$parent.isShowNotePopup=!1;var t=new URLSearchParams(window.location.search),a=t.get("reqfrom");null==a&&(a=0);var i=parseInt(a)||0;i>0&&e.$parent.loadNoteData(e.sourceid)}else e.$parent.loadData("notes");$(".AddNote").removeClass("d-none"),e.isShowNoteDialogue=!1,e.NoRecordForTab=!(null!=e.NoteData&&e.NoteData.length>0),e.crmNoteId=null},saveNote:function(e,t){var a=this,i=new URLSearchParams(window.location.search),s=i.get("reqfrom");null==s&&(s=window.location.pathname.indexOf("Listing")>-1||window.location.pathname.indexOf("Index")>-1?1:0);var n=parseInt(s)||0;this.$refs.form.validate().then((function(e){if(e){var t={sourceId:a.sourceid,moduleName:a.modulename,subModuleCode:a.submodulecode,note:a.note,isPrivate:a.IsPrivate,crmNotesId:a.crmNoteId},i=JSON.stringify(t);r["a"].SaveNoteData(i).then((function(e){"Success"==e.data[0].Status&&("CRM_LEADS"==a.submodulecode&&n>0&&(a.$parent.leadInfo.note_count=a.TotalCount+1),"CRM_DEALS"==a.submodulecode&&n>0&&(a.$parent.DealInfo.NOTE_COUNT=a.TotalCount+1),a.closeNoteDialogue(),a.ShowAlert(a.$t("InterviewStageAdded",[a.$t("Note")]),"Success",!0,a.$t("Alert")),n>0?a.$parent.loadNoteData(a.sourceid):a.$parent.loadData("notes","savenote"),a.note="",a.isShowNoteDialogue=!1,$(".AddNote").removeClass("d-none"))}))}}))},editNote:function(e){$("#DeleteNote").addClass("disabled"),$(".AddNote").addClass("d-none");var t=this;t.isShowNoteDialogue=!0,t.note=e.crm_notes,t.IsPrivate=e.IS_PRIVATE?"1":"0",t.crmNoteId=e.crm_note_id},deleteNote:function(e){var t=this,a=new URLSearchParams(window.location.search),i=a.get("reqfrom");null==i&&(i=window.location.pathname.indexOf("Listing")>-1||window.location.pathname.indexOf("Index")>-1?1:0);var s=parseInt(i)||0;t.confirmR(this.$t("ConfirmDelete"),this.$t("Delete"),this.$t("Note"),(function(){var a={ids:e,moduleName:t.modulename,subModuleCode:t.submodulecode,refCode:"DELETE_VIEW_CRM_NOTE"},i=JSON.stringify(a);r["a"].CommonDelete(i).then((function(e){var a="";"Success"==e.data[0].Status?("CRM_LEADS"==t.submodulecode&&s>0&&(t.$parent.$parent.leadInfo.note_count=t.TotalCount-1),"CRM_DEALS"==t.submodulecode&&s>0&&(t.$parent.$parent.DealInfo.note_count=t.TotalCount-1),"quickViewAndNoteJS"==t.callfrom&&s>0?t.$parent.$parent.loadNoteData(t.sourceid):t.$parent.loadData("notes"),a=t.ShowAlert(t.$t("DeletedSuccess",[t.$t("NOTE")]),"success",!0,t.$t("Alert"))):a=t.ShowAlert(t.$t("DeletedError",[t.$t("NOTE")]),"failure",!0,t.$t("Alert")),setTimeout((function(){a.modal("hide")}),2e3)}))}))},returnShortNoteString:function(e,t){var a=document.implementation.createHTMLDocument().createElement("div");return a.innerHTML=e,noteHtmlData=a.innerText,noteHtmlData.length<=t?e:noteHtmlData.substring(0,t)},isShowReadMoreButtton:function(e,t){var a=document.implementation.createHTMLDocument().createElement("div");return a.innerHTML=e,noteHtmlData=a.innerText,!(noteHtmlData.length<=t)},openFullNoteModal:function(e){this.FulleNoteToShow=e,this.isShowFulleNote=!0}}},m=u,p=(a("25ab"),a("2877")),v=Object(p["a"])(m,i,s,!1,null,"27c32083",null);t["a"]=v.exports},"90d8":function(e,t,a){var i=a("c65b"),s=a("1a2d"),n=a("3a9b"),o=a("ad6d"),l=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in l||s(e,"flags")||!n(l,e)?t:i(o,e)}},9861:function(e,t,a){a("5352")},a2a4:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal d-block my-popups dialog"},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[e._t("headerForModal",(function(){return[a("h5",{staticClass:"modal-title"},[e._v(e._s(e.$t("AdditionalOwner")))])]})),a("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),a("div",{staticClass:"modal-body"},[a("Form",{ref:"form"},[a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},[a("div",{staticClass:"form-group"},["CRM_DEALS"==e.subModuleCode?a("label",[e._v(" "+e._s(e.$t("DealOwner"))+": "),a("span",{staticClass:"text-danger"},[e._v("*")])]):a("label",[e._v(" "+e._s(e.$t("LeadOwner"))+": "),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"name",rules:{required:!0},label:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors,s=t.changed;return[a("Multiselect",{attrs:{object:!0,label:"label","show-labels":!1,multiple:!0,taggable:!0,"track-by":"value",placeholder:"CRM_DEALS"==e.subModuleCode?"Deal Owner Search":"Lead Owner Search",searchable:!0,options:e.leadOwnerList},on:{"update:modelValue":s},model:{value:e.leadOwner,callback:function(t){e.leadOwner=t},expression:"leadOwner"}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"name"}},[e._v(e._s(i[0]))])]}}])})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 mb-3 float-left listing"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered mb-0",attrs:{"aria-describedby":"addaddtionalowner"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{attrs:{scope:"col"}},[a("span",[e._v(e._s(e.$t("Permission"))+" "+e._s(e.$t("For")))])]),a("th",{attrs:{scope:"col"}},[a("span",[e._v(e._s(e.$t("View")))])]),a("th",{attrs:{scope:"col"}},[a("span",[e._v(e._s(e.$t("Add")))])]),a("th",{attrs:{scope:"col"}},[a("span",[e._v(e._s(e.$t("Update")))])]),a("th",{attrs:{scope:"col"}},[a("span",[e._v(e._s(e.$t("Delete")))])])])]),a("tbody",e._l(e.permissions,(function(t){return a("tr",{attrs:{Key:t}},[a("td",{attrs:{"data-id":"item.crmModuleId"}},[e._v(e._s(t.crmModuleName))]),a("td",[t.View.length>0?a("label",{staticClass:"switch"},[t.View.length>0?a("input",{directives:[{name:"model",rawName:"v-model",value:t.View[0].isSelected,expression:"item.View[0].isSelected"}],staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{type:"checkbox",disabled:t.View[0].isDisable,onchange:e.clickOnView(t)},domProps:{value:t.View[0].permission_id,checked:1==t.View[0].isSelected,checked:Array.isArray(t.View[0].isSelected)?e._i(t.View[0].isSelected,t.View[0].permission_id)>-1:t.View[0].isSelected},on:{change:function(a){var i=t.View[0].isSelected,s=a.target,n=!!s.checked;if(Array.isArray(i)){var o=t.View[0].permission_id,l=e._i(i,o);s.checked?l<0&&e.$set(t.View[0],"isSelected",i.concat([o])):l>-1&&e.$set(t.View[0],"isSelected",i.slice(0,l).concat(i.slice(l+1)))}else e.$set(t.View[0],"isSelected",n)}}}):e._e(),a("span",{staticClass:"slider round"},[a("span",{staticClass:"slider-yes"},[e._v(e._s(e.$t("Yes")))]),a("span",{staticClass:"slider-no"},[e._v(e._s(e.$t("No")))])])]):e._e()]),a("td",[t.Add.length>0?a("label",{staticClass:"switch"},[t.Add.length>0?a("input",{directives:[{name:"model",rawName:"v-model",value:t.Add[0].isSelected,expression:"item.Add[0].isSelected"}],staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{type:"checkbox",disabled:t.Add[0].isDisable,onchange:e.clickOnAdd(t)},domProps:{value:t.Add[0].permission_id,checked:1==t.Add[0].isSelected,checked:Array.isArray(t.Add[0].isSelected)?e._i(t.Add[0].isSelected,t.Add[0].permission_id)>-1:t.Add[0].isSelected},on:{change:function(a){var i=t.Add[0].isSelected,s=a.target,n=!!s.checked;if(Array.isArray(i)){var o=t.Add[0].permission_id,l=e._i(i,o);s.checked?l<0&&e.$set(t.Add[0],"isSelected",i.concat([o])):l>-1&&e.$set(t.Add[0],"isSelected",i.slice(0,l).concat(i.slice(l+1)))}else e.$set(t.Add[0],"isSelected",n)}}}):e._e(),a("span",{staticClass:"slider round"},[a("span",{staticClass:"slider-yes"},[e._v(e._s(e.$t("Yes")))]),a("span",{staticClass:"slider-no"},[e._v(e._s(e.$t("No")))])])]):e._e()]),a("td",[t.Update.length>0?a("label",{staticClass:"switch"},[t.Update.length>0?a("input",{directives:[{name:"model",rawName:"v-model",value:t.Update[0].isSelected,expression:"item.Update[0].isSelected"}],staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{type:"checkbox",disabled:t.Update[0].isDisable,onchange:e.clickOnUpdate(t)},domProps:{value:t.Update[0].permission_id,checked:1==t.Update[0].isSelected,checked:Array.isArray(t.Update[0].isSelected)?e._i(t.Update[0].isSelected,t.Update[0].permission_id)>-1:t.Update[0].isSelected},on:{change:function(a){var i=t.Update[0].isSelected,s=a.target,n=!!s.checked;if(Array.isArray(i)){var o=t.Update[0].permission_id,l=e._i(i,o);s.checked?l<0&&e.$set(t.Update[0],"isSelected",i.concat([o])):l>-1&&e.$set(t.Update[0],"isSelected",i.slice(0,l).concat(i.slice(l+1)))}else e.$set(t.Update[0],"isSelected",n)}}}):e._e(),a("span",{staticClass:"slider round"},[a("span",{staticClass:"slider-yes"},[e._v(e._s(e.$t("Yes")))]),a("span",{staticClass:"slider-no"},[e._v(e._s(e.$t("No")))])])]):e._e()]),a("td",[t.Delete.length>0?a("label",{staticClass:"switch"},[t.Delete.length>0?a("input",{directives:[{name:"model",rawName:"v-model",value:t.Delete[0].isSelected,expression:"item.Delete[0].isSelected"}],staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{type:"checkbox",disabled:t.Delete[0].isDisable,onchange:e.clickOnDelete(t)},domProps:{value:t.Delete[0].permission_id,checked:1==t.Delete[0].isSelected,checked:Array.isArray(t.Delete[0].isSelected)?e._i(t.Delete[0].isSelected,t.Delete[0].permission_id)>-1:t.Delete[0].isSelected},on:{change:function(a){var i=t.Delete[0].isSelected,s=a.target,n=!!s.checked;if(Array.isArray(i)){var o=t.Delete[0].permission_id,l=e._i(i,o);s.checked?l<0&&e.$set(t.Delete[0],"isSelected",i.concat([o])):l>-1&&e.$set(t.Delete[0],"isSelected",i.slice(0,l).concat(i.slice(l+1)))}else e.$set(t.Delete[0],"isSelected",n)}}}):e._e(),a("span",{staticClass:"slider round"},[a("span",{staticClass:"slider-yes"},[e._v(e._s(e.$t("Yes")))]),a("span",{staticClass:"slider-no"},[e._v(e._s(e.$t("No")))])])]):e._e()])])})),0)])])])]),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("a",{staticClass:"btn btn-success save-btn mr-1",attrs:{href:"javascript:;",title:""},on:{click:function(t){return e.saveAdditionalOwnerPermission()}}},[a("em",{staticClass:"fa fa-save pr-2"}),e._v(" "+e._s(e.$t("Save"))+" ")]),a("a",{staticClass:"btn btn-danger delete-btn",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-times"}),e._v(" "+e._s(e.$t("Cancel"))+" ")])]),a("div",{staticClass:"col-lg-6"},[e.chkpermission?a("div",{staticClass:"py-2"},[a("small",{staticClass:"text-danger"},[e._v(e._s(e.$t("requiredpermission")))])]):e._e()])])])])])],1)])])])])},s=[],n=(a("d81d"),a("b0c0"),a("4de4"),a("d3b7"),a("99af"),a("ac1f"),a("5319"),a("5b81"),a("e9c4"),a("9769")),o={props:{subModuleCode:null},data:function(){return{leadOwner:[],leadOwnerList:[],leadOwnerListAll:[],permissions:[],chkpermission:!1,additionalLeadOwnerIdForEdit:null,vSelectValidate:!1}},created:function(){this.additionalLeadOwnerIdForEdit=this.$parent.additionalLeadOwnerId,this.getLeadOwnerList(),this.GetAllLeadOwnerPermission()},methods:{getLeadOwnerList:function(){var e=this,t="id=&moduleName=CRM&type=CRM_USERS";n["a"].getDDLData(t).then((function(t){var a=t.data;if(null!=a)if(e.leadOwnerList=a.DATA,e.leadOwnerList=e.leadOwnerList.map((function(e){return{value:e.value,label:e.name}})),e.leadOwnerListAll=a.DATA,e.additionalLeadOwnerIdForEdit>0){var i=e.$parent.additionalLeadOwners.filter((function(e){return 1==e.IS_DEFAULT}));$.each(i,(function(t,a){e.leadOwnerList=e.leadOwnerList.filter((function(e){return e.value!=a.LEAD_OWNER_ID}))})),e.leadOwner=e.leadOwnerList.filter((function(t){return t.value==e.additionalLeadOwnerIdForEdit})),e.leadOwnerListAll=e.leadOwnerList}else $.each(e.$parent.additionalLeadOwners,(function(t,a){e.leadOwnerList=e.leadOwnerList.filter((function(e){return e.value!=a.LEAD_OWNER_ID}))})),e.leadOwnerListAll=e.leadOwnerList}))},clickOnView:function(e){var t=this;e.View[0].isSelected?(t.chkpermission=!1,e.Add.length>0&&(e.Add[0].isDisable=!1),e.Update.length>0&&(e.Update[0].isDisable=!1),e.Delete.length>0&&(e.Delete[0].isDisable=!1)):(e.Add.length>0&&(e.Add[0].isDisable=!0,e.Add[0].isSelected=!1),e.Update.length>0&&(e.Update[0].isDisable=!0,e.Update[0].isSelected=!1),e.Delete.length>0&&(e.Delete[0].isDisable=!0,e.Delete[0].isSelected=!1))},clickOnAdd:function(e){var t=this;e.Add[0].isSelected&&(t.chkpermission=!1)},clickOnUpdate:function(e){var t=this;e.Update[0].isSelected&&(t.chkpermission=!1)},clickOnDelete:function(e){var t=this;e.Delete[0].isSelected&&(t.chkpermission=!1)},GetAllLeadOwnerPermission:function(){var e=this,t=null!=this.additionalLeadOwnerIdForEdit?this.additionalLeadOwnerIdForEdit:null,a="CRM_DEALS"==e.subModuleCode?"subModuleCode=CRM_DEALS&leadOwner=".concat(t,"&leadId=").concat(e.$route.path.indexOf("Listing")>-1||e.$route.path.indexOf("Index")>-1?null:e.$route.params.id):"subModuleCode=CRM_LEADS&leadOwner=".concat(t,"&leadId=").concat(e.$route.path.indexOf("Listing")>-1||e.$route.path.indexOf("Index")>-1?null:e.$route.params.id);a=a.replaceAll("null",""),n["a"].GetAllLeadOwnerPermission(a).then((function(t){if(null!=t.data){var a=t.data.permission,i=t.data.assignedPermission;$.each(a,(function(t,s){var n=$.grep(e.permissions,(function(e,t){return e.crmModuleId==s.crm_module_id}));if(0==n.length&&(n=$.grep(a,(function(e,t){return e.crm_module_id==s.crm_module_id})),n.length>0)){var o=[],l=n.filter((function(e){return"View"==e.permission_name}));$.each(n,(function(e,t){var a=[];i.length>0&&(a=i.filter((function(e){return e.permission_id==t.permission_id})));var s={permission_name:t.permission_name,permission_id:t.permission_id,isSelected:a.length>0,isDisable:"View"!=t.permission_name&&0!=l.length};o.push(s)}));var r={crmModuleId:s.crm_module_id,crmModuleName:s.module_name,View:o.filter((function(e){return"View"==e.permission_name})),Add:o.filter((function(e){return"Add"==e.permission_name})),Update:o.filter((function(e){return"Update"==e.permission_name})),Delete:o.filter((function(e){return"Delete"==e.permission_name}))};e.permissions.push(r)}}))}}))},saveAdditionalOwnerPermission:function(){var e=this,t="";e.chkpermission=!0,e.$refs.form.validate().then((function(a){if(a&&e.leadOwner.length>0){$.each(e.leadOwner,(function(e,a){t+=""==t?a.value:","+a.value}));var i="";$(".chkItems:checkbox:checked").each((function(){i.length>0&&(i+=","),i+=$(this).val()}));var s={leadOwner:t,leadId:""==i?e.$route.params.id:i,permissionIds:""},o="";$.each(e.permissions,(function(e,t){t.View.length>0&&t.View[0].isSelected&&(o+=""==o?t.View[0].permission_id:","+t.View[0].permission_id),t.Add.length>0&&t.Add[0].isSelected&&(o+=""==o?t.Add[0].permission_id:","+t.Add[0].permission_id),t.Update.length>0&&t.Update[0].isSelected&&(o+=""==o?t.Update[0].permission_id:","+t.Update[0].permission_id),t.Delete.length>0&&t.Delete[0].isSelected&&(o+=""==o?t.Delete[0].permission_id:","+t.Delete[0].permission_id)})),s.permissionIds=o;var l=JSON.stringify(s);"CRM_DEALS"==e.subModuleCode||window.location.pathname.indexOf("DealListing")>-1?n["a"].saveAdditionalDealOwnerPermission(l).then((function(t){null!=t&&"Success"==t.data[0].Status&&(e.ShowAlert(e.$t("RecordsSavedSuccessfully")),e.$parent.showAdditionalOwnerPopup=!1,$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),e.$route.params.id>0&&e.$parent.loadData("CRM_DEALS"==e.subModuleCode?"additionalDealowners":"additionalleadowners"),e.$emit("close"))})):n["a"].saveAdditionalOwnerPermission(l).then((function(t){null!=t&&"Success"==t.data[0].Status&&(e.ShowAlert(e.$t("RecordsSavedSuccessfully")),e.$parent.showAdditionalOwnerPopup=!1,$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),e.$route.params.id>0&&e.$parent.loadData("additionalleadowners"),e.$emit("close"))}))}}))}}},l=o,r=a("2877"),d=Object(r["a"])(l,i,s,!1,null,null,null);t["a"]=d.exports},a3ba:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".ck-editor__editable[data-v-27c32083]{min-height:200px!important;border:1px solid #c1c1c1}.validborder[data-v-27c32083]{border:none!important}.validborder .ck-content[data-v-27c32083]{border-color:#dc3545!important}",""]),e.exports=t},a81f:function(e,t,a){var i=a("a3ba");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("499e").default;s("483806fa",i,!0,{sourceMap:!1,shadowMode:!1})},addb:function(e,t,a){var i=a("4dae"),s=Math.floor,n=function(e,t){var a=e.length,r=s(a/2);return a<8?o(e,t):l(e,n(i(e,0,r),t),n(i(e,r),t),t)},o=function(e,t){var a,i,s=e.length,n=1;while(n<s){i=n,a=e[n];while(i&&t(e[i-1],a)>0)e[i]=e[--i];i!==n++&&(e[i]=a)}return e},l=function(e,t,a,i){var s=t.length,n=a.length,o=0,l=0;while(o<s||l<n)e[o+l]=o<s&&l<n?i(t[o],a[l])<=0?t[o++]:a[l++]:o<s?t[o++]:a[l++];return e};e.exports=n},b32d:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal d-block my-popups dialog"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[e._t("header",(function(){return[a("h5",[e._v(e._s(e.$t("SendEmail")))])]})),a("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),a("div",{staticClass:"modal-body"},[a("Form",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var i=t.valid,s=t.errors;return[a("div",{},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("Subject"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Email Subject",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.emailSubject,expression:"emailSubject"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{type:"text",maxlength:50,name:"emailSubject",disabled:e.isView},domProps:{value:e.emailSubject},on:{input:function(t){t.target.composing||(e.emailSubject=t.target.value)}}}),a("span",{staticClass:"invalid-feedback",attrs:{name:"Email Subject"}},[e._v(e._s(i[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("EmailTemplate"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Email TemplateValue",rules:{required:!0},label:"Email"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("select",{class:{"form-control":!0,"is-invalid":i[0]},attrs:{id:"",name:"emailtemplateValue"},domProps:{value:e.emailtemplateValue},on:{change:e.getSelectedValue}},[a("option",{attrs:{value:""}},[e._v(" "+e._s(e.$t("Select"))+" "+e._s(e.$t("EmailTemplate"))+" ")]),e._l(e.emailtemplate,(function(t,i){return a("option",{key:i,domProps:{value:t.value}},[e._v(e._s(t.name))])}))],2),a("span",{staticClass:"invalid-feedback",attrs:{name:"Email TemplateValue"}},[e._v(e._s(i[0]))])]}}],null,!0),model:{value:e.emailtemplateValue,callback:function(t){e.emailtemplateValue=t},expression:"emailtemplateValue"}})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("Priority"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Email PriorityValue",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:e.emailPriorityValue,expression:"emailPriorityValue"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{id:"emailPriorityValue",name:"emailPriorityValue"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.emailPriorityValue=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v(" "+e._s(e.$t("Select"))+" "+e._s(e.$t("Priority"))+" ")]),a("option",{attrs:{value:"normal"}},[e._v(e._s(e.$t("Normal"))+" ")]),a("option",{attrs:{value:"low"}},[e._v(" "+e._s(e.$t("Low"))+" ")]),a("option",{attrs:{value:"high"}},[e._v(" "+e._s(e.$t("High"))+" ")])]),i[0]?a("span",{staticClass:"invalid-feedback",attrs:{name:"Email PriorityValue"}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1)]),"CampaignDetails"!=e.callFrom?a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("Description"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Description",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[a("ckeditor",{staticStyle:{height:"400px"},attrs:{editor:e.editor},model:{value:e.Description,callback:function(t){e.Description=t},expression:"Description"}}),i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1)]):e._e()]),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("div",{staticClass:"py-2"},[a("a",{staticClass:"btn btn-success formbtn text-white mr-2",attrs:{href:"javascript:;"},on:{click:function(t){return e.saveEmail(i,s)}}},[a("em",{staticClass:"fa fa-send pr-2"}),e._v(e._s(e.$t("Send"))+" ")]),a("a",{staticClass:"btn btn-danger formbtn widthhalf text-white",on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-close pr-2"}),e._v(e._s(e.$t("Cancel"))+" ")])])]),a("div",{staticClass:"col-lg-6 pt-2"},[a("small",{staticClass:"text-danger"},[e._v(" "+e._s(e.$t("MandatoryString"))+" ")])])])])]}}])})],1)])])])])},s=[],n=(a("a9e3"),a("e9c4"),a("fb3d")),o=a.n(n),l=a("9769"),r={props:{selectedids:null,userid:{type:Number,required:!0},companyid:{type:Number,required:!0},templatename:{type:String,required:!0},selecteditems:{type:Array,required:!0},emailSubject:{type:String,required:!0},submodulecode:{type:String,required:!0},callFrom:{type:String}},data:function(){return{emailSubject:"",emailPriorityValue:"",duedate:"",Subject:"",txtemailDescription:"",emailtemplate:[],Message:"",emailtemplateValue:"",modal:[],isView:!1,editor:o.a,options:{useCurrent:!1,showClear:!0,showClose:!0}}},created:function(){this.modal=this.modalItem,this.GetEmailTemplate()},methods:{onReady:function(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},GetEmailTemplate:function(){var e=this,t="id=&type=EMAILTEMPLATE";"CRM_STAGES"==e.submodulecode&&(t="",t="id=&type=CRM_STAGE_EMAILTEMPLATE"),l["a"].getLeaOwnerBySearch(t).then((function(t){var a=t.data;if(null!=a)return e.emailtemplate=a.DATA,e.emailtemplate}))},loadEmailTemplate:function(e){if(""!=e){var t=this,a=e,i="id="+a;l["a"].GetEmailData(i).then((function(e){var a=e.data;null!=a&&(t.Description=a.data[0].template_content)}))}else t.txtemailDescription=""},getSelectedValue:function(e){this.emailtemplateValue=e.target.value,this.loadEmailTemplate(this.emailtemplateValue)},saveEmail:function(e,t){var a=this;a.$refs.form.validate().then((function(e){if(e){var t={templatename:a.emailtemplateValue,selecteditems:a.selectedids,emailSubject:a.emailSubject,emailPriorityValue:a.emailPriorityValue,submodulecode:a.submodulecode,mailStatus:0,emailCc:null,emailBcc:null,body:"CampaignDetails"==a.callFrom?null:a.Description,to:null};if("CampaignDetails"==a.callFrom){t.campaignId=a.$route.params.id;var i=JSON.stringify(t);l["a"].AddGroupEmailTemplate(i).then((function(e){"Success"==e.data[0].Status?(a.ShowAlert(a.$t("Email Sent Successfully"),"success",!0,a.$t("Alert")),a.duedate="",a.Subject="",a.priority="",a.Message="",a.$emit("close"),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked")):a.ShowAlert(a.$t("UnknownErrorOccur"),"warning",!0,a.$t("Alert"))}))}else{i=JSON.stringify(t);l["a"].AddEmailTemplate(i).then((function(e){200==e.status?(a.ShowAlert(a.$t("Email Sent Successfully"),"success",!0,a.$t("Alert")),a.duedate="",a.Subject="",a.priority="",a.Message="",a.$emit("close"),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#Sendbulkmail").addClass("disabled"),$("#ChangeOwnerId").addClass("disabled"),$("#AdditionalOwnerId").addClass("disabled"),$("#CloseLeadId").addClass("disabled"),$("[id^=Delete]").addClass("disabled")):a.ShowAlert(a.$t("UnknownErrorOccur"),"warning",!0,a.$t("Alert"))}))}}}))}}},d=r,c=a("2877"),u=Object(c["a"])(d,i,s,!1,null,null,null);t["a"]=u.exports},b421:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".vc-popover-content-wrapper{z-index:999}",""]),e.exports=t},b6c5:function(e,t,a){var i=a("b421");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("499e").default;s("05d6f59c",i,!0,{sourceMap:!1,shadowMode:!1})},dbb4:function(e,t,a){var i=a("23e7"),s=a("83ab"),n=a("56ef"),o=a("fc6a"),l=a("06cf"),r=a("8418");i({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(e){var t,a,i=o(e),s=l.f,d=n(i),c={},u=0;while(d.length>u)a=s(i,t=d[u++]),void 0!==a&&r(c,t,a);return c}})},e29d:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("FollowUp")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.closePopup()}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body",staticStyle:{"max-height":"600px","overflow-y":"auto"}},[a("div",{staticClass:"listing"},[e.followupList.length>0?a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"table-openactivities-content","aria-describedby":"folowuplist"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{attrs:{scope:"col"}},[a("span",[e._v(" "+e._s(e.$t("Subject"))+" ")])]),a("th",{attrs:{scope:"col"}},[a("span",[e._v(" "+e._s(e.$t("Activity"))+" "+e._s(e.$t("Type"))+" ")])]),a("th",{attrs:{scope:"col"}},[a("span",[e._v(" "+e._s(e.$t("Activity"))+" "+e._s(e.$t("ScheduleDate"))+" ")])]),a("th",{attrs:{scope:"col"}},[a("span",[e._v(" "+e._s(e.$t("Activity"))+" "+e._s(e.$t("OWNER"))+" ")])]),a("th",{attrs:{scope:"col"}},[a("span",[e._v(" "+e._s(e.$t("CreatedAt"))+" ")])]),a("th",{attrs:{scope:"col"}},[a("span",[e._v(" "+e._s(e.$t("Status"))+" ")])]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[a("span",[e._v(" "+e._s(e.$t("Action"))+" ")])])])]),a("tbody",e._l(e.followupList,(function(t){return a("tr",[a("td",[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return e.openToAddEditFollowUp(t)}}},[e._v(e._s(t.followup_notification_subject))])]),a("td",["FollowUp"===t.activity_type?a("div",[a("label",[e._v(" "+e._s(e.$t("FollowUp"))+" ")])]):a("div",[e._v(" "+e._s(t.activity_type)+" ")])]),a("td",[e._v(e._s(e.$options.filters.formatDate(t.followup_notification_schedule)))]),a("td",[e._v(e._s(t.activity_owner))]),a("td",[e._v(e._s(e.$options.filters.formatDate(t.created_at)))]),a("td",[a("span",{class:{"px-2 bg-success text-white d-block text-center":"Active"==t.status_name,"px-2 bg-danger text-white d-block text-center":"Inactive"==t.status_name}},[e._v(e._s(t.status_name))])]),a("td",{staticClass:"text-center single-action"},[a("a",{attrs:{href:"javascript:;",title:e.$t("Delete")},on:{click:function(a){return e.DeleteActivityData(t.followup_notification_id)}}},[a("em",{staticClass:"fa fa-trash action-icon text-danger"})])])])})),0)])]):e._e(),0==e.followupList.length?a("div",{staticClass:"text-center text-danger p-4 border no-record"},[e._v(" "+e._s(e.$t("NoRecordfound")))]):e._e()])]),a("div",{staticClass:"modal-footer"},[a("div",{staticClass:"col-lg-6 text-right p-0"},[a("a",{staticClass:"btn btn-success formbtn text-white",attrs:{href:"javascript:;"},on:{click:function(t){return e.openToAddEditFollowUp(null)}}},[a("em",{staticClass:"fa fa-plus pr-2"}),e._v(e._s(e.$t("Add"))+" "+e._s(e.$t("FollowUp")))])])])])])]),e.showAddEventModalForAddEdit?a("modalevent",{ref:"addEditFollowupModal",attrs:{modulename:e.modulename,submodulecode:e.submodulecode,sourceid:e.sourceId},on:{close:function(t){e.showAddEventModalForAddEdit=!1}}}):e._e()],1)])},s=[],n=(a("a9e3"),a("4de4"),a("d3b7"),a("e9c4"),a("6c06")),o=a("9769"),l={components:{modalevent:n["a"]},props:{modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},userid:{type:Number,required:!0},leadInfo:{Type:Object,required:!0},srcId:{Type:String,required:!0}},data:function(){return{followupList:[],showAddEventModalForAddEdit:!1,sourceId:null,listItem:null}},created:function(){this.sourceId=this.srcId,this.loadFollowUpData(this.leadInfo,this.srcId)},methods:{formatDateTimeFunc:function(e){if(e)return moment(String(e),"YYYY-MM-DD HH:mm").format("MM/dd/yyyy")},loadFollowUpData:function(e,t){if("undefined"!=typeof t&&null!=t&&""!=t){var a=this;a.listItem=e,a.sourceId=t,a.followupList=[];var i="id="+t+"&subModuleCode="+a.submodulecode+"&moduleName="+a.modulename;o["a"].getFollowupList(i).then((function(e){""!=e.data&&null!=e.data&&e.data.data.length>0?(a.followupList=e.data.data.filter((function(e){return"FollowUp"==e.activity_type})),setTimeout((function(){a.CheckBoxBootstrap()}),100),setTimeout((function(){a.ResponsiveDataTable("table-openactivities-content")}),500)):a.followupList=[]}))}},DeleteActivityData:function(e){var t=this;e>0&&t.confirmR(this.$t("ConfirmDelete"),!0,this.$t("Confirm"),(function(){var a={ids:e,moduleName:t.modulename,subModuleCode:t.submodulecode,refCode:"DELETE_VIEW_ACTIVITY",refId:t.sourceId},i=JSON.stringify(a);o["a"].deleteActivityData(i).then((function(e){"Success"==e.data[0].Status?(t.ShowAlert(t.$t("DeletedSuccess",[t.$t("FollowUp")]),"success",!0,t.$t("Alert")),t.loadFollowUpData(null,t.sourceId)):t.ShowAlert(t.$t("DeletedError",[t.$t("FollowUp")]),"warning",!0,t.$t("Alert"))}))}))},closePopup:function(){this.$emit("close")},openToAddEditFollowUp:function(e){var t=this;if(null!=t.listItem&&"NO"!=t.listItem.is_additional_lead_owner&&"CRM_LEADS"==t.submodulecode){var a=JSON.parse(t.listItem.is_additional_lead_owner),i=a.filter((function(e){return"AddAcitvities"==e.permission_code}));i.length>0?(t.showAddEventModalForAddEdit=!0,null!=e&&setTimeout((function(){t.$refs.addEditFollowupModal.FetchEventViewData(e.followup_notification_id)}),500)):alert(t.$t("additionalOwnerAuthorityWarning"))}else t.showAddEventModalForAddEdit=!0,console.log(t.sourceId),null!=e&&setTimeout((function(){t.$refs.addEditFollowupModal.FetchEventViewData(e.followup_notification_id)}),500)}}},r=l,d=a("2877"),c=Object(d["a"])(r,i,s,!1,null,null,null);t["a"]=c.exports},e439:function(e,t,a){var i=a("23e7"),s=a("d039"),n=a("fc6a"),o=a("06cf").f,l=a("83ab"),r=s((function(){o(1)})),d=!l||r;i({target:"Object",stat:!0,forced:d,sham:!l},{getOwnPropertyDescriptor:function(e,t){return o(n(e),t)}})}}]);
//# sourceMappingURL=CRMLead.js.map